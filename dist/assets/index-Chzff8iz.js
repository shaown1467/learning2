(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var xv={exports:{}},vu={},vv={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),CN=Symbol.for("react.portal"),AN=Symbol.for("react.fragment"),RN=Symbol.for("react.strict_mode"),jN=Symbol.for("react.profiler"),PN=Symbol.for("react.provider"),DN=Symbol.for("react.context"),ON=Symbol.for("react.forward_ref"),VN=Symbol.for("react.suspense"),LN=Symbol.for("react.memo"),MN=Symbol.for("react.lazy"),hy=Symbol.iterator;function FN(t){return t===null||typeof t!="object"?null:(t=hy&&t[hy]||t["@@iterator"],typeof t=="function"?t:null)}var _v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wv=Object.assign,bv={};function Xi(t,e,n){this.props=t,this.context=e,this.refs=bv,this.updater=n||_v}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ev(){}Ev.prototype=Xi.prototype;function np(t,e,n){this.props=t,this.context=e,this.refs=bv,this.updater=n||_v}var rp=np.prototype=new Ev;rp.constructor=np;wv(rp,Xi.prototype);rp.isPureReactComponent=!0;var fy=Array.isArray,Nv=Object.prototype.hasOwnProperty,sp={current:null},Tv={key:!0,ref:!0,__self:!0,__source:!0};function Iv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Nv.call(e,r)&&!Tv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:qa,type:t,key:i,ref:o,props:s,_owner:sp.current}}function UN(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function $N(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var py=/\/+/g;function jd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$N(""+t.key):e.toString(36)}function nc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case CN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jd(o,0):r,fy(s)?(n="",t!=null&&(n=t.replace(py,"$&/")+"/"),nc(s,e,n,"",function(d){return d})):s!=null&&(ip(s)&&(s=UN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(py,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fy(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+jd(i,c);o+=nc(i,e,n,u,s)}else if(u=FN(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+jd(i,c++),o+=nc(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function kl(t,e,n){if(t==null)return t;var r=[],s=0;return nc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function zN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},rc={transition:null},BN={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:rc,ReactCurrentOwner:sp};function kv(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:kl,forEach:function(t,e,n){kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kl(t,function(){e++}),e},toArray:function(t){return kl(t,function(e){return e})||[]},only:function(t){if(!ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Xi;ae.Fragment=AN;ae.Profiler=jN;ae.PureComponent=np;ae.StrictMode=RN;ae.Suspense=VN;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BN;ae.act=kv;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Nv.call(e,u)&&!Tv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:qa,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:DN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PN,_context:t},t.Consumer=t};ae.createElement=Iv;ae.createFactory=function(t){var e=Iv.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:ON,render:t}};ae.isValidElement=ip;ae.lazy=function(t){return{$$typeof:MN,_payload:{_status:-1,_result:t},_init:zN}};ae.memo=function(t,e){return{$$typeof:LN,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};ae.unstable_act=kv;ae.useCallback=function(t,e){return It.current.useCallback(t,e)};ae.useContext=function(t){return It.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ae.useEffect=function(t,e){return It.current.useEffect(t,e)};ae.useId=function(){return It.current.useId()};ae.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return It.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ae.useRef=function(t){return It.current.useRef(t)};ae.useState=function(t){return It.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return It.current.useTransition()};ae.version="18.3.1";vv.exports=ae;var j=vv.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN=j,qN=Symbol.for("react.element"),WN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,GN=HN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QN={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KN.call(e,r)&&!QN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qN,type:t,key:i,ref:o,props:s,_owner:GN.current}}vu.Fragment=WN;vu.jsx=Sv;vu.jsxs=Sv;xv.exports=vu;var a=xv.exports,Cv={exports:{}},Bt={},Av={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,V){var B=W.length;W.push(V);e:for(;0<B;){var Y=B-1>>>1,ee=W[Y];if(0<s(ee,V))W[Y]=V,W[B]=ee,B=Y;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var V=W[0],B=W.pop();if(B!==V){W[0]=B;e:for(var Y=0,ee=W.length,Z=ee>>>1;Y<Z;){var Ke=2*(Y+1)-1,rn=W[Ke],sn=Ke+1,qt=W[sn];if(0>s(rn,B))sn<ee&&0>s(qt,rn)?(W[Y]=qt,W[sn]=B,Y=sn):(W[Y]=rn,W[Ke]=B,Y=Ke);else if(sn<ee&&0>s(qt,B))W[Y]=qt,W[sn]=B,Y=sn;else break e}}return V}function s(W,V){var B=W.sortIndex-V.sortIndex;return B!==0?B:W.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,N=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(W){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=W)r(d),V.sortIndex=V.expirationTime,e(u,V);else break;V=n(d)}}function D(W){if(C=!1,I(W),!N)if(n(u)!==null)N=!0,ye(P);else{var V=n(d);V!==null&&se(D,V.startTime-W)}}function P(W,V){N=!1,C&&(C=!1,x(E),E=-1),w=!0;var B=g;try{for(I(V),m=n(u);m!==null&&(!(m.expirationTime>V)||W&&!S());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,g=m.priorityLevel;var ee=Y(m.expirationTime<=V);V=t.unstable_now(),typeof ee=="function"?m.callback=ee:m===n(u)&&r(u),I(V)}else r(u);m=n(u)}if(m!==null)var Z=!0;else{var Ke=n(d);Ke!==null&&se(D,Ke.startTime-V),Z=!1}return Z}finally{m=null,g=B,w=!1}}var L=!1,k=null,E=-1,b=5,_=-1;function S(){return!(t.unstable_now()-_<b)}function R(){if(k!==null){var W=t.unstable_now();_=W;var V=!0;try{V=k(!0,W)}finally{V?v():(L=!1,k=null)}}else L=!1}var v;if(typeof y=="function")v=function(){y(R)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,pe=z.port2;z.port1.onmessage=R,v=function(){pe.postMessage(null)}}else v=function(){A(R,0)};function ye(W){k=W,L||(L=!0,v())}function se(W,V){E=A(function(){W(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,ye(P))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var B=g;g=V;try{return W()}finally{g=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,V){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var B=g;g=W;try{return V()}finally{g=B}},t.unstable_scheduleCallback=function(W,V,B){var Y=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Y+B:Y):B=Y,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=B+ee,W={id:f++,callback:V,priorityLevel:W,startTime:B,expirationTime:ee,sortIndex:-1},B>Y?(W.sortIndex=B,e(d,W),n(u)===null&&W===n(d)&&(C?(x(E),E=-1):C=!0,se(D,B-Y))):(W.sortIndex=ee,e(u,W),N||w||(N=!0,ye(P))),W},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(W){var V=g;return function(){var B=g;g=V;try{return W.apply(this,arguments)}finally{g=B}}}})(Rv);Av.exports=Rv;var XN=Av.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=j,zt=XN;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jv=new Set,ua={};function Bs(t,e){Pi(t,e),Pi(t+"Capture",e)}function Pi(t,e){for(ua[t]=e,t=0;t<e.length;t++)jv.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=Object.prototype.hasOwnProperty,JN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,my={},gy={};function ZN(t){return Eh.call(gy,t)?!0:Eh.call(my,t)?!1:JN.test(t)?gy[t]=!0:(my[t]=!0,!1)}function eT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tT(t,e,n,r){if(e===null||typeof e>"u"||eT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var op=/[\-:]([a-z])/g;function ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(op,ap);at[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(op,ap);at[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(op,ap);at[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function lp(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tT(e,n,s,r)&&(n=null),r||s===null?ZN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=YN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),li=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),cp=Symbol.for("react.strict_mode"),Nh=Symbol.for("react.profiler"),Pv=Symbol.for("react.provider"),Dv=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),Ov=Symbol.for("react.offscreen"),yy=Symbol.iterator;function ko(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Pd;function Lo(t){if(Pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pd=e&&e[1]||""}return`
`+Pd+t}var Dd=!1;function Od(t,e){if(!t||Dd)return"";Dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Dd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lo(t):""}function nT(t){switch(t.tag){case 5:return Lo(t.type);case 16:return Lo("Lazy");case 13:return Lo("Suspense");case 19:return Lo("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function kh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case li:return"Portal";case Nh:return"Profiler";case cp:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dv:return(t.displayName||"Context")+".Consumer";case Pv:return(t._context.displayName||"Context")+".Provider";case up:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dp:return e=t.displayName||null,e!==null?e:kh(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return kh(t(e))}catch{}}return null}function rT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kh(e);case 8:return e===cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sT(t){var e=Vv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=sT(t))}function Lv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mv(t,e){e=e.checked,e!=null&&lp(t,"checked",e,!1)}function Ch(t,e){Mv(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ah(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ah(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ah(t,e,n){(e!=="number"||kc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mo=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Mo(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function Fv(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Uv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Uv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Al,$v=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iT=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){iT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function zv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function Bv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var oT=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ph(t,e){if(e){if(oT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Dh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=null;function hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vh=null,Ei=null,Ni=null;function by(t){if(t=Ga(t)){if(typeof Vh!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Nu(e),Vh(t.stateNode,t.type,e))}}function Hv(t){Ei?Ni?Ni.push(t):Ni=[t]:Ei=t}function qv(){if(Ei){var t=Ei,e=Ni;if(Ni=Ei=null,by(t),e)for(t=0;t<e.length;t++)by(e[t])}}function Wv(t,e){return t(e)}function Kv(){}var Vd=!1;function Gv(t,e,n){if(Vd)return t(e,n);Vd=!0;try{return Wv(t,e,n)}finally{Vd=!1,(Ei!==null||Ni!==null)&&(Kv(),qv())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Lh=!1;if(Xn)try{var So={};Object.defineProperty(So,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Lh=!1}function aT(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Go=!1,Sc=null,Cc=!1,Mh=null,lT={onError:function(t){Go=!0,Sc=t}};function cT(t,e,n,r,s,i,o,c,u){Go=!1,Sc=null,aT.apply(lT,arguments)}function uT(t,e,n,r,s,i,o,c,u){if(cT.apply(this,arguments),Go){if(Go){var d=Sc;Go=!1,Sc=null}else throw Error(H(198));Cc||(Cc=!0,Mh=d)}}function Hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Qv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ey(t){if(Hs(t)!==t)throw Error(H(188))}function dT(t){var e=t.alternate;if(!e){if(e=Hs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ey(s),t;if(i===r)return Ey(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Xv(t){return t=dT(t),t!==null?Yv(t):null}function Yv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yv(t);if(e!==null)return e;t=t.sibling}return null}var Jv=zt.unstable_scheduleCallback,Ny=zt.unstable_cancelCallback,hT=zt.unstable_shouldYield,fT=zt.unstable_requestPaint,$e=zt.unstable_now,pT=zt.unstable_getCurrentPriorityLevel,fp=zt.unstable_ImmediatePriority,Zv=zt.unstable_UserBlockingPriority,Ac=zt.unstable_NormalPriority,mT=zt.unstable_LowPriority,e_=zt.unstable_IdlePriority,_u=null,Tn=null;function gT(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(_u,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:vT,yT=Math.log,xT=Math.LN2;function vT(t){return t>>>=0,t===0?32:31-(yT(t)/xT|0)|0}var Rl=64,jl=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Fo(c):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),s=1<<n,r|=t[n],e&=~s;return r}function _T(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-hn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=_T(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function t_(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function Ld(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function bT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function n_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var r_,mp,s_,i_,o_,Uh=!1,Pl=[],Ar=null,Rr=null,jr=null,fa=new Map,pa=new Map,yr=[],ET="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(e.pointerId)}}function Co(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ga(e),e!==null&&mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function NT(t,e,n,r,s){switch(e){case"focusin":return Ar=Co(Ar,t,e,n,r,s),!0;case"dragenter":return Rr=Co(Rr,t,e,n,r,s),!0;case"mouseover":return jr=Co(jr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,Co(fa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pa.set(i,Co(pa.get(i)||null,t,e,n,r,s)),!0}return!1}function a_(t){var e=ws(t.target);if(e!==null){var n=Hs(e);if(n!==null){if(e=n.tag,e===13){if(e=Qv(n),e!==null){t.blockedOn=e,o_(t.priority,function(){s_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oh=r,n.target.dispatchEvent(r),Oh=null}else return e=Ga(n),e!==null&&mp(e),t.blockedOn=n,!1;e.shift()}return!0}function Iy(t,e,n){sc(t)&&n.delete(e)}function TT(){Uh=!1,Ar!==null&&sc(Ar)&&(Ar=null),Rr!==null&&sc(Rr)&&(Rr=null),jr!==null&&sc(jr)&&(jr=null),fa.forEach(Iy),pa.forEach(Iy)}function Ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Uh||(Uh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,TT)))}function ma(t){function e(s){return Ao(s,t)}if(0<Pl.length){Ao(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ar!==null&&Ao(Ar,t),Rr!==null&&Ao(Rr,t),jr!==null&&Ao(jr,t),fa.forEach(e),pa.forEach(e),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)a_(n),n.blockedOn===null&&yr.shift()}var Ti=lr.ReactCurrentBatchConfig,jc=!0;function IT(t,e,n,r){var s=we,i=Ti.transition;Ti.transition=null;try{we=1,gp(t,e,n,r)}finally{we=s,Ti.transition=i}}function kT(t,e,n,r){var s=we,i=Ti.transition;Ti.transition=null;try{we=4,gp(t,e,n,r)}finally{we=s,Ti.transition=i}}function gp(t,e,n,r){if(jc){var s=$h(t,e,n,r);if(s===null)Kd(t,e,r,Pc,n),Ty(t,r);else if(NT(s,t,e,n,r))r.stopPropagation();else if(Ty(t,r),e&4&&-1<ET.indexOf(t)){for(;s!==null;){var i=Ga(s);if(i!==null&&r_(i),i=$h(t,e,n,r),i===null&&Kd(t,e,r,Pc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Kd(t,e,r,null,n)}}var Pc=null;function $h(t,e,n,r){if(Pc=null,t=hp(r),t=ws(t),t!==null)if(e=Hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Qv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pc=t,null}function l_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pT()){case fp:return 1;case Zv:return 4;case Ac:case mT:return 16;case e_:return 536870912;default:return 16}default:return 16}}var Ir=null,yp=null,ic=null;function c_(){if(ic)return ic;var t,e=yp,n=e.length,r,s="value"in Ir?Ir.value:Ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ic=s.slice(t,1<r?1-r:void 0)}function oc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dl(){return!0}function ky(){return!1}function Ht(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dl:ky,this.isPropagationStopped=ky,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),e}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xp=Ht(Yi),Ka=De({},Yi,{view:0,detail:0}),ST=Ht(Ka),Md,Fd,Ro,wu=De({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Md=t.screenX-Ro.screenX,Fd=t.screenY-Ro.screenY):Fd=Md=0,Ro=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:Fd}}),Sy=Ht(wu),CT=De({},wu,{dataTransfer:0}),AT=Ht(CT),RT=De({},Ka,{relatedTarget:0}),Ud=Ht(RT),jT=De({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),PT=Ht(jT),DT=De({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),OT=Ht(DT),VT=De({},Yi,{data:0}),Cy=Ht(VT),LT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=FT[t])?!!e[t]:!1}function vp(){return UT}var $T=De({},Ka,{key:function(t){if(t.key){var e=LT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vp,charCode:function(t){return t.type==="keypress"?oc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zT=Ht($T),BT=De({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ay=Ht(BT),HT=De({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vp}),qT=Ht(HT),WT=De({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),KT=Ht(WT),GT=De({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QT=Ht(GT),XT=[9,13,27,32],_p=Xn&&"CompositionEvent"in window,Qo=null;Xn&&"documentMode"in document&&(Qo=document.documentMode);var YT=Xn&&"TextEvent"in window&&!Qo,u_=Xn&&(!_p||Qo&&8<Qo&&11>=Qo),Ry=" ",jy=!1;function d_(t,e){switch(t){case"keyup":return XT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function JT(t,e){switch(t){case"compositionend":return h_(e);case"keypress":return e.which!==32?null:(jy=!0,Ry);case"textInput":return t=e.data,t===Ry&&jy?null:t;default:return null}}function ZT(t,e){if(ui)return t==="compositionend"||!_p&&d_(t,e)?(t=c_(),ic=yp=Ir=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return u_&&e.locale!=="ko"?null:e.data;default:return null}}var eI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eI[t.type]:e==="textarea"}function f_(t,e,n,r){Hv(r),e=Dc(e,"onChange"),0<e.length&&(n=new xp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,ga=null;function tI(t){N_(t,0)}function bu(t){var e=fi(t);if(Lv(e))return t}function nI(t,e){if(t==="change")return e}var p_=!1;if(Xn){var $d;if(Xn){var zd="oninput"in document;if(!zd){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),zd=typeof Dy.oninput=="function"}$d=zd}else $d=!1;p_=$d&&(!document.documentMode||9<document.documentMode)}function Oy(){Xo&&(Xo.detachEvent("onpropertychange",m_),ga=Xo=null)}function m_(t){if(t.propertyName==="value"&&bu(ga)){var e=[];f_(e,ga,t,hp(t)),Gv(tI,e)}}function rI(t,e,n){t==="focusin"?(Oy(),Xo=e,ga=n,Xo.attachEvent("onpropertychange",m_)):t==="focusout"&&Oy()}function sI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bu(ga)}function iI(t,e){if(t==="click")return bu(e)}function oI(t,e){if(t==="input"||t==="change")return bu(e)}function aI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:aI;function ya(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Eh.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function Vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ly(t,e){var n=Vy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vy(n)}}function g_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?g_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y_(){for(var t=window,e=kc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kc(t.document)}return e}function wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lI(t){var e=y_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&g_(n.ownerDocument.documentElement,n)){if(r!==null&&wp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ly(n,i);var o=Ly(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cI=Xn&&"documentMode"in document&&11>=document.documentMode,di=null,zh=null,Yo=null,Bh=!1;function My(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bh||di==null||di!==kc(r)||(r=di,"selectionStart"in r&&wp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yo&&ya(Yo,r)||(Yo=r,r=Dc(zh,"onSelect"),0<r.length&&(e=new xp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=di)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Bd={},x_={};Xn&&(x_=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function Eu(t){if(Bd[t])return Bd[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in x_)return Bd[t]=e[n];return t}var v_=Eu("animationend"),__=Eu("animationiteration"),w_=Eu("animationstart"),b_=Eu("transitionend"),E_=new Map,Fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){E_.set(t,e),Bs(e,[t])}for(var Hd=0;Hd<Fy.length;Hd++){var qd=Fy[Hd],uI=qd.toLowerCase(),dI=qd[0].toUpperCase()+qd.slice(1);ts(uI,"on"+dI)}ts(v_,"onAnimationEnd");ts(__,"onAnimationIteration");ts(w_,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(b_,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uT(r,e,void 0,t),t.currentTarget=null}function N_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Uy(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Uy(s,c,d),i=u}}}if(Cc)throw t=Mh,Cc=!1,Mh=null,t}function ke(t,e){var n=e[Gh];n===void 0&&(n=e[Gh]=new Set);var r=t+"__bubble";n.has(r)||(T_(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),T_(n,t,r,e)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[Vl]){t[Vl]=!0,jv.forEach(function(n){n!=="selectionchange"&&(hI.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vl]||(e[Vl]=!0,Wd("selectionchange",!1,e))}}function T_(t,e,n,r){switch(l_(e)){case 1:var s=IT;break;case 4:s=kT;break;default:s=gp}n=s.bind(null,e,n,t),s=void 0,!Lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Kd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=ws(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Gv(function(){var d=i,f=hp(n),m=[];e:{var g=E_.get(t);if(g!==void 0){var w=xp,N=t;switch(t){case"keypress":if(oc(n)===0)break e;case"keydown":case"keyup":w=zT;break;case"focusin":N="focus",w=Ud;break;case"focusout":N="blur",w=Ud;break;case"beforeblur":case"afterblur":w=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=AT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=qT;break;case v_:case __:case w_:w=PT;break;case b_:w=KT;break;case"scroll":w=ST;break;case"wheel":w=QT;break;case"copy":case"cut":case"paste":w=OT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ay}var C=(e&4)!==0,A=!C&&t==="scroll",x=C?g!==null?g+"Capture":null:g;C=[];for(var y=d,I;y!==null;){I=y;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,x!==null&&(D=ha(y,x),D!=null&&C.push(va(y,D,I)))),A)break;y=y.return}0<C.length&&(g=new w(g,N,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Oh&&(N=n.relatedTarget||n.fromElement)&&(ws(N)||N[Yn]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(N=n.relatedTarget||n.toElement,w=d,N=N?ws(N):null,N!==null&&(A=Hs(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=d),w!==N)){if(C=Sy,D="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=Ay,D="onPointerLeave",x="onPointerEnter",y="pointer"),A=w==null?g:fi(w),I=N==null?g:fi(N),g=new C(D,y+"leave",w,n,f),g.target=A,g.relatedTarget=I,D=null,ws(f)===d&&(C=new C(x,y+"enter",N,n,f),C.target=I,C.relatedTarget=A,D=C),A=D,w&&N)t:{for(C=w,x=N,y=0,I=C;I;I=ni(I))y++;for(I=0,D=x;D;D=ni(D))I++;for(;0<y-I;)C=ni(C),y--;for(;0<I-y;)x=ni(x),I--;for(;y--;){if(C===x||x!==null&&C===x.alternate)break t;C=ni(C),x=ni(x)}C=null}else C=null;w!==null&&$y(m,g,w,C,!1),N!==null&&A!==null&&$y(m,A,N,C,!0)}}e:{if(g=d?fi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var P=nI;else if(Py(g))if(p_)P=oI;else{P=sI;var L=rI}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(P=iI);if(P&&(P=P(t,d))){f_(m,P,n,f);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&Ah(g,"number",g.value)}switch(L=d?fi(d):window,t){case"focusin":(Py(L)||L.contentEditable==="true")&&(di=L,zh=d,Yo=null);break;case"focusout":Yo=zh=di=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,My(m,n,f);break;case"selectionchange":if(cI)break;case"keydown":case"keyup":My(m,n,f)}var k;if(_p)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ui?d_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(u_&&n.locale!=="ko"&&(ui||E!=="onCompositionStart"?E==="onCompositionEnd"&&ui&&(k=c_()):(Ir=f,yp="value"in Ir?Ir.value:Ir.textContent,ui=!0)),L=Dc(d,E),0<L.length&&(E=new Cy(E,t,null,n,f),m.push({event:E,listeners:L}),k?E.data=k:(k=h_(n),k!==null&&(E.data=k)))),(k=YT?JT(t,n):ZT(t,n))&&(d=Dc(d,"onBeforeInput"),0<d.length&&(f=new Cy("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=k))}N_(m,e)})}function va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,n),i!=null&&r.unshift(va(t,i,s)),i=ha(t,e),i!=null&&r.push(va(t,i,s))),t=t.return}return r}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $y(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=ha(n,i),u!=null&&o.unshift(va(n,u,c))):s||(u=ha(n,i),u!=null&&o.push(va(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fI=/\r\n?/g,pI=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(fI,`
`).replace(pI,"")}function Ll(t,e,n){if(e=zy(e),zy(t)!==e&&n)throw Error(H(425))}function Oc(){}var Hh=null,qh=null;function Wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kh=typeof setTimeout=="function"?setTimeout:void 0,mI=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,gI=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(yI)}:Kh;function yI(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ma(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ma(e)}function Pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),En="__reactFiber$"+Ji,_a="__reactProps$"+Ji,Yn="__reactContainer$"+Ji,Gh="__reactEvents$"+Ji,xI="__reactListeners$"+Ji,vI="__reactHandles$"+Ji;function ws(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Hy(t);t!==null;){if(n=t[En])return n;t=Hy(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[En]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Nu(t){return t[_a]||null}var Qh=[],pi=-1;function ns(t){return{current:t}}function Se(t){0>pi||(t.current=Qh[pi],Qh[pi]=null,pi--)}function Te(t,e){pi++,Qh[pi]=t.current,t.current=e}var Wr={},xt=ns(Wr),Pt=ns(!1),Ps=Wr;function Di(t,e){var n=t.type.contextTypes;if(!n)return Wr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function Vc(){Se(Pt),Se(xt)}function qy(t,e,n){if(xt.current!==Wr)throw Error(H(168));Te(xt,e),Te(Pt,n)}function I_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,rT(t)||"Unknown",s));return De({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wr,Ps=xt.current,Te(xt,t),Te(Pt,Pt.current),!0}function Wy(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=I_(t,e,Ps),r.__reactInternalMemoizedMergedChildContext=t,Se(Pt),Se(xt),Te(xt,t)):Se(Pt),Te(Pt,n)}var zn=null,Tu=!1,Qd=!1;function k_(t){zn===null?zn=[t]:zn.push(t)}function _I(t){Tu=!0,k_(t)}function rs(){if(!Qd&&zn!==null){Qd=!0;var t=0,e=we;try{var n=zn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,Tu=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Jv(fp,rs),s}finally{we=e,Qd=!1}}return null}var mi=[],gi=0,Mc=null,Fc=0,Wt=[],Kt=0,Ds=null,Bn=1,Hn="";function ys(t,e){mi[gi++]=Fc,mi[gi++]=Mc,Mc=t,Fc=e}function S_(t,e,n){Wt[Kt++]=Bn,Wt[Kt++]=Hn,Wt[Kt++]=Ds,Ds=t;var r=Bn;t=Hn;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var i=32-hn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-hn(e)+s|n<<s|r,Hn=i+t}else Bn=1<<i|n<<s|r,Hn=t}function bp(t){t.return!==null&&(ys(t,1),S_(t,1,0))}function Ep(t){for(;t===Mc;)Mc=mi[--gi],mi[gi]=null,Fc=mi[--gi],mi[gi]=null;for(;t===Ds;)Ds=Wt[--Kt],Wt[Kt]=null,Hn=Wt[--Kt],Wt[Kt]=null,Bn=Wt[--Kt],Wt[Kt]=null}var $t=null,Mt=null,Ce=!1,un=null;function C_(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ky(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Mt=Pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:Bn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Mt=null,!0):!1;default:return!1}}function Xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yh(t){if(Ce){var e=Mt;if(e){var n=e;if(!Ky(t,e)){if(Xh(t))throw Error(H(418));e=Pr(n.nextSibling);var r=$t;e&&Ky(t,e)?C_(r,n):(t.flags=t.flags&-4097|2,Ce=!1,$t=t)}}else{if(Xh(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ce=!1,$t=t}}}function Gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Ml(t){if(t!==$t)return!1;if(!Ce)return Gy(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wh(t.type,t.memoizedProps)),e&&(e=Mt)){if(Xh(t))throw A_(),Error(H(418));for(;e;)C_(t,e),e=Pr(e.nextSibling)}if(Gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=$t?Pr(t.stateNode.nextSibling):null;return!0}function A_(){for(var t=Mt;t;)t=Pr(t.nextSibling)}function Oi(){Mt=$t=null,Ce=!1}function Np(t){un===null?un=[t]:un.push(t)}var wI=lr.ReactCurrentBatchConfig;function jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Fl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qy(t){var e=t._init;return e(t._payload)}function R_(t){function e(x,y){if(t){var I=x.deletions;I===null?(x.deletions=[y],x.flags|=16):I.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Lr(x,y),x.index=0,x.sibling=null,x}function i(x,y,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<y?(x.flags|=2,y):I):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,y,I,D){return y===null||y.tag!==6?(y=nh(I,x.mode,D),y.return=x,y):(y=s(y,I),y.return=x,y)}function u(x,y,I,D){var P=I.type;return P===ci?f(x,y,I.props.children,D,I.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===mr&&Qy(P)===y.type)?(D=s(y,I.props),D.ref=jo(x,y,I),D.return=x,D):(D=fc(I.type,I.key,I.props,null,x.mode,D),D.ref=jo(x,y,I),D.return=x,D)}function d(x,y,I,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==I.containerInfo||y.stateNode.implementation!==I.implementation?(y=rh(I,x.mode,D),y.return=x,y):(y=s(y,I.children||[]),y.return=x,y)}function f(x,y,I,D,P){return y===null||y.tag!==7?(y=ks(I,x.mode,D,P),y.return=x,y):(y=s(y,I),y.return=x,y)}function m(x,y,I){if(typeof y=="string"&&y!==""||typeof y=="number")return y=nh(""+y,x.mode,I),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sl:return I=fc(y.type,y.key,y.props,null,x.mode,I),I.ref=jo(x,null,y),I.return=x,I;case li:return y=rh(y,x.mode,I),y.return=x,y;case mr:var D=y._init;return m(x,D(y._payload),I)}if(Mo(y)||ko(y))return y=ks(y,x.mode,I,null),y.return=x,y;Fl(x,y)}return null}function g(x,y,I,D){var P=y!==null?y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return P!==null?null:c(x,y,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Sl:return I.key===P?u(x,y,I,D):null;case li:return I.key===P?d(x,y,I,D):null;case mr:return P=I._init,g(x,y,P(I._payload),D)}if(Mo(I)||ko(I))return P!==null?null:f(x,y,I,D,null);Fl(x,I)}return null}function w(x,y,I,D,P){if(typeof D=="string"&&D!==""||typeof D=="number")return x=x.get(I)||null,c(y,x,""+D,P);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Sl:return x=x.get(D.key===null?I:D.key)||null,u(y,x,D,P);case li:return x=x.get(D.key===null?I:D.key)||null,d(y,x,D,P);case mr:var L=D._init;return w(x,y,I,L(D._payload),P)}if(Mo(D)||ko(D))return x=x.get(I)||null,f(y,x,D,P,null);Fl(y,D)}return null}function N(x,y,I,D){for(var P=null,L=null,k=y,E=y=0,b=null;k!==null&&E<I.length;E++){k.index>E?(b=k,k=null):b=k.sibling;var _=g(x,k,I[E],D);if(_===null){k===null&&(k=b);break}t&&k&&_.alternate===null&&e(x,k),y=i(_,y,E),L===null?P=_:L.sibling=_,L=_,k=b}if(E===I.length)return n(x,k),Ce&&ys(x,E),P;if(k===null){for(;E<I.length;E++)k=m(x,I[E],D),k!==null&&(y=i(k,y,E),L===null?P=k:L.sibling=k,L=k);return Ce&&ys(x,E),P}for(k=r(x,k);E<I.length;E++)b=w(k,x,E,I[E],D),b!==null&&(t&&b.alternate!==null&&k.delete(b.key===null?E:b.key),y=i(b,y,E),L===null?P=b:L.sibling=b,L=b);return t&&k.forEach(function(S){return e(x,S)}),Ce&&ys(x,E),P}function C(x,y,I,D){var P=ko(I);if(typeof P!="function")throw Error(H(150));if(I=P.call(I),I==null)throw Error(H(151));for(var L=P=null,k=y,E=y=0,b=null,_=I.next();k!==null&&!_.done;E++,_=I.next()){k.index>E?(b=k,k=null):b=k.sibling;var S=g(x,k,_.value,D);if(S===null){k===null&&(k=b);break}t&&k&&S.alternate===null&&e(x,k),y=i(S,y,E),L===null?P=S:L.sibling=S,L=S,k=b}if(_.done)return n(x,k),Ce&&ys(x,E),P;if(k===null){for(;!_.done;E++,_=I.next())_=m(x,_.value,D),_!==null&&(y=i(_,y,E),L===null?P=_:L.sibling=_,L=_);return Ce&&ys(x,E),P}for(k=r(x,k);!_.done;E++,_=I.next())_=w(k,x,E,_.value,D),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?E:_.key),y=i(_,y,E),L===null?P=_:L.sibling=_,L=_);return t&&k.forEach(function(R){return e(x,R)}),Ce&&ys(x,E),P}function A(x,y,I,D){if(typeof I=="object"&&I!==null&&I.type===ci&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Sl:e:{for(var P=I.key,L=y;L!==null;){if(L.key===P){if(P=I.type,P===ci){if(L.tag===7){n(x,L.sibling),y=s(L,I.props.children),y.return=x,x=y;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===mr&&Qy(P)===L.type){n(x,L.sibling),y=s(L,I.props),y.ref=jo(x,L,I),y.return=x,x=y;break e}n(x,L);break}else e(x,L);L=L.sibling}I.type===ci?(y=ks(I.props.children,x.mode,D,I.key),y.return=x,x=y):(D=fc(I.type,I.key,I.props,null,x.mode,D),D.ref=jo(x,y,I),D.return=x,x=D)}return o(x);case li:e:{for(L=I.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===I.containerInfo&&y.stateNode.implementation===I.implementation){n(x,y.sibling),y=s(y,I.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=rh(I,x.mode,D),y.return=x,x=y}return o(x);case mr:return L=I._init,A(x,y,L(I._payload),D)}if(Mo(I))return N(x,y,I,D);if(ko(I))return C(x,y,I,D);Fl(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,I),y.return=x,x=y):(n(x,y),y=nh(I,x.mode,D),y.return=x,x=y),o(x)):n(x,y)}return A}var Vi=R_(!0),j_=R_(!1),Uc=ns(null),$c=null,yi=null,Tp=null;function Ip(){Tp=yi=$c=null}function kp(t){var e=Uc.current;Se(Uc),t._currentValue=e}function Jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ii(t,e){$c=t,Tp=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(Tp!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if($c===null)throw Error(H(308));yi=t,$c.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var bs=null;function Sp(t){bs===null?bs=[t]:bs.push(t)}function P_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gr=!1;function Cp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jn(t,n)}return s=r.interleaved,s===null?(e.next=e,Sp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jn(t,n)}function ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}function Xy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,r){var s=t.updateQueue;gr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,C=c;switch(g=e,w=n,C.tag){case 1:if(N=C.payload,typeof N=="function"){m=N.call(w,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,g=typeof N=="function"?N.call(w,m,g):N,g==null)break e;m=De({},m,g);break e;case 2:gr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=m}}function Yy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Qa={},In=ns(Qa),wa=ns(Qa),ba=ns(Qa);function Es(t){if(t===Qa)throw Error(H(174));return t}function Ap(t,e){switch(Te(ba,e),Te(wa,t),Te(In,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}Se(In),Te(In,e)}function Li(){Se(In),Se(wa),Se(ba)}function O_(t){Es(ba.current);var e=Es(In.current),n=jh(e,t.type);e!==n&&(Te(wa,t),Te(In,n))}function Rp(t){wa.current===t&&(Se(In),Se(wa))}var je=ns(0);function Bc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xd=[];function jp(){for(var t=0;t<Xd.length;t++)Xd[t]._workInProgressVersionPrimary=null;Xd.length=0}var lc=lr.ReactCurrentDispatcher,Yd=lr.ReactCurrentBatchConfig,Os=0,Pe=null,Qe=null,et=null,Hc=!1,Jo=!1,Ea=0,bI=0;function ht(){throw Error(H(321))}function Pp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Dp(t,e,n,r,s,i){if(Os=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lc.current=t===null||t.memoizedState===null?II:kI,t=n(r,s),Jo){i=0;do{if(Jo=!1,Ea=0,25<=i)throw Error(H(301));i+=1,et=Qe=null,e.updateQueue=null,lc.current=SI,t=n(r,s)}while(Jo)}if(lc.current=qc,e=Qe!==null&&Qe.next!==null,Os=0,et=Qe=Pe=null,Hc=!1,e)throw Error(H(300));return t}function Op(){var t=Ea!==0;return Ea=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Pe.memoizedState=et=t:et=et.next=t,et}function nn(){if(Qe===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=et===null?Pe.memoizedState:et.next;if(e!==null)et=e,Qe=t;else{if(t===null)throw Error(H(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},et===null?Pe.memoizedState=et=t:et=et.next=t}return et}function Na(t,e){return typeof e=="function"?e(t):e}function Jd(t){var e=nn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Os&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Pe.lanes|=f,Vs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,mn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,Vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zd(t){var e=nn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mn(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function V_(){}function L_(t,e){var n=Pe,r=nn(),s=e(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,Vp(U_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Ta(9,F_.bind(null,n,r,s,e),void 0,null),tt===null)throw Error(H(349));Os&30||M_(n,e,s)}return s}function M_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function F_(t,e,n,r){e.value=n,e.getSnapshot=r,$_(e)&&z_(t)}function U_(t,e,n){return n(function(){$_(e)&&z_(t)})}function $_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function z_(t){var e=Jn(t,1);e!==null&&fn(e,t,1,-1)}function Jy(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=TI.bind(null,Pe,t),[e.memoizedState,t]}function Ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function B_(){return nn().memoizedState}function cc(t,e,n,r){var s=wn();Pe.flags|=t,s.memoizedState=Ta(1|e,n,void 0,r===void 0?null:r)}function Iu(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,r!==null&&Pp(r,o.deps)){s.memoizedState=Ta(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Ta(1|e,n,i,r)}function Zy(t,e){return cc(8390656,8,t,e)}function Vp(t,e){return Iu(2048,8,t,e)}function H_(t,e){return Iu(4,2,t,e)}function q_(t,e){return Iu(4,4,t,e)}function W_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K_(t,e,n){return n=n!=null?n.concat([t]):null,Iu(4,4,W_.bind(null,e,t),n)}function Lp(){}function G_(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Q_(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function X_(t,e,n){return Os&21?(mn(n,e)||(n=t_(),Pe.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function EI(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Yd.transition;Yd.transition={};try{t(!1),e()}finally{we=n,Yd.transition=r}}function Y_(){return nn().memoizedState}function NI(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J_(t))Z_(e,n);else if(n=P_(t,e,n,r),n!==null){var s=Tt();fn(n,t,r,s),ew(n,e,r)}}function TI(t,e,n){var r=Vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J_(t))Z_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,mn(c,o)){var u=e.interleaved;u===null?(s.next=s,Sp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=P_(t,e,s,r),n!==null&&(s=Tt(),fn(n,t,r,s),ew(n,e,r))}}function J_(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function Z_(t,e){Jo=Hc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ew(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}var qc={readContext:tn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},II={readContext:tn,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:Zy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cc(4194308,4,W_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return cc(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NI.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:Jy,useDebugValue:Lp,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=Jy(!1),e=t[0];return t=EI.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=wn();if(Ce){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),tt===null)throw Error(H(349));Os&30||M_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zy(U_.bind(null,r,i,t),[t]),r.flags|=2048,Ta(9,F_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wn(),e=tt.identifierPrefix;if(Ce){var n=Hn,r=Bn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kI={readContext:tn,useCallback:G_,useContext:tn,useEffect:Vp,useImperativeHandle:K_,useInsertionEffect:H_,useLayoutEffect:q_,useMemo:Q_,useReducer:Jd,useRef:B_,useState:function(){return Jd(Na)},useDebugValue:Lp,useDeferredValue:function(t){var e=nn();return X_(e,Qe.memoizedState,t)},useTransition:function(){var t=Jd(Na)[0],e=nn().memoizedState;return[t,e]},useMutableSource:V_,useSyncExternalStore:L_,useId:Y_,unstable_isNewReconciler:!1},SI={readContext:tn,useCallback:G_,useContext:tn,useEffect:Vp,useImperativeHandle:K_,useInsertionEffect:H_,useLayoutEffect:q_,useMemo:Q_,useReducer:Zd,useRef:B_,useState:function(){return Zd(Na)},useDebugValue:Lp,useDeferredValue:function(t){var e=nn();return Qe===null?e.memoizedState=t:X_(e,Qe.memoizedState,t)},useTransition:function(){var t=Zd(Na)[0],e=nn().memoizedState;return[t,e]},useMutableSource:V_,useSyncExternalStore:L_,useId:Y_,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ku={isMounted:function(t){return(t=t._reactInternals)?Hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Vr(t),i=Gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Dr(t,i,s),e!==null&&(fn(e,t,s,r),ac(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Vr(t),i=Gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Dr(t,i,s),e!==null&&(fn(e,t,s,r),ac(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Vr(t),s=Gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Dr(t,s,r),e!==null&&(fn(e,t,r,n),ac(e,t,r))}};function e0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ya(n,r)||!ya(s,i):!0}function tw(t,e,n){var r=!1,s=Wr,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Dt(e)?Ps:xt.current,r=e.contextTypes,i=(r=r!=null)?Di(t,s):Wr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function t0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ku.enqueueReplaceState(e,e.state,null)}function ef(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Dt(e)?Ps:xt.current,s.context=Di(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Zh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ku.enqueueReplaceState(s,s.state,null),zc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Mi(t,e){try{var n="",r=e;do n+=nT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CI=typeof WeakMap=="function"?WeakMap:Map;function nw(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kc||(Kc=!0,hf=r),tf(t,e)},n}function rw(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){tf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){tf(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function n0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=BI.bind(null,t,e,n),e.then(t,t))}function r0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function s0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,Dr(n,e,1))),n.lanes|=1),t)}var AI=lr.ReactCurrentOwner,Rt=!1;function Et(t,e,n,r){e.child=t===null?j_(e,null,n,r):Vi(e,t.child,n,r)}function i0(t,e,n,r,s){n=n.render;var i=e.ref;return Ii(e,s),r=Dp(t,e,n,r,i,s),n=Op(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(Ce&&n&&bp(e),e.flags|=1,Et(t,e,r,s),e.child)}function o0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!qp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,sw(t,e,i,r,s)):(t=fc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(o,r)&&t.ref===e.ref)return Zn(t,e,s)}return e.flags|=1,t=Lr(i,r),t.ref=e.ref,t.return=e,e.child=t}function sw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ya(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Zn(t,e,s)}return nf(t,e,n,r,s)}function iw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(vi,Lt),Lt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(vi,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(vi,Lt),Lt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(vi,Lt),Lt|=r;return Et(t,e,s,n),e.child}function ow(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nf(t,e,n,r,s){var i=Dt(n)?Ps:xt.current;return i=Di(e,i),Ii(e,s),n=Dp(t,e,n,r,i,s),r=Op(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zn(t,e,s)):(Ce&&r&&bp(e),e.flags|=1,Et(t,e,n,s),e.child)}function a0(t,e,n,r,s){if(Dt(n)){var i=!0;Lc(e)}else i=!1;if(Ii(e,s),e.stateNode===null)uc(t,e),tw(e,n,r),ef(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=tn(d):(d=Dt(n)?Ps:xt.current,d=Di(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&t0(e,o,r,d),gr=!1;var g=e.memoizedState;o.state=g,zc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Pt.current||gr?(typeof f=="function"&&(Zh(e,n,f,r),u=e.memoizedState),(c=gr||e0(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,D_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:ln(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=tn(u):(u=Dt(n)?Ps:xt.current,u=Di(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&t0(e,o,r,u),gr=!1,g=e.memoizedState,o.state=g,zc(e,r,o,s);var N=e.memoizedState;c!==m||g!==N||Pt.current||gr?(typeof w=="function"&&(Zh(e,n,w,r),N=e.memoizedState),(d=gr||e0(e,n,d,r,g,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return rf(t,e,n,r,i,s)}function rf(t,e,n,r,s,i){ow(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wy(e,n,!1),Zn(t,e,i);r=e.stateNode,AI.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vi(e,t.child,null,i),e.child=Vi(e,null,c,i)):Et(t,e,c,i),e.memoizedState=r.state,s&&Wy(e,n,!0),e.child}function aw(t){var e=t.stateNode;e.pendingContext?qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qy(t,e.context,!1),Ap(t,e.containerInfo)}function l0(t,e,n,r,s){return Oi(),Np(s),e.flags|=256,Et(t,e,n,r),e.child}var sf={dehydrated:null,treeContext:null,retryLane:0};function of(t){return{baseLanes:t,cachePool:null,transitions:null}}function lw(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(je,s&1),t===null)return Yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Au(o,r,0,null),t=ks(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=of(n),e.memoizedState=sf,t):Mp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return RI(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Lr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Lr(c,i):(i=ks(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?of(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=sf,r}return i=t.child,t=i.sibling,r=Lr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mp(t,e){return e=Au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&Np(r),Vi(e,t.child,null,n),t=Mp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=eh(Error(H(422))),Ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Au({mode:"visible",children:r.children},s,0,null),i=ks(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vi(e,t.child,null,o),e.child.memoizedState=of(o),e.memoizedState=sf,i);if(!(e.mode&1))return Ul(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(H(419)),r=eh(i,r,void 0),Ul(t,e,o,r)}if(c=(o&t.childLanes)!==0,Rt||c){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jn(t,s),fn(r,t,s,-1))}return Hp(),r=eh(Error(H(421))),Ul(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=HI.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mt=Pr(s.nextSibling),$t=e,Ce=!0,un=null,t!==null&&(Wt[Kt++]=Bn,Wt[Kt++]=Hn,Wt[Kt++]=Ds,Bn=t.id,Hn=t.overflow,Ds=e),e=Mp(e,r.children),e.flags|=4096,e)}function c0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jh(t.return,e,n)}function th(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&c0(t,n,e);else if(t.tag===19)c0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Bc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),th(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Bc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}th(e,!0,n,null,i);break;case"together":th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jI(t,e,n){switch(e.tag){case 3:aw(e),Oi();break;case 5:O_(e);break;case 1:Dt(e.type)&&Lc(e);break;case 4:Ap(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Uc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?lw(t,e,n):(Te(je,je.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);Te(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,iw(t,e,n)}return Zn(t,e,n)}var uw,af,dw,hw;uw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};af=function(){};dw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Es(In.current);var i=null;switch(n){case"input":s=Sh(t,s),r=Sh(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Rh(t,s),r=Rh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Oc)}Ph(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ua.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ua.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ke("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};hw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Po(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PI(t,e,n){var r=e.pendingProps;switch(Ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Dt(e.type)&&Vc(),ft(e),null;case 3:return r=e.stateNode,Li(),Se(Pt),Se(xt),jp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(mf(un),un=null))),af(t,e),ft(e),null;case 5:Rp(e);var s=Es(ba.current);if(n=e.type,t!==null&&e.stateNode!=null)dw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return ft(e),null}if(t=Es(In.current),Ml(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[En]=e,r[_a]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Uo.length;s++)ke(Uo[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":xy(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":_y(r,i),ke("invalid",r)}Ph(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,c,t),s=["children",""+c]):ua.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":Cl(r),vy(r,i,!0);break;case"textarea":Cl(r),wy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Oc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Uv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[En]=e,t[_a]=r,uw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dh(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Uo.length;s++)ke(Uo[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":xy(t,r),s=Sh(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),ke("invalid",t);break;case"textarea":_y(t,r),s=Rh(t,r),ke("invalid",t);break;default:s=r}Ph(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Bv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$v(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&da(t,u):typeof u=="number"&&da(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ua.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ke("scroll",t):u!=null&&lp(t,i,u,o))}switch(n){case"input":Cl(t),vy(t,r,!1);break;case"textarea":Cl(t),wy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Oc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)hw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Es(ba.current),Es(In.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return ft(e),null;case 13:if(Se(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Mt!==null&&e.mode&1&&!(e.flags&128))A_(),Oi(),e.flags|=98560,i=!1;else if(i=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[En]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else un!==null&&(mf(un),un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Xe===0&&(Xe=3):Hp())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Li(),af(t,e),t===null&&xa(e.stateNode.containerInfo),ft(e),null;case 10:return kp(e.type._context),ft(e),null;case 17:return Dt(e.type)&&Vc(),ft(e),null;case 19:if(Se(je),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Po(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bc(t),o!==null){for(e.flags|=128,Po(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>Fi&&(e.flags|=128,r=!0,Po(i,!1),e.lanes=4194304)}else{if(!r)if(t=Bc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Po(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return ft(e),null}else 2*$e()-i.renderingStartTime>Fi&&n!==1073741824&&(e.flags|=128,r=!0,Po(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=je.current,Te(je,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Bp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function DI(t,e){switch(Ep(e),e.tag){case 1:return Dt(e.type)&&Vc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Se(Pt),Se(xt),jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rp(e),null;case 13:if(Se(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(je),null;case 4:return Li(),null;case 10:return kp(e.type._context),null;case 22:case 23:return Bp(),null;case 24:return null;default:return null}}var $l=!1,gt=!1,OI=typeof WeakSet=="function"?WeakSet:Set,X=null;function xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function lf(t,e,n){try{n()}catch(r){Le(t,e,r)}}var u0=!1;function VI(t,e){if(Hh=jc,t=y_(),wp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:t,selectionRange:n},jc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,A=N.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?C:ln(e.type,C),A);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(D){Le(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return N=u0,u0=!1,N}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&lf(e,n,i)}s=s.next}while(s!==r)}}function Su(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fw(t){var e=t.alternate;e!==null&&(t.alternate=null,fw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[_a],delete e[Gh],delete e[xI],delete e[vI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pw(t){return t.tag===5||t.tag===3||t.tag===4}function d0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Oc));else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}var rt=null,cn=!1;function hr(t,e,n){for(n=n.child;n!==null;)mw(t,e,n),n=n.sibling}function mw(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(_u,n)}catch{}switch(n.tag){case 5:gt||xi(n,e);case 6:var r=rt,s=cn;rt=null,hr(t,e,n),rt=r,cn=s,rt!==null&&(cn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(cn?(t=rt,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),ma(t)):Gd(rt,n.stateNode));break;case 4:r=rt,s=cn,rt=n.stateNode.containerInfo,cn=!0,hr(t,e,n),rt=r,cn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&lf(n,e,o),s=s.next}while(s!==r)}hr(t,e,n);break;case 1:if(!gt&&(xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Le(n,e,c)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,hr(t,e,n),gt=r):hr(t,e,n);break;default:hr(t,e,n)}}function h0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OI),e.forEach(function(r){var s=qI.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:rt=c.stateNode,cn=!1;break e;case 3:rt=c.stateNode.containerInfo,cn=!0;break e;case 4:rt=c.stateNode.containerInfo,cn=!0;break e}c=c.return}if(rt===null)throw Error(H(160));mw(i,o,s),rt=null,cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gw(e,t),e=e.sibling}function gw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),_n(t),r&4){try{Zo(3,t,t.return),Su(3,t)}catch(C){Le(t,t.return,C)}try{Zo(5,t,t.return)}catch(C){Le(t,t.return,C)}}break;case 1:an(e,t),_n(t),r&512&&n!==null&&xi(n,n.return);break;case 5:if(an(e,t),_n(t),r&512&&n!==null&&xi(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(C){Le(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Mv(s,i),Dh(c,o);var d=Dh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Bv(s,m):f==="dangerouslySetInnerHTML"?$v(s,m):f==="children"?da(s,m):lp(s,f,m,d)}switch(c){case"input":Ch(s,i);break;case"textarea":Fv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?bi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?bi(s,!!i.multiple,i.defaultValue,!0):bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[_a]=i}catch(C){Le(t,t.return,C)}}break;case 6:if(an(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){Le(t,t.return,C)}}break;case 3:if(an(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ma(e.containerInfo)}catch(C){Le(t,t.return,C)}break;case 4:an(e,t),_n(t);break;case 13:an(e,t),_n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($p=$e())),r&4&&h0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(d=gt)||f,an(e,t),gt=d):an(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(X=t,f=t.child;f!==null;){for(m=X=f;X!==null;){switch(g=X,w=g.child,g.tag){case 0:case 11:case 14:case 15:Zo(4,g,g.return);break;case 1:xi(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(C){Le(r,n,C)}}break;case 5:xi(g,g.return);break;case 22:if(g.memoizedState!==null){p0(m);continue}}w!==null?(w.return=g,X=w):p0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=zv("display",o))}catch(C){Le(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Le(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:an(e,t),_n(t),r&4&&h0(t);break;case 21:break;default:an(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pw(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(da(s,""),r.flags&=-33);var i=d0(t);df(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=d0(t);uf(t,c,o);break;default:throw Error(H(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LI(t,e,n){X=t,yw(t)}function yw(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$l;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||gt;c=$l;var d=gt;if($l=o,(gt=u)&&!d)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?m0(s):u!==null?(u.return=o,X=u):m0(s);for(;i!==null;)X=i,yw(i),i=i.sibling;X=s,$l=c,gt=d}f0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):f0(t)}}function f0(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Su(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Yy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yy(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ma(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}gt||e.flags&512&&cf(e)}catch(g){Le(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function p0(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function m0(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Su(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{cf(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{cf(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var MI=Math.ceil,Wc=lr.ReactCurrentDispatcher,Fp=lr.ReactCurrentOwner,Jt=lr.ReactCurrentBatchConfig,me=0,tt=null,He=null,ot=0,Lt=0,vi=ns(0),Xe=0,Ia=null,Vs=0,Cu=0,Up=0,ea=null,Ct=null,$p=0,Fi=1/0,$n=null,Kc=!1,hf=null,Or=null,zl=!1,kr=null,Gc=0,ta=0,ff=null,dc=-1,hc=0;function Tt(){return me&6?$e():dc!==-1?dc:dc=$e()}function Vr(t){return t.mode&1?me&2&&ot!==0?ot&-ot:wI.transition!==null?(hc===0&&(hc=t_()),hc):(t=we,t!==0||(t=window.event,t=t===void 0?16:l_(t.type)),t):1}function fn(t,e,n,r){if(50<ta)throw ta=0,ff=null,Error(H(185));Wa(t,n,r),(!(me&2)||t!==tt)&&(t===tt&&(!(me&2)&&(Cu|=n),Xe===4&&xr(t,ot)),Ot(t,r),n===1&&me===0&&!(e.mode&1)&&(Fi=$e()+500,Tu&&rs()))}function Ot(t,e){var n=t.callbackNode;wT(t,e);var r=Rc(t,t===tt?ot:0);if(r===0)n!==null&&Ny(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ny(n),e===1)t.tag===0?_I(g0.bind(null,t)):k_(g0.bind(null,t)),gI(function(){!(me&6)&&rs()}),n=null;else{switch(n_(r)){case 1:n=fp;break;case 4:n=Zv;break;case 16:n=Ac;break;case 536870912:n=e_;break;default:n=Ac}n=Tw(n,xw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function xw(t,e){if(dc=-1,hc=0,me&6)throw Error(H(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=Rc(t,t===tt?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qc(t,r);else{e=r;var s=me;me|=2;var i=_w();(tt!==t||ot!==e)&&($n=null,Fi=$e()+500,Is(t,e));do try{$I();break}catch(c){vw(t,c)}while(!0);Ip(),Wc.current=i,me=s,He!==null?e=0:(tt=null,ot=0,e=Xe)}if(e!==0){if(e===2&&(s=Fh(t),s!==0&&(r=s,e=pf(t,s))),e===1)throw n=Ia,Is(t,0),xr(t,r),Ot(t,$e()),n;if(e===6)xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!FI(s)&&(e=Qc(t,r),e===2&&(i=Fh(t),i!==0&&(r=i,e=pf(t,i))),e===1))throw n=Ia,Is(t,0),xr(t,r),Ot(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:xs(t,Ct,$n);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=$p+500-$e(),10<e)){if(Rc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kh(xs.bind(null,t,Ct,$n),e);break}xs(t,Ct,$n);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-hn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MI(r/1960))-r,10<r){t.timeoutHandle=Kh(xs.bind(null,t,Ct,$n),r);break}xs(t,Ct,$n);break;case 5:xs(t,Ct,$n);break;default:throw Error(H(329))}}}return Ot(t,$e()),t.callbackNode===n?xw.bind(null,t):null}function pf(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(Is(t,e).flags|=256),t=Qc(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&mf(e)),t}function mf(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function FI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~Up,e&=~Cu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function g0(t){if(me&6)throw Error(H(327));ki();var e=Rc(t,0);if(!(e&1))return Ot(t,$e()),null;var n=Qc(t,e);if(t.tag!==0&&n===2){var r=Fh(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=Ia,Is(t,0),xr(t,e),Ot(t,$e()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xs(t,Ct,$n),Ot(t,$e()),null}function zp(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Fi=$e()+500,Tu&&rs())}}function Ls(t){kr!==null&&kr.tag===0&&!(me&6)&&ki();var e=me;me|=1;var n=Jt.transition,r=we;try{if(Jt.transition=null,we=1,t)return t()}finally{we=r,Jt.transition=n,me=e,!(me&6)&&rs()}}function Bp(){Lt=vi.current,Se(vi)}function Is(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mI(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Ep(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vc();break;case 3:Li(),Se(Pt),Se(xt),jp();break;case 5:Rp(r);break;case 4:Li();break;case 13:Se(je);break;case 19:Se(je);break;case 10:kp(r.type._context);break;case 22:case 23:Bp()}n=n.return}if(tt=t,He=t=Lr(t.current,null),ot=Lt=e,Xe=0,Ia=null,Up=Cu=Vs=0,Ct=ea=null,bs!==null){for(e=0;e<bs.length;e++)if(n=bs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}bs=null}return t}function vw(t,e){do{var n=He;try{if(Ip(),lc.current=qc,Hc){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hc=!1}if(Os=0,et=Qe=Pe=null,Jo=!1,Ea=0,Fp.current=null,n===null||n.return===null){Xe=1,Ia=e,He=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=ot,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=r0(o);if(w!==null){w.flags&=-257,s0(w,o,c,i,e),w.mode&1&&n0(i,d,e),e=w,u=d;var N=e.updateQueue;if(N===null){var C=new Set;C.add(u),e.updateQueue=C}else N.add(u);break e}else{if(!(e&1)){n0(i,d,e),Hp();break e}u=Error(H(426))}}else if(Ce&&c.mode&1){var A=r0(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),s0(A,o,c,i,e),Np(Mi(u,c));break e}}i=u=Mi(u,c),Xe!==4&&(Xe=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=nw(i,u,e);Xy(i,x);break e;case 1:c=u;var y=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Or===null||!Or.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=rw(i,c,e);Xy(i,D);break e}}i=i.return}while(i!==null)}bw(n)}catch(P){e=P,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function _w(){var t=Wc.current;return Wc.current=qc,t===null?qc:t}function Hp(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(Vs&268435455)&&!(Cu&268435455)||xr(tt,ot)}function Qc(t,e){var n=me;me|=2;var r=_w();(tt!==t||ot!==e)&&($n=null,Is(t,e));do try{UI();break}catch(s){vw(t,s)}while(!0);if(Ip(),me=n,Wc.current=r,He!==null)throw Error(H(261));return tt=null,ot=0,Xe}function UI(){for(;He!==null;)ww(He)}function $I(){for(;He!==null&&!hT();)ww(He)}function ww(t){var e=Nw(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?bw(t):He=e,Fp.current=null}function bw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DI(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,He=null;return}}else if(n=PI(n,e,Lt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Xe===0&&(Xe=5)}function xs(t,e,n){var r=we,s=Jt.transition;try{Jt.transition=null,we=1,zI(t,e,n,r)}finally{Jt.transition=s,we=r}return null}function zI(t,e,n,r){do ki();while(kr!==null);if(me&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(bT(t,i),t===tt&&(He=tt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,Tw(Ac,function(){return ki(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jt.transition,Jt.transition=null;var o=we;we=1;var c=me;me|=4,Fp.current=null,VI(t,n),gw(n,t),lI(qh),jc=!!Hh,qh=Hh=null,t.current=n,LI(n),fT(),me=c,we=o,Jt.transition=i}else t.current=n;if(zl&&(zl=!1,kr=t,Gc=s),i=t.pendingLanes,i===0&&(Or=null),gT(n.stateNode),Ot(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kc)throw Kc=!1,t=hf,hf=null,t;return Gc&1&&t.tag!==0&&ki(),i=t.pendingLanes,i&1?t===ff?ta++:(ta=0,ff=t):ta=0,rs(),null}function ki(){if(kr!==null){var t=n_(Gc),e=Jt.transition,n=we;try{if(Jt.transition=null,we=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,Gc=0,me&6)throw Error(H(331));var s=me;for(me|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(X=d;X!==null;){var f=X;switch(f.tag){case 0:case 11:case 15:Zo(8,f,i)}var m=f.child;if(m!==null)m.return=f,X=m;else for(;X!==null;){f=X;var g=f.sibling,w=f.return;if(fw(f),f===d){X=null;break}if(g!==null){g.return=w,X=g;break}X=w}}}var N=i.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,X=x;break e}X=i.return}}var y=t.current;for(X=y;X!==null;){o=X;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,X=I;else e:for(o=y;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Su(9,c)}}catch(P){Le(c,c.return,P)}if(c===o){X=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,X=D;break e}X=c.return}}if(me=s,rs(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(_u,t)}catch{}r=!0}return r}finally{we=n,Jt.transition=e}}return!1}function y0(t,e,n){e=Mi(n,e),e=nw(t,e,1),t=Dr(t,e,1),e=Tt(),t!==null&&(Wa(t,1,e),Ot(t,e))}function Le(t,e,n){if(t.tag===3)y0(t,t,n);else for(;e!==null;){if(e.tag===3){y0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Mi(n,t),t=rw(e,t,1),e=Dr(e,t,1),t=Tt(),e!==null&&(Wa(e,1,t),Ot(e,t));break}}e=e.return}}function BI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(ot&n)===n&&(Xe===4||Xe===3&&(ot&130023424)===ot&&500>$e()-$p?Is(t,0):Up|=n),Ot(t,e)}function Ew(t,e){e===0&&(t.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var n=Tt();t=Jn(t,e),t!==null&&(Wa(t,e,n),Ot(t,n))}function HI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ew(t,n)}function qI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),Ew(t,n)}var Nw;Nw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,jI(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ce&&e.flags&1048576&&S_(e,Fc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uc(t,e),t=e.pendingProps;var s=Di(e,xt.current);Ii(e,n),s=Dp(null,e,r,t,s,n);var i=Op();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,Lc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cp(e),s.updater=ku,e.stateNode=s,s._reactInternals=e,ef(e,r,t,n),e=rf(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&bp(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=KI(r),t=ln(r,t),s){case 0:e=nf(null,e,r,t,n);break e;case 1:e=a0(null,e,r,t,n);break e;case 11:e=i0(null,e,r,t,n);break e;case 14:e=o0(null,e,r,ln(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),nf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),a0(t,e,r,s,n);case 3:e:{if(aw(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,D_(t,e),zc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Mi(Error(H(423)),e),e=l0(t,e,r,n,s);break e}else if(r!==s){s=Mi(Error(H(424)),e),e=l0(t,e,r,n,s);break e}else for(Mt=Pr(e.stateNode.containerInfo.firstChild),$t=e,Ce=!0,un=null,n=j_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=Zn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return O_(e),t===null&&Yh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Wh(r,s)?o=null:i!==null&&Wh(r,i)&&(e.flags|=32),ow(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Yh(e),null;case 13:return lw(t,e,n);case 4:return Ap(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vi(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),i0(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Uc,r._currentValue),r._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!Pt.current){e=Zn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Gn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Jh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Jh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ii(e,n),s=tn(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=ln(r,e.pendingProps),s=ln(r.type,s),o0(t,e,r,s,n);case 15:return sw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),uc(t,e),e.tag=1,Dt(r)?(t=!0,Lc(e)):t=!1,Ii(e,n),tw(e,r,s),ef(e,r,s,n),rf(null,e,r,!0,t,n);case 19:return cw(t,e,n);case 22:return iw(t,e,n)}throw Error(H(156,e.tag))};function Tw(t,e){return Jv(t,e)}function WI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new WI(t,e,n,r)}function qp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KI(t){if(typeof t=="function")return qp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===up)return 11;if(t===dp)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")qp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ci:return ks(n.children,s,i,e);case cp:o=8,s|=8;break;case Nh:return t=Yt(12,n,e,s|2),t.elementType=Nh,t.lanes=i,t;case Th:return t=Yt(13,n,e,s),t.elementType=Th,t.lanes=i,t;case Ih:return t=Yt(19,n,e,s),t.elementType=Ih,t.lanes=i,t;case Ov:return Au(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pv:o=10;break e;case Dv:o=9;break e;case up:o=11;break e;case dp:o=14;break e;case mr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ks(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Au(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=Ov,t.lanes=n,t.stateNode={isHidden:!1},t}function nh(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function rh(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GI(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ld(0),this.expirationTimes=Ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ld(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,r,s,i,o,c,u){return t=new GI(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cp(i),t}function QI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Iw(t){if(!t)return Wr;t=t._reactInternals;e:{if(Hs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Dt(n))return I_(t,n,e)}return e}function kw(t,e,n,r,s,i,o,c,u){return t=Wp(n,r,!0,t,s,i,o,c,u),t.context=Iw(null),n=t.current,r=Tt(),s=Vr(n),i=Gn(r,s),i.callback=e??null,Dr(n,i,s),t.current.lanes=s,Wa(t,s,r),Ot(t,r),t}function Ru(t,e,n,r){var s=e.current,i=Tt(),o=Vr(s);return n=Iw(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dr(s,e,o),t!==null&&(fn(t,s,o,i),ac(t,s,o)),o}function Xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kp(t,e){x0(t,e),(t=t.alternate)&&x0(t,e)}function XI(){return null}var Sw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gp(t){this._internalRoot=t}ju.prototype.render=Gp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Ru(t,e,null,null)};ju.prototype.unmount=Gp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ls(function(){Ru(null,t,null,null)}),e[Yn]=null}};function ju(t){this._internalRoot=t}ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=i_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&a_(t)}};function Qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v0(){}function YI(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Xc(o);i.call(d)}}var o=kw(e,r,t,0,null,!1,!1,"",v0);return t._reactRootContainer=o,t[Yn]=o.current,xa(t.nodeType===8?t.parentNode:t),Ls(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Xc(u);c.call(d)}}var u=Wp(t,0,!1,null,null,!1,!1,"",v0);return t._reactRootContainer=u,t[Yn]=u.current,xa(t.nodeType===8?t.parentNode:t),Ls(function(){Ru(e,u,n,r)}),u}function Du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Xc(o);c.call(u)}}Ru(e,o,t,s)}else o=YI(n,e,t,s,r);return Xc(o)}r_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(pp(e,n|1),Ot(e,$e()),!(me&6)&&(Fi=$e()+500,rs()))}break;case 13:Ls(function(){var r=Jn(t,1);if(r!==null){var s=Tt();fn(r,t,1,s)}}),Kp(t,1)}};mp=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=Tt();fn(e,t,134217728,n)}Kp(t,134217728)}};s_=function(t){if(t.tag===13){var e=Vr(t),n=Jn(t,e);if(n!==null){var r=Tt();fn(n,t,e,r)}Kp(t,e)}};i_=function(){return we};o_=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};Vh=function(t,e,n){switch(e){case"input":if(Ch(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nu(r);if(!s)throw Error(H(90));Lv(r),Ch(r,s)}}}break;case"textarea":Fv(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};Wv=zp;Kv=Ls;var JI={usingClientEntryPoint:!1,Events:[Ga,fi,Nu,Hv,qv,zp]},Do={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZI={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xv(t),t===null?null:t.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||XI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{_u=Bl.inject(ZI),Tn=Bl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qp(e))throw Error(H(200));return QI(t,e,null,n)};Bt.createRoot=function(t,e){if(!Qp(t))throw Error(H(299));var n=!1,r="",s=Sw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,r,s),t[Yn]=e.current,xa(t.nodeType===8?t.parentNode:t),new Gp(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Xv(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Ls(t)};Bt.hydrate=function(t,e,n){if(!Pu(e))throw Error(H(200));return Du(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Qp(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Sw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kw(e,null,t,1,n??null,s,!1,i,o),t[Yn]=e.current,xa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ju(e)};Bt.render=function(t,e,n){if(!Pu(e))throw Error(H(200));return Du(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(H(40));return t._reactRootContainer?(Ls(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};Bt.unstable_batchedUpdates=zp;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Du(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function Cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cw)}catch(t){console.error(t)}}Cw(),Cv.exports=Bt;var e2=Cv.exports,Aw,_0=e2;Aw=_0.createRoot,_0.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var w0="popstate";function t2(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return gf("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ka(s)}return r2(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function n2(){return Math.random().toString(36).substring(2,10)}function b0(t,e){return{usr:t.state,key:t.key,idx:e}}function gf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Zi(e):e,state:n,key:e&&e.key||r||n2()}}function ka({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Zi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function r2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function m(){c="POP";let A=f(),x=A==null?null:A-d;d=A,u&&u({action:c,location:C.location,delta:x})}function g(A,x){c="PUSH";let y=gf(C.location,A,x);d=f()+1;let I=b0(y,d),D=C.createHref(y);try{o.pushState(I,"",D)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(D)}i&&u&&u({action:c,location:C.location,delta:1})}function w(A,x){c="REPLACE";let y=gf(C.location,A,x);d=f();let I=b0(y,d),D=C.createHref(y);o.replaceState(I,"",D),i&&u&&u({action:c,location:C.location,delta:0})}function N(A){return s2(A)}let C={get action(){return c},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(w0,m),u=A,()=>{s.removeEventListener(w0,m),u=null}},createHref(A){return e(s,A)},createURL:N,encodeLocation(A){let x=N(A);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:w,go(A){return o.go(A)}};return C}function s2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ae(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ka(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Rw(t,e,n="/"){return i2(t,e,n,!1)}function i2(t,e,n,r){let s=typeof e=="string"?Zi(e):e,i=er(s.pathname||"/",n);if(i==null)return null;let o=jw(t);o2(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=y2(i);c=m2(o[u],d,r)}return c}function jw(t,e=[],n=[],r=""){let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ae(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=Qn([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Ae(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),jw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:f2(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of Pw(i.path))s(i,o,u)}),e}function Pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Pw(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function o2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:p2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var a2=/^:[\w-]+$/,l2=3,c2=2,u2=1,d2=10,h2=-2,E0=t=>t==="*";function f2(t,e){let n=t.split("/"),r=n.length;return n.some(E0)&&(r+=h2),e&&(r+=c2),n.filter(s=>!E0(s)).reduce((s,i)=>s+(a2.test(i)?l2:i===""?u2:d2),r)}function p2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function m2(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Yc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Yc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Qn([i,m.pathname]),pathnameBase:w2(Qn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Qn([i,m.pathnameBase]))}return o}function Yc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=g2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:m},g)=>{if(f==="*"){let N=c[g]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const w=c[g];return m&&!w?d[f]=void 0:d[f]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function g2(t,e=!1,n=!0){gn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function y2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function er(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function x2(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Zi(t):t;return{pathname:n?n.startsWith("/")?n:v2(n,e):e,search:b2(r),hash:E2(s)}}function v2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xp(t){let e=_2(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Yp(t,e,n,r=!1){let s;typeof t=="string"?s=Zi(t):(s={...t},Ae(!s.pathname||!s.pathname.includes("?"),sh("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),sh("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),sh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=x2(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Qn=t=>t.join("/").replace(/\/\/+/g,"/"),w2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),b2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,E2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Dw=["POST","PUT","PATCH","DELETE"];new Set(Dw);var T2=["GET",...Dw];new Set(T2);var eo=j.createContext(null);eo.displayName="DataRouter";var Ou=j.createContext(null);Ou.displayName="DataRouterState";j.createContext(!1);var Ow=j.createContext({isTransitioning:!1});Ow.displayName="ViewTransition";var I2=j.createContext(new Map);I2.displayName="Fetchers";var k2=j.createContext(null);k2.displayName="Await";var vn=j.createContext(null);vn.displayName="Navigation";var Xa=j.createContext(null);Xa.displayName="Location";var Vn=j.createContext({outlet:null,matches:[],isDataRoute:!1});Vn.displayName="Route";var Jp=j.createContext(null);Jp.displayName="RouteError";function S2(t,{relative:e}={}){Ae(to(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(vn),{hash:s,pathname:i,search:o}=Ya(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Qn([n,i])),r.createHref({pathname:c,search:o,hash:s})}function to(){return j.useContext(Xa)!=null}function ss(){return Ae(to(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Xa).location}var Vw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lw(t){j.useContext(vn).static||j.useLayoutEffect(t)}function Mw(){let{isDataRoute:t}=j.useContext(Vn);return t?$2():C2()}function C2(){Ae(to(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(eo),{basename:e,navigator:n}=j.useContext(vn),{matches:r}=j.useContext(Vn),{pathname:s}=ss(),i=JSON.stringify(Xp(r)),o=j.useRef(!1);return Lw(()=>{o.current=!0}),j.useCallback((u,d={})=>{if(gn(o.current,Vw),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Yp(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Qn([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}j.createContext(null);function Ya(t,{relative:e}={}){let{matches:n}=j.useContext(Vn),{pathname:r}=ss(),s=JSON.stringify(Xp(n));return j.useMemo(()=>Yp(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function A2(t,e){return Fw(t,e)}function Fw(t,e,n,r){var x;Ae(to(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(vn),{matches:i}=j.useContext(Vn),o=i[i.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",f=o&&o.route;{let y=f&&f.path||"";Uw(u,!f||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let m=ss(),g;if(e){let y=typeof e=="string"?Zi(e):e;Ae(d==="/"||((x=y.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),g=y}else g=m;let w=g.pathname||"/",N=w;if(d!=="/"){let y=d.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(y.length).join("/")}let C=Rw(t,{pathname:N});gn(f||C!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),gn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=O2(C&&C.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:Qn([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Qn([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&A?j.createElement(Xa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},A):A}function R2(){let t=U2(),e=N2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:i},"ErrorBoundary")," or"," ",j.createElement("code",{style:i},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,o)}var j2=j.createElement(R2,null),P2=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?j.createElement(Vn.Provider,{value:this.props.routeContext},j.createElement(Jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function D2({routeContext:t,match:e,children:n}){let r=j.useContext(eo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Vn.Provider,{value:t},n)}function O2(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Ae(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:m}=n,g=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let m,g=!1,w=null,N=null;n&&(m=i&&d.route.id?i[d.route.id]:void 0,w=d.route.errorElement||j2,o&&(c<0&&f===0?(Uw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,N=null):c===f&&(g=!0,N=d.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,f+1)),A=()=>{let x;return m?x=w:g?x=N:d.route.Component?x=j.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,j.createElement(D2,{match:d,routeContext:{outlet:u,matches:C,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?j.createElement(P2,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):A()},null)}function Zp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V2(t){let e=j.useContext(eo);return Ae(e,Zp(t)),e}function L2(t){let e=j.useContext(Ou);return Ae(e,Zp(t)),e}function M2(t){let e=j.useContext(Vn);return Ae(e,Zp(t)),e}function em(t){let e=M2(t),n=e.matches[e.matches.length-1];return Ae(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function F2(){return em("useRouteId")}function U2(){var r;let t=j.useContext(Jp),e=L2("useRouteError"),n=em("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function $2(){let{router:t}=V2("useNavigate"),e=em("useNavigate"),n=j.useRef(!1);return Lw(()=>{n.current=!0}),j.useCallback(async(s,i={})=>{gn(n.current,Vw),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var N0={};function Uw(t,e,n){!e&&!N0[t]&&(N0[t]=!0,gn(!1,n))}j.memo(z2);function z2({routes:t,future:e,state:n}){return Fw(t,void 0,n,e)}function B2({to:t,replace:e,state:n,relative:r}){Ae(to(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(vn);gn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=j.useContext(Vn),{pathname:o}=ss(),c=Mw(),u=Yp(t,Xp(i),o,r==="path"),d=JSON.stringify(u);return j.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function yf(t){Ae(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function H2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Ae(!to(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Zi(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:g="default"}=n,w=j.useMemo(()=>{let N=er(u,o);return N==null?null:{location:{pathname:N,search:d,hash:f,state:m,key:g},navigationType:r}},[o,u,d,f,m,g,r]);return gn(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(vn.Provider,{value:c},j.createElement(Xa.Provider,{children:e,value:w}))}function q2({children:t,location:e}){return A2(xf(t),e)}function xf(t,e=[]){let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,xf(r.props.children,i));return}Ae(r.type===yf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ae(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xf(r.props.children,i)),n.push(o)}),n}var pc="get",mc="application/x-www-form-urlencoded";function Vu(t){return t!=null&&typeof t.tagName=="string"}function W2(t){return Vu(t)&&t.tagName.toLowerCase()==="button"}function K2(t){return Vu(t)&&t.tagName.toLowerCase()==="form"}function G2(t){return Vu(t)&&t.tagName.toLowerCase()==="input"}function Q2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function X2(t,e){return t.button===0&&(!e||e==="_self")&&!Q2(t)}var Hl=null;function Y2(){if(Hl===null)try{new FormData(document.createElement("form"),0),Hl=!1}catch{Hl=!0}return Hl}var J2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ih(t){return t!=null&&!J2.has(t)?(gn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mc}"`),null):t}function Z2(t,e){let n,r,s,i,o;if(K2(t)){let c=t.getAttribute("action");r=c?er(c,e):null,n=t.getAttribute("method")||pc,s=ih(t.getAttribute("enctype"))||mc,i=new FormData(t)}else if(W2(t)||G2(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?er(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||pc,s=ih(t.getAttribute("formenctype"))||ih(c.getAttribute("enctype"))||mc,i=new FormData(c,t),!Y2()){let{name:d,type:f,value:m}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(Vu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pc,r=null,s=mc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ek(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&er(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function tk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function rk(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await tk(i,n);return o.links?o.links():[]}return[]}));return ak(r.flat(1).filter(nk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function T0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function sk(t,e,{includeHydrateFallback:n}={}){return ik(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function ik(t){return[...new Set(t)]}function ok(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function ak(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(ok(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function $w(){let t=j.useContext(eo);return tm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function lk(){let t=j.useContext(Ou);return tm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var nm=j.createContext(void 0);nm.displayName="FrameworkContext";function zw(){let t=j.useContext(nm);return tm(t,"You must render this element inside a <HydratedRouter> element"),t}function ck(t,e){let n=j.useContext(nm),[r,s]=j.useState(!1),[i,o]=j.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=e,g=j.useRef(null);j.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let C=x=>{x.forEach(y=>{o(y.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),j.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let w=()=>{s(!0)},N=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Oo(c,w),onBlur:Oo(u,N),onMouseEnter:Oo(d,w),onMouseLeave:Oo(f,N),onTouchStart:Oo(m,w)}]:[!1,g,{}]}function Oo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function uk({page:t,...e}){let{router:n}=$w(),r=j.useMemo(()=>Rw(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?j.createElement(hk,{page:t,matches:r,...e}):null}function dk(t){let{manifest:e,routeModules:n}=zw(),[r,s]=j.useState([]);return j.useEffect(()=>{let i=!1;return rk(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function hk({page:t,matches:e,...n}){let r=ss(),{manifest:s,routeModules:i}=zw(),{basename:o}=$w(),{loaderData:c,matches:u}=lk(),d=j.useMemo(()=>T0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=j.useMemo(()=>T0(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=j.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,C=!1;if(e.forEach(x=>{var I;let y=s.routes[x.route.id];!y||!y.hasLoader||(!d.some(D=>D.route.id===x.route.id)&&x.route.id in c&&((I=i[x.route.id])!=null&&I.shouldRevalidate)||y.hasClientLoader?C=!0:N.add(x.route.id))}),N.size===0)return[];let A=ek(t,o,"data");return C&&N.size>0&&A.searchParams.set("_routes",e.filter(x=>N.has(x.route.id)).map(x=>x.route.id).join(",")),[A.pathname+A.search]},[o,c,r,s,d,e,t,i]),g=j.useMemo(()=>sk(f,s),[f,s]),w=dk(f);return j.createElement(j.Fragment,null,m.map(N=>j.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),g.map(N=>j.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),w.map(({key:N,link:C})=>j.createElement("link",{key:N,...C})))}function fk(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Bw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bw&&(window.__reactRouterVersion="7.7.0")}catch{}function pk({basename:t,children:e,window:n}){let r=j.useRef();r.current==null&&(r.current=t2({window:n,v5Compat:!0}));let s=r.current,[i,o]=j.useState({action:s.action,location:s.location}),c=j.useCallback(u=>{j.startTransition(()=>o(u))},[o]);return j.useLayoutEffect(()=>s.listen(c),[s,c]),j.createElement(H2,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Hw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qw=j.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m,...g},w){let{basename:N}=j.useContext(vn),C=typeof d=="string"&&Hw.test(d),A,x=!1;if(typeof d=="string"&&C&&(A=d,Bw))try{let b=new URL(window.location.href),_=d.startsWith("//")?new URL(b.protocol+d):new URL(d),S=er(_.pathname,N);_.origin===b.origin&&S!=null?d=S+_.search+_.hash:x=!0}catch{gn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=S2(d,{relative:s}),[I,D,P]=ck(r,g),L=xk(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function k(b){e&&e(b),b.defaultPrevented||L(b)}let E=j.createElement("a",{...g,...P,href:A||y,onClick:x||i?e:k,ref:fk(w,D),target:u,"data-discover":!C&&n==="render"?"true":void 0});return I&&!C?j.createElement(j.Fragment,null,E,j.createElement(uk,{page:y})):E});qw.displayName="Link";var mk=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let m=Ya(o,{relative:d.relative}),g=ss(),w=j.useContext(Ou),{navigator:N,basename:C}=j.useContext(vn),A=w!=null&&Ek(m)&&c===!0,x=N.encodeLocation?N.encodeLocation(m).pathname:m.pathname,y=g.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(y=y.toLowerCase(),I=I?I.toLowerCase():null,x=x.toLowerCase()),I&&C&&(I=er(I,C)||I);const D=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let P=y===x||!s&&y.startsWith(x)&&y.charAt(D)==="/",L=I!=null&&(I===x||!s&&I.startsWith(x)&&I.charAt(x.length)==="/"),k={isActive:P,isPending:L,isTransitioning:A},E=P?e:void 0,b;typeof r=="function"?b=r(k):b=[r,P?"active":null,L?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let _=typeof i=="function"?i(k):i;return j.createElement(qw,{...d,"aria-current":E,className:b,ref:f,style:_,to:o,viewTransition:c},typeof u=="function"?u(k):u)});mk.displayName="NavLink";var gk=j.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=pc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...g},w)=>{let N=wk(),C=bk(c,{relative:d}),A=o.toLowerCase()==="get"?"get":"post",x=typeof c=="string"&&Hw.test(c),y=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let D=I.nativeEvent.submitter,P=(D==null?void 0:D.getAttribute("formmethod"))||o;N(D||I.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:m})};return j.createElement("form",{ref:w,method:A,action:C,onSubmit:r?u:y,...g,"data-discover":!x&&t==="render"?"true":void 0})});gk.displayName="Form";function yk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ww(t){let e=j.useContext(eo);return Ae(e,yk(t)),e}function xk(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let c=Mw(),u=ss(),d=Ya(t,{relative:i});return j.useCallback(f=>{if(X2(f,e)){f.preventDefault();let m=n!==void 0?n:ka(u)===ka(d);c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,c,d,n,r,e,t,s,i,o])}var vk=0,_k=()=>`__${String(++vk)}__`;function wk(){let{router:t}=Ww("useSubmit"),{basename:e}=j.useContext(vn),n=F2();return j.useCallback(async(r,s={})=>{let{action:i,method:o,encType:c,formData:u,body:d}=Z2(r,e);if(s.navigate===!1){let f=s.fetcherKey||_k();await t.fetch(f,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function bk(t,{relative:e}={}){let{basename:n}=j.useContext(vn),r=j.useContext(Vn);Ae(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ya(t||".",{relative:e})},o=ss();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Qn([n,i.pathname])),ka(i)}function Ek(t,e={}){let n=j.useContext(Ow);Ae(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ww("useViewTransitionState"),s=Ya(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=er(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=er(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Yc(s.pathname,o)!=null||Yc(s.pathname,i)!=null}let Nk={data:""},Tk=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Nk,Ik=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,kk=/\/\*[^]*?\*\/|  +/g,I0=/\n+/g,vr=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?vr(o,i):i+"{"+vr(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=vr(o,e?e.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=vr.p?vr.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Un={},Kw=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Kw(t[n]);return e}return t},Sk=(t,e,n,r,s)=>{let i=Kw(t),o=Un[i]||(Un[i]=(u=>{let d=0,f=11;for(;d<u.length;)f=101*f+u.charCodeAt(d++)>>>0;return"go"+f})(i));if(!Un[o]){let u=i!==t?t:(d=>{let f,m,g=[{}];for(;f=Ik.exec(d.replace(kk,""));)f[4]?g.shift():f[3]?(m=f[3].replace(I0," ").trim(),g.unshift(g[0][m]=g[0][m]||{})):g[0][f[1]]=f[2].replace(I0," ").trim();return g[0]})(t);Un[o]=vr(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let c=n&&Un.g?Un.g:null;return n&&(Un.g=Un[o]),((u,d,f,m)=>{m?d.data=d.data.replace(m,u):d.data.indexOf(u)===-1&&(d.data=f?u+d.data:d.data+u)})(Un[o],e,r,c),o},Ck=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let c=o(n),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":vr(c,""):c===!1?"":c}return r+s+(o??"")},"");function Lu(t){let e=this||{},n=t.call?t(e.p):t;return Sk(n.unshift?n.raw?Ck(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,Tk(e.target),e.g,e.o,e.k)}let Gw,vf,_f;Lu.bind({g:1});let tr=Lu.bind({k:1});function Ak(t,e,n,r){vr.p=e,Gw=t,vf=n,_f=r}function is(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let c=Object.assign({},i),u=c.className||s.className;n.p=Object.assign({theme:vf&&vf()},c),n.o=/ *go\d+/.test(u),c.className=Lu.apply(n,r)+(u?" "+u:"");let d=t;return t[0]&&(d=c.as||t,delete c.as),_f&&d[0]&&_f(c),Gw(d,c)}return s}}var Rk=t=>typeof t=="function",Jc=(t,e)=>Rk(t)?t(e):t,jk=(()=>{let t=0;return()=>(++t).toString()})(),Qw=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Pk=20,Xw=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Pk)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return Xw(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},gc=[],Ns={toasts:[],pausedAt:void 0},qs=t=>{Ns=Xw(Ns,t),gc.forEach(e=>{e(Ns)})},Dk={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ok=(t={})=>{let[e,n]=j.useState(Ns),r=j.useRef(Ns);j.useEffect(()=>(r.current!==Ns&&n(Ns),gc.push(n),()=>{let i=gc.indexOf(n);i>-1&&gc.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,c,u;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((c=t[i.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||Dk[i.type],style:{...t.style,...(u=t[i.type])==null?void 0:u.style,...i.style}}});return{...e,toasts:s}},Vk=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||jk()}),Ja=t=>(e,n)=>{let r=Vk(e,t,n);return qs({type:2,toast:r}),r.id},Nt=(t,e)=>Ja("blank")(t,e);Nt.error=Ja("error");Nt.success=Ja("success");Nt.loading=Ja("loading");Nt.custom=Ja("custom");Nt.dismiss=t=>{qs({type:3,toastId:t})};Nt.remove=t=>qs({type:4,toastId:t});Nt.promise=(t,e,n)=>{let r=Nt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Jc(e.success,s):void 0;return i?Nt.success(i,{id:r,...n,...n==null?void 0:n.success}):Nt.dismiss(r),s}).catch(s=>{let i=e.error?Jc(e.error,s):void 0;i?Nt.error(i,{id:r,...n,...n==null?void 0:n.error}):Nt.dismiss(r)}),t};var Lk=(t,e)=>{qs({type:1,toast:{id:t,height:e}})},Mk=()=>{qs({type:5,time:Date.now()})},na=new Map,Fk=1e3,Uk=(t,e=Fk)=>{if(na.has(t))return;let n=setTimeout(()=>{na.delete(t),qs({type:4,toastId:t})},e);na.set(t,n)},$k=t=>{let{toasts:e,pausedAt:n}=Ok(t);j.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(c=>{if(c.duration===1/0)return;let u=(c.duration||0)+c.pauseDuration-(i-c.createdAt);if(u<0){c.visible&&Nt.dismiss(c.id);return}return setTimeout(()=>Nt.dismiss(c.id),u)});return()=>{o.forEach(c=>c&&clearTimeout(c))}},[e,n]);let r=j.useCallback(()=>{n&&qs({type:6,time:Date.now()})},[n]),s=j.useCallback((i,o)=>{let{reverseOrder:c=!1,gutter:u=8,defaultPosition:d}=o||{},f=e.filter(w=>(w.position||d)===(i.position||d)&&w.height),m=f.findIndex(w=>w.id===i.id),g=f.filter((w,N)=>N<m&&w.visible).length;return f.filter(w=>w.visible).slice(...c?[g+1]:[0,g]).reduce((w,N)=>w+(N.height||0)+u,0)},[e]);return j.useEffect(()=>{e.forEach(i=>{if(i.dismissed)Uk(i.id,i.removeDelay);else{let o=na.get(i.id);o&&(clearTimeout(o),na.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:Lk,startPause:Mk,endPause:r,calculateOffset:s}}},zk=tr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Bk=tr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hk=tr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qk=is("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Bk} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Hk} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Wk=tr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Kk=is("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Wk} 1s linear infinite;
`,Gk=tr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Qk=tr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Xk=is("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gk} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Qk} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Yk=is("div")`
  position: absolute;
`,Jk=is("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Zk=tr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,eS=is("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Zk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tS=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?j.createElement(eS,null,e):e:n==="blank"?null:j.createElement(Jk,null,j.createElement(Kk,{...r}),n!=="loading"&&j.createElement(Yk,null,n==="error"?j.createElement(qk,{...r}):j.createElement(Xk,{...r})))},nS=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rS=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,sS="0%{opacity:0;} 100%{opacity:1;}",iS="0%{opacity:1;} 100%{opacity:0;}",oS=is("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,aS=is("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,lS=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=Qw()?[sS,iS]:[nS(n),rS(n)];return{animation:e?`${tr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${tr(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},cS=j.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?lS(t.position||e||"top-center",t.visible):{opacity:0},i=j.createElement(tS,{toast:t}),o=j.createElement(aS,{...t.ariaProps},Jc(t.message,t));return j.createElement(oS,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):j.createElement(j.Fragment,null,i,o))});Ak(j.createElement);var uS=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=j.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;r(t,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return j.createElement("div",{ref:i,className:e,style:n},s)},dS=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qw()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},hS=Lu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ql=16,fS=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:c,handlers:u}=$k(n);return j.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ql,left:ql,right:ql,bottom:ql,pointerEvents:"none",...i},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||e,m=u.calculateOffset(d,{reverseOrder:t,gutter:r,defaultPosition:e}),g=dS(f,m);return j.createElement(uS,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?hS:"",style:g},d.type==="custom"?Jc(d.message,d):s?s(d):j.createElement(cS,{toast:d,position:f}))}))},q=Nt;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=()=>{};var k0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new gS;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yS=function(t){const e=Yw(t);return rm.encodeByteArray(e,!0)},Zc=function(t){return yS(t).replace(/\./g,"")},Jw=function(t){try{return rm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=()=>Zw().__FIREBASE_DEFAULTS__,vS=()=>{if(typeof process>"u"||typeof k0>"u")return;const t=k0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_S=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jw(t[1]);return e&&JSON.parse(e)},Mu=()=>{try{return pS()||xS()||vS()||_S()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eb=t=>{var e,n;return(n=(e=Mu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tb=t=>{const e=eb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nb=()=>{var t;return(t=Mu())==null?void 0:t.config},rb=t=>{var e;return(e=Mu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zc(JSON.stringify(n)),Zc(JSON.stringify(o)),""].join(".")}const ra={};function wS(){const t={prod:[],emulator:[]};for(const e of Object.keys(ra))ra[e]?t.emulator.push(e):t.prod.push(e);return t}function bS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S0=!1;function im(t,e){if(typeof window>"u"||typeof document>"u"||!os(window.location.host)||ra[t]===e||ra[t]||S0)return;ra[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=wS().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{S0=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=bS(r),w=n("text"),N=document.getElementById(w)||document.createElement("span"),C=n("learnmore"),A=document.getElementById(C)||document.createElement("a"),x=n("preprendIcon"),y=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;c(I),f(A,C);const D=d();u(y,x),I.append(y,N,A,D),document.body.appendChild(I)}i?(N.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ES(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function NS(){var e;const t=(e=Mu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SS(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CS(){return!NS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function om(){try{return typeof indexedDB=="object"}catch{return!1}}function AS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="FirebaseError";class Ln extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RS,Object.setPrototypeOf(this,Ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?jS(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Ln(s,c,r)}}function jS(t,e){return t.replace(PS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PS=/\{\$([^}]+)}/g;function DS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(C0(i)&&C0(o)){if(!Ms(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function C0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function OS(t,e){const n=new VS(t,e);return n.subscribe.bind(n)}class VS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=oh),s.error===void 0&&(s.error=oh),s.complete===void 0&&(s.complete=oh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function oh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=1e3,FS=2,US=4*60*60*1e3,$S=.5;function zS(t,e=MS,n=FS){const r=e*Math.pow(n,t),s=Math.round($S*r*(Math.random()-.5)*2);return Math.min(US,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t){return t&&t._delegate?t._delegate:t}class Pn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qS(e))try{this.getOrInitializeService({instanceIdentifier:vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vs){return this.instances.has(e)}getOptions(e=vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vs){return this.component?this.component.multipleInstances?e:vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HS(t){return t===vs?void 0:t}function qS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const KS={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},GS=le.INFO,QS={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},XS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fu{constructor(e){this.name=e,this._logLevel=GS,this._logHandler=XS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const YS=(t,e)=>e.some(n=>t instanceof n);let A0,R0;function JS(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZS(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,wf=new WeakMap,ob=new WeakMap,ah=new WeakMap,am=new WeakMap;function eC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Mr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ib.set(n,t)}).catch(()=>{}),am.set(e,t),e}function tC(t){if(wf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wf.set(t,e)}let bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ob.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nC(t){bf=t(bf)}function rC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lh(this),e,...n);return ob.set(r,e.sort?e.sort():[e]),Mr(r)}:ZS().includes(t)?function(...e){return t.apply(lh(this),e),Mr(ib.get(this))}:function(...e){return Mr(t.apply(lh(this),e))}}function sC(t){return typeof t=="function"?rC(t):(t instanceof IDBTransaction&&tC(t),YS(t,JS())?new Proxy(t,bf):t)}function Mr(t){if(t instanceof IDBRequest)return eC(t);if(ah.has(t))return ah.get(t);const e=sC(t);return e!==t&&(ah.set(t,e),am.set(e,t)),e}const lh=t=>am.get(t);function iC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Mr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Mr(o.result),u.oldVersion,u.newVersion,Mr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const oC=["get","getKey","getAll","getAllKeys","count"],aC=["put","add","delete","clear"],ch=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oC.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return ch.set(e,i),i}nC(t=>({...t,get:(e,n,r)=>j0(e,n)||t.get(e,n,r),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ef="@firebase/app",P0="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Fu("@firebase/app"),uC="@firebase/app-compat",dC="@firebase/analytics-compat",hC="@firebase/analytics",fC="@firebase/app-check-compat",pC="@firebase/app-check",mC="@firebase/auth",gC="@firebase/auth-compat",yC="@firebase/database",xC="@firebase/data-connect",vC="@firebase/database-compat",_C="@firebase/functions",wC="@firebase/functions-compat",bC="@firebase/installations",EC="@firebase/installations-compat",NC="@firebase/messaging",TC="@firebase/messaging-compat",IC="@firebase/performance",kC="@firebase/performance-compat",SC="@firebase/remote-config",CC="@firebase/remote-config-compat",AC="@firebase/storage",RC="@firebase/storage-compat",jC="@firebase/firestore",PC="@firebase/ai",DC="@firebase/firestore-compat",OC="firebase",VC="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",LC={[Ef]:"fire-core",[uC]:"fire-core-compat",[hC]:"fire-analytics",[dC]:"fire-analytics-compat",[pC]:"fire-app-check",[fC]:"fire-app-check-compat",[mC]:"fire-auth",[gC]:"fire-auth-compat",[yC]:"fire-rtdb",[xC]:"fire-data-connect",[vC]:"fire-rtdb-compat",[_C]:"fire-fn",[wC]:"fire-fn-compat",[bC]:"fire-iid",[EC]:"fire-iid-compat",[NC]:"fire-fcm",[TC]:"fire-fcm-compat",[IC]:"fire-perf",[kC]:"fire-perf-compat",[SC]:"fire-rc",[CC]:"fire-rc-compat",[AC]:"fire-gcs",[RC]:"fire-gcs-compat",[jC]:"fire-fst",[DC]:"fire-fst-compat",[PC]:"fire-vertex","fire-js":"fire-js",[OC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,MC=new Map,Tf=new Map;function D0(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){const e=t.name;if(Tf.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Tf.set(e,t);for(const n of eu.values())D0(n,t);for(const n of MC.values())D0(n,t);return!0}function ro(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new no("app","Firebase",FC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=VC;function ab(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Nf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Fr.create("bad-app-name",{appName:String(s)});if(n||(n=nb()),!n)throw Fr.create("no-options");const i=eu.get(s);if(i){if(Ms(n,i.options)&&Ms(r,i.config))return i;throw Fr.create("duplicate-app",{appName:s})}const o=new WS(s);for(const u of Tf.values())o.addComponent(u);const c=new UC(n,r,o);return eu.set(s,c),c}function Uu(t=Nf){const e=eu.get(t);if(!e&&t===Nf&&nb())return ab();if(!e)throw Fr.create("no-app",{appName:t});return e}function pn(t,e,n){let r=LC[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(o.join(" "));return}rr(new Pn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebase-heartbeat-database",zC=1,Ca="firebase-heartbeat-store";let uh=null;function lb(){return uh||(uh=iC($C,zC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),uh}async function BC(t){try{const n=(await lb()).transaction(Ca),r=await n.objectStore(Ca).get(cb(t));return await n.done,r}catch(e){if(e instanceof Ln)nr.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function O0(t,e){try{const r=(await lb()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,cb(t)),await r.done}catch(n){if(n instanceof Ln)nr.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function cb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=1024,qC=30;class WC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=V0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>qC){const o=QC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V0(),{heartbeatsToSend:r,unsentEntries:s}=KC(this._heartbeatsCache.heartbeats),i=Zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nr.warn(n),""}}}function V0(){return new Date().toISOString().substring(0,10)}function KC(t,e=HC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),L0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),L0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return om()?AS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function L0(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}function QC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){rr(new Pn("platform-logger",e=>new lC(e),"PRIVATE")),rr(new Pn("heartbeat",e=>new WC(e),"PRIVATE")),pn(Ef,P0,t),pn(Ef,P0,"esm2020"),pn("fire-js","")}XC("");function ub(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YC=ub,db=new no("auth","Firebase",ub());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Fu("@firebase/auth");function JC(t,...e){tu.logLevel<=le.WARN&&tu.warn(`Auth (${Ws}): ${t}`,...e)}function yc(t,...e){tu.logLevel<=le.ERROR&&tu.error(`Auth (${Ws}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw lm(t,...e)}function kn(t,...e){return lm(t,...e)}function hb(t,e,n){const r={...YC(),[e]:n};return new no("auth","Firebase",r).create(e,{appName:t.name})}function Ur(t){return hb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return db.create(t,...e)}function te(t,e,...n){if(!t)throw lm(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function sr(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ZC(){return M0()==="http:"||M0()==="https:"}function M0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZC()||IS()||"connection"in navigator)?navigator.onLine:!0}function tA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=ES()||kS()}get(){return eA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sA=new el(3e4,6e4);function Ks(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function as(t,e,n,r,s={}){return pb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Za({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return TS()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&os(t.emulatorConfig.host)&&(d.credentials="include"),fb.fetch()(await mb(t,t.config.apiHost,n,c),d)})}async function pb(t,e,n){t._canInitEmulator=!1;const r={...nA,...e};try{const s=new oA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Wl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hb(t,f,d);yn(t,f)}}catch(s){if(s instanceof Ln)throw s;yn(t,"network-request-failed",{message:String(s)})}}async function $u(t,e,n,r,s={}){const i=await as(t,e,n,r,s);return"mfaPendingCredential"in i&&yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function mb(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?cm(t.config,s):`${t.config.apiScheme}://${s}`;return rA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function iA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kn(this.auth,"network-request-failed")),sA.get())})}}function Wl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=kn(t,e,r);return s.customData._tokenResponse=n,s}function F0(t){return t!==void 0&&t.enterprise!==void 0}class aA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lA(t,e){return as(t,"GET","/v2/recaptchaConfig",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e){return as(t,"POST","/v1/accounts:delete",e)}async function nu(t,e){return as(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uA(t,e=!1){const n=Re(t),r=await n.getIdToken(e),s=um(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:sa(dh(s.auth_time)),issuedAtTime:sa(dh(s.iat)),expirationTime:sa(dh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dh(t){return Number(t)*1e3}function um(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jw(n);return s?JSON.parse(s):(yc("Failed to decode base64 JWT payload"),null)}catch(s){return yc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function U0(t){const e=um(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ln&&dA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sa(this.lastLoginAt),this.creationTime=sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Aa(t,nu(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?gb(s.providerUserInfo):[],o=pA(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function fA(t){const e=Re(t);await ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e){const n=await pb(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await mb(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&os(t.emulatorConfig.host)&&(u.credentials="include"),fb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gA(t,e){return as(t,"POST","/v2/accounts:revokeToken",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=U0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Si;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(te(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Si,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new hA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Aa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uA(this,e)}reload(){return fA(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ru(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await Aa(this,cA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:w,providerData:N,stsTokenManager:C}=n;te(m&&C,e,"internal-error");const A=Si.fromJSON(this.name,C);te(typeof m=="string",e,"internal-error"),fr(r,e.name),fr(s,e.name),te(typeof g=="boolean",e,"internal-error"),te(typeof w=="boolean",e,"internal-error"),fr(i,e.name),fr(o,e.name),fr(c,e.name),fr(u,e.name),fr(d,e.name),fr(f,e.name);const x=new dn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:A,createdAt:d,lastLoginAt:f});return N&&Array.isArray(N)&&(x.providerData=N.map(y=>({...y}))),u&&(x._redirectEventId=u),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new Si;s.updateFromServerResponse(n);const i=new dn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ru(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?gb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Si;c.updateFromIdToken(r);const u=new dn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new kf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;function Wn(t){sr(t instanceof Function,"Expected a class definition");let e=$0.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yb.type="NONE";const z0=yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xc(this.userKey,s.apiKey,i),this.fullPersistenceKey=xc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nu(this.auth,{idToken:e}).catch(()=>{});return n?dn._fromGetAccountInfoResponse(this.auth,n,e):null}return dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ci(Wn(z0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Wn(z0);const o=xc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await nu(e,{idToken:f}).catch(()=>{});if(!g)break;m=await dn._fromGetAccountInfoResponse(e,g,f)}else m=dn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ci(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Eb(e))return"Blackberry";if(Nb(e))return"Webos";if(vb(e))return"Safari";if((e.includes("chrome/")||_b(e))&&!e.includes("edge/"))return"Chrome";if(bb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xb(t=vt()){return/firefox\//i.test(t)}function vb(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _b(t=vt()){return/crios\//i.test(t)}function wb(t=vt()){return/iemobile/i.test(t)}function bb(t=vt()){return/android/i.test(t)}function Eb(t=vt()){return/blackberry/i.test(t)}function Nb(t=vt()){return/webos/i.test(t)}function dm(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yA(t=vt()){var e;return dm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xA(){return SS()&&document.documentMode===10}function Tb(t=vt()){return dm(t)||bb(t)||Nb(t)||Eb(t)||/windows phone/i.test(t)||wb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t,e=[]){let n;switch(t){case"Browser":n=B0(vt());break;case"Worker":n=`${B0(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(t,e={}){return as(t,"GET","/v2/passwordPolicy",Ks(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=6;class bA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H0(this),this.idTokenSubscription=new H0(this),this.beforeStateQueue=new vA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=db,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nu(this,{idToken:e}),r=await dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Gt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(Ur(this));const n=e?Re(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _A(this),n=new bA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&JC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function so(t){return Re(t)}class H0{constructor(e){this.auth=e,this.observer=null,this.addObserver=OS(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NA(t){zu=t}function kb(t){return zu.loadJS(t)}function TA(){return zu.recaptchaEnterpriseScript}function IA(){return zu.gapiScript}function kA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SA{constructor(){this.enterprise=new CA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const AA="recaptcha-enterprise",Sb="NO_RECAPTCHA";class RA{constructor(e){this.type=AA,this.auth=so(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{lA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new aA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;F0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Sb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&F0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=TA();u.length!==0&&(u+=c),kb(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function q0(t,e,n,r=!1,s=!1){const i=new RA(t);let o;if(s)o=Sb;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function W0(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await q0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await q0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e){const n=ro(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ms(i,e??{}))return s;yn(s,"already-initialized")}return n.initialize({options:e})}function PA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function DA(t,e,n){const r=so(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Cb(e),{host:o,port:c}=OA(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Ms(d,r.config.emulator)&&Ms(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,os(o)?(sm(`${i}//${o}${u}`),im("Auth",!0)):VA()}function Cb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OA(t){const e=Cb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:K0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:K0(o)}}}function K0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function LA(t,e){return as(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){return $u(t,"POST","/v1/accounts:signInWithPassword",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e){return $u(t,"POST","/v1/accounts:signInWithEmailLink",Ks(t,e))}async function UA(t,e){return $u(t,"POST","/v1/accounts:signInWithEmailLink",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends hm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ra(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ra(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W0(e,n,"signInWithPassword",MA);case"emailLink":return FA(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return W0(e,r,"signUpPassword",LA);case"emailLink":return UA(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t,e){return $u(t,"POST","/v1/accounts:signInWithIdp",Ks(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="http://localhost";class Fs extends hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Fs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ai(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ai(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ai(e,n)}buildRequest(){const e={requestUri:$A,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BA(t){const e=$o(zo(t)).link,n=e?$o(zo(e)).deep_link_id:null,r=$o(zo(t)).deep_link_id;return(r?$o(zo(r)).link:null)||r||n||e||t}class fm{constructor(e){const n=$o(zo(e)),r=n.apiKey??null,s=n.oobCode??null,i=zA(n.mode??null);te(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BA(e);try{return new fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return Ra._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fm.parseLink(n);return te(r,"argument-error"),Ra._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Ab{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends tl{constructor(){super("facebook.com")}static credential(e){return Fs._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.FACEBOOK_SIGN_IN_METHOD="facebook.com";_r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fs._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends tl{constructor(){super("github.com")}static credential(e){return Fs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.GITHUB_SIGN_IN_METHOD="github.com";br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends tl{constructor(){super("twitter.com")}static credential(e,n){return Fs._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await dn._fromIdTokenResponse(e,r,s),o=G0(r);return new Ui({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=G0(r);return new Ui({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function G0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Ln{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new su(e,n,r,s)}}function Rb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(t,i,e,r):i})}async function HA(t,e,n=!1){const r=await Aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ui._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e,n=!1){const{auth:r}=t;if(Gt(r.app))return Promise.reject(Ur(r));const s="reauthenticate";try{const i=await Aa(t,Rb(r,s,e,t),n);te(i.idToken,r,"internal-error");const o=um(i.idToken);te(o,r,"internal-error");const{sub:c}=o;return te(t.uid===c,r,"user-mismatch"),Ui._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,e,n=!1){if(Gt(t.app))return Promise.reject(Ur(t));const r="signIn",s=await Rb(t,r,e),i=await Ui._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function WA(t,e){return jb(so(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t){const e=so(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function GA(t,e,n){return Gt(t.app)?Promise.reject(Ur(t)):WA(Re(t),io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KA(t),r})}function QA(t,e,n,r){return Re(t).onIdTokenChanged(e,n,r)}function XA(t,e,n){return Re(t).beforeAuthStateChanged(e,n)}function YA(t,e,n,r){return Re(t).onAuthStateChanged(e,n,r)}function JA(t){return Re(t).signOut()}const iu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=1e3,eR=10;class Db extends Pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Db.type="LOCAL";const tR=Db;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob extends Pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ob.type="SESSION";const Vb=Ob;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Bu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await nR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=pm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return window}function sR(t){Sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function iR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aR(){return Lb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="firebaseLocalStorageDb",lR=1,ou="firebaseLocalStorage",Fb="fbase_key";class nl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hu(t,e){return t.transaction([ou],e?"readwrite":"readonly").objectStore(ou)}function cR(){const t=indexedDB.deleteDatabase(Mb);return new nl(t).toPromise()}function Sf(){const t=indexedDB.open(Mb,lR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ou,{keyPath:Fb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ou)?e(r):(r.close(),await cR(),e(await Sf()))})})}async function Q0(t,e,n){const r=Hu(t,!0).put({[Fb]:e,value:n});return new nl(r).toPromise()}async function uR(t,e){const n=Hu(t,!1).get(e),r=await new nl(n).toPromise();return r===void 0?null:r.value}function X0(t,e){const n=Hu(t,!0).delete(e);return new nl(n).toPromise()}const dR=800,hR=3;class Ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bu._getInstance(aR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await iR(),!this.activeServiceWorker)return;this.sender=new rR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sf();return await Q0(e,iu,"1"),await X0(e,iu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Hu(s,!1).getAll();return new nl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ub.type="LOCAL";const fR=Ub;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){return e?Wn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ai(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ai(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ai(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mR(t){return jb(t.auth,new mm(t),t.bypassAuthState)}function gR(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),qA(n,new mm(t),t.bypassAuthState)}async function yR(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),HA(n,new mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return yR;case"reauthViaPopup":case"reauthViaRedirect":return gR;default:yn(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new el(2e3,1e4);class _i extends $b{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_i.currentPopupAction&&_i.currentPopupAction.cancel(),_i.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_i.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xR.get())};e()}}_i.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="pendingRedirect",vc=new Map;class _R extends $b{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vc.get(this.auth._key());if(!e){try{const r=await wR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vc.set(this.auth._key(),e)}return this.bypassAuthState||vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wR(t,e){const n=NR(e),r=ER(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bR(t,e){vc.set(t._key(),e)}function ER(t){return Wn(t._redirectPersistence)}function NR(t){return xc(vR,t.config.apiKey,t.name)}async function TR(t,e,n=!1){if(Gt(t.app))return Promise.reject(Ur(t));const r=so(t),s=pR(r,e),o=await new _R(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=10*60*1e3;class kR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zb(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Y0(e))}saveEventToCache(e){this.cachedEventUids.add(Y0(e)),this.lastProcessedEventTime=Date.now()}}function Y0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e={}){return as(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RR=/^https?/;async function jR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CR(t);for(const n of e)try{if(PR(n))return}catch{}yn(t,"unauthorized-domain")}function PR(t){const e=If(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RR.test(n))return!1;if(AR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new el(3e4,6e4);function J0(){const t=Sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OR(t){return new Promise((e,n)=>{var s,i,o;function r(){J0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J0(),n(kn(t,"network-request-failed"))},timeout:DR.get()})}if((i=(s=Sn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Sn().gapi)!=null&&o.load)r();else{const c=kA("iframefcb");return Sn()[c]=()=>{gapi.load?r():n(kn(t,"network-request-failed"))},kb(`${IA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw _c=null,e})}let _c=null;function VR(t){return _c=_c||OR(t),_c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new el(5e3,15e3),MR="__/auth/iframe",FR="emulator/auth/iframe",UR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zR(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cm(e,FR):`https://${t.config.authDomain}/${MR}`,r={apiKey:e.apiKey,appName:t.name,v:Ws},s=$R.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Za(r).slice(1)}`}async function BR(t){const e=await VR(t),n=Sn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:zR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=kn(t,"network-request-failed"),c=Sn().setTimeout(()=>{i(o)},LR.get());function u(){Sn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qR=500,WR=600,KR="_blank",GR="http://localhost";class Z0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QR(t,e,n,r=qR,s=WR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...HR,width:r.toString(),height:s.toString(),top:i,left:o},d=vt().toLowerCase();n&&(c=_b(d)?KR:n),xb(d)&&(e=e||GR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,N])=>`${g}${w}=${N},`,"");if(yA(d)&&c!=="_self")return XR(e||"",c),new Z0(null);const m=window.open(e||"",c,f);te(m,t,"popup-blocked");try{m.focus()}catch{}return new Z0(m)}function XR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="__/auth/handler",JR="emulator/auth/handler",ZR=encodeURIComponent("fac");async function ex(t,e,n,r,s,i){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ws,eventId:s};if(e instanceof Ab){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof tl){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${ZR}=${encodeURIComponent(u)}`:"";return`${ej(t)}?${Za(c).slice(1)}${d}`}function ej({config:t}){return t.emulator?cm(t,JR):`https://${t.authDomain}/${YR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="webStorageSupport";class tj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vb,this._completeRedirectFn=TR,this._overrideRedirectResult=bR}async _openPopup(e,n,r,s){var o;sr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await ex(e,n,r,If(),s);return QR(e,i,pm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ex(e,n,r,If(),s);return sR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BR(e),r=new kR(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hh,{type:hh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[hh];i!==void 0&&n(!!i),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Tb()||vb()||dm()}}const nj=tj;var tx="@firebase/auth",nx="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ij(t){rr(new Pn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ib(t)},d=new EA(r,s,i,u);return PA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rr(new Pn("auth-internal",e=>{const n=so(e.getProvider("auth").getImmediate());return(r=>new rj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(tx,nx,sj(t)),pn(tx,nx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=5*60,aj=rb("authIdTokenMaxAge")||oj;let rx=null;const lj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aj)return;const s=n==null?void 0:n.token;rx!==s&&(rx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Bb(t=Uu()){const e=ro(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jA(t,{popupRedirectResolver:nj,persistence:[fR,tR,Vb]}),r=rb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=lj(i.toString());XA(n,o,()=>o(n.currentUser)),QA(n,c=>o(c))}}const s=eb("auth");return s&&DA(n,`http://${s}`),n}function cj(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}NA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=kn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",cj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ij("Browser");var sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,Hb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,E){function b(){}b.prototype=E.prototype,k.D=E.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(_,S,R){for(var v=Array(arguments.length-2),z=2;z<arguments.length;z++)v[z-2]=arguments[z];return E.prototype[S].apply(_,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,E,b){b||(b=0);var _=Array(16);if(typeof E=="string")for(var S=0;16>S;++S)_[S]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(S=0;16>S;++S)_[S]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=k.g[0],b=k.g[1],S=k.g[2];var R=k.g[3],v=E+(R^b&(S^R))+_[0]+3614090360&4294967295;E=b+(v<<7&4294967295|v>>>25),v=R+(S^E&(b^S))+_[1]+3905402710&4294967295,R=E+(v<<12&4294967295|v>>>20),v=S+(b^R&(E^b))+_[2]+606105819&4294967295,S=R+(v<<17&4294967295|v>>>15),v=b+(E^S&(R^E))+_[3]+3250441966&4294967295,b=S+(v<<22&4294967295|v>>>10),v=E+(R^b&(S^R))+_[4]+4118548399&4294967295,E=b+(v<<7&4294967295|v>>>25),v=R+(S^E&(b^S))+_[5]+1200080426&4294967295,R=E+(v<<12&4294967295|v>>>20),v=S+(b^R&(E^b))+_[6]+2821735955&4294967295,S=R+(v<<17&4294967295|v>>>15),v=b+(E^S&(R^E))+_[7]+4249261313&4294967295,b=S+(v<<22&4294967295|v>>>10),v=E+(R^b&(S^R))+_[8]+1770035416&4294967295,E=b+(v<<7&4294967295|v>>>25),v=R+(S^E&(b^S))+_[9]+2336552879&4294967295,R=E+(v<<12&4294967295|v>>>20),v=S+(b^R&(E^b))+_[10]+4294925233&4294967295,S=R+(v<<17&4294967295|v>>>15),v=b+(E^S&(R^E))+_[11]+2304563134&4294967295,b=S+(v<<22&4294967295|v>>>10),v=E+(R^b&(S^R))+_[12]+1804603682&4294967295,E=b+(v<<7&4294967295|v>>>25),v=R+(S^E&(b^S))+_[13]+4254626195&4294967295,R=E+(v<<12&4294967295|v>>>20),v=S+(b^R&(E^b))+_[14]+2792965006&4294967295,S=R+(v<<17&4294967295|v>>>15),v=b+(E^S&(R^E))+_[15]+1236535329&4294967295,b=S+(v<<22&4294967295|v>>>10),v=E+(S^R&(b^S))+_[1]+4129170786&4294967295,E=b+(v<<5&4294967295|v>>>27),v=R+(b^S&(E^b))+_[6]+3225465664&4294967295,R=E+(v<<9&4294967295|v>>>23),v=S+(E^b&(R^E))+_[11]+643717713&4294967295,S=R+(v<<14&4294967295|v>>>18),v=b+(R^E&(S^R))+_[0]+3921069994&4294967295,b=S+(v<<20&4294967295|v>>>12),v=E+(S^R&(b^S))+_[5]+3593408605&4294967295,E=b+(v<<5&4294967295|v>>>27),v=R+(b^S&(E^b))+_[10]+38016083&4294967295,R=E+(v<<9&4294967295|v>>>23),v=S+(E^b&(R^E))+_[15]+3634488961&4294967295,S=R+(v<<14&4294967295|v>>>18),v=b+(R^E&(S^R))+_[4]+3889429448&4294967295,b=S+(v<<20&4294967295|v>>>12),v=E+(S^R&(b^S))+_[9]+568446438&4294967295,E=b+(v<<5&4294967295|v>>>27),v=R+(b^S&(E^b))+_[14]+3275163606&4294967295,R=E+(v<<9&4294967295|v>>>23),v=S+(E^b&(R^E))+_[3]+4107603335&4294967295,S=R+(v<<14&4294967295|v>>>18),v=b+(R^E&(S^R))+_[8]+1163531501&4294967295,b=S+(v<<20&4294967295|v>>>12),v=E+(S^R&(b^S))+_[13]+2850285829&4294967295,E=b+(v<<5&4294967295|v>>>27),v=R+(b^S&(E^b))+_[2]+4243563512&4294967295,R=E+(v<<9&4294967295|v>>>23),v=S+(E^b&(R^E))+_[7]+1735328473&4294967295,S=R+(v<<14&4294967295|v>>>18),v=b+(R^E&(S^R))+_[12]+2368359562&4294967295,b=S+(v<<20&4294967295|v>>>12),v=E+(b^S^R)+_[5]+4294588738&4294967295,E=b+(v<<4&4294967295|v>>>28),v=R+(E^b^S)+_[8]+2272392833&4294967295,R=E+(v<<11&4294967295|v>>>21),v=S+(R^E^b)+_[11]+1839030562&4294967295,S=R+(v<<16&4294967295|v>>>16),v=b+(S^R^E)+_[14]+4259657740&4294967295,b=S+(v<<23&4294967295|v>>>9),v=E+(b^S^R)+_[1]+2763975236&4294967295,E=b+(v<<4&4294967295|v>>>28),v=R+(E^b^S)+_[4]+1272893353&4294967295,R=E+(v<<11&4294967295|v>>>21),v=S+(R^E^b)+_[7]+4139469664&4294967295,S=R+(v<<16&4294967295|v>>>16),v=b+(S^R^E)+_[10]+3200236656&4294967295,b=S+(v<<23&4294967295|v>>>9),v=E+(b^S^R)+_[13]+681279174&4294967295,E=b+(v<<4&4294967295|v>>>28),v=R+(E^b^S)+_[0]+3936430074&4294967295,R=E+(v<<11&4294967295|v>>>21),v=S+(R^E^b)+_[3]+3572445317&4294967295,S=R+(v<<16&4294967295|v>>>16),v=b+(S^R^E)+_[6]+76029189&4294967295,b=S+(v<<23&4294967295|v>>>9),v=E+(b^S^R)+_[9]+3654602809&4294967295,E=b+(v<<4&4294967295|v>>>28),v=R+(E^b^S)+_[12]+3873151461&4294967295,R=E+(v<<11&4294967295|v>>>21),v=S+(R^E^b)+_[15]+530742520&4294967295,S=R+(v<<16&4294967295|v>>>16),v=b+(S^R^E)+_[2]+3299628645&4294967295,b=S+(v<<23&4294967295|v>>>9),v=E+(S^(b|~R))+_[0]+4096336452&4294967295,E=b+(v<<6&4294967295|v>>>26),v=R+(b^(E|~S))+_[7]+1126891415&4294967295,R=E+(v<<10&4294967295|v>>>22),v=S+(E^(R|~b))+_[14]+2878612391&4294967295,S=R+(v<<15&4294967295|v>>>17),v=b+(R^(S|~E))+_[5]+4237533241&4294967295,b=S+(v<<21&4294967295|v>>>11),v=E+(S^(b|~R))+_[12]+1700485571&4294967295,E=b+(v<<6&4294967295|v>>>26),v=R+(b^(E|~S))+_[3]+2399980690&4294967295,R=E+(v<<10&4294967295|v>>>22),v=S+(E^(R|~b))+_[10]+4293915773&4294967295,S=R+(v<<15&4294967295|v>>>17),v=b+(R^(S|~E))+_[1]+2240044497&4294967295,b=S+(v<<21&4294967295|v>>>11),v=E+(S^(b|~R))+_[8]+1873313359&4294967295,E=b+(v<<6&4294967295|v>>>26),v=R+(b^(E|~S))+_[15]+4264355552&4294967295,R=E+(v<<10&4294967295|v>>>22),v=S+(E^(R|~b))+_[6]+2734768916&4294967295,S=R+(v<<15&4294967295|v>>>17),v=b+(R^(S|~E))+_[13]+1309151649&4294967295,b=S+(v<<21&4294967295|v>>>11),v=E+(S^(b|~R))+_[4]+4149444226&4294967295,E=b+(v<<6&4294967295|v>>>26),v=R+(b^(E|~S))+_[11]+3174756917&4294967295,R=E+(v<<10&4294967295|v>>>22),v=S+(E^(R|~b))+_[2]+718787259&4294967295,S=R+(v<<15&4294967295|v>>>17),v=b+(R^(S|~E))+_[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(S+(v<<21&4294967295|v>>>11))&4294967295,k.g[2]=k.g[2]+S&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.u=function(k,E){E===void 0&&(E=k.length);for(var b=E-this.blockSize,_=this.B,S=this.h,R=0;R<E;){if(S==0)for(;R<=b;)s(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<E;)if(_[S++]=k.charCodeAt(R++),S==this.blockSize){s(this,_),S=0;break}}else for(;R<E;)if(_[S++]=k[R++],S==this.blockSize){s(this,_),S=0;break}}this.h=S,this.o+=E},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;var b=8*this.o;for(E=k.length-8;E<k.length;++E)k[E]=b&255,b/=256;for(this.u(k),k=Array(16),E=b=0;4>E;++E)for(var _=0;32>_;_+=8)k[b++]=this.g[E]>>>_&255;return k};function i(k,E){var b=c;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=E(k)}function o(k,E){this.h=E;for(var b=[],_=!0,S=k.length-1;0<=S;S--){var R=k[S]|0;_&&R==E||(b[S]=R,_=!1)}this.g=b}var c={};function u(k){return-128<=k&&128>k?i(k,function(E){return new o([E|0],0>E?-1:0)}):new o([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return A(d(-k));for(var E=[],b=1,_=0;k>=b;_++)E[_]=k/b|0,b*=4294967296;return new o(E,0)}function f(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return A(f(k.substring(1),E));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(E,8)),_=m,S=0;S<k.length;S+=8){var R=Math.min(8,k.length-S),v=parseInt(k.substring(S,S+R),E);8>R?(R=d(Math.pow(E,R)),_=_.j(R).add(d(v))):(_=_.j(b),_=_.add(d(v)))}return _}var m=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-A(this).m();for(var k=0,E=1,b=0;b<this.g.length;b++){var _=this.i(b);k+=(0<=_?_:4294967296+_)*E,E*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(C(this))return"-"+A(this).toString(k);for(var E=d(Math.pow(k,6)),b=this,_="";;){var S=D(b,E).g;b=x(b,S.j(E));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=S,N(b))return R+_;for(;6>R.length;)R="0"+R;_=R+_}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(var E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=x(this,k),C(k)?-1:N(k)?0:1};function A(k){for(var E=k.g.length,b=[],_=0;_<E;_++)b[_]=~k.g[_];return new o(b,~k.h).add(g)}t.abs=function(){return C(this)?A(this):this},t.add=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],_=0,S=0;S<=E;S++){var R=_+(this.i(S)&65535)+(k.i(S)&65535),v=(R>>>16)+(this.i(S)>>>16)+(k.i(S)>>>16);_=v>>>16,R&=65535,v&=65535,b[S]=v<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function x(k,E){return k.add(A(E))}t.j=function(k){if(N(this)||N(k))return m;if(C(this))return C(k)?A(this).j(A(k)):A(A(this).j(k));if(C(k))return A(this.j(A(k)));if(0>this.l(w)&&0>k.l(w))return d(this.m()*k.m());for(var E=this.g.length+k.g.length,b=[],_=0;_<2*E;_++)b[_]=0;for(_=0;_<this.g.length;_++)for(var S=0;S<k.g.length;S++){var R=this.i(_)>>>16,v=this.i(_)&65535,z=k.i(S)>>>16,pe=k.i(S)&65535;b[2*_+2*S]+=v*pe,y(b,2*_+2*S),b[2*_+2*S+1]+=R*pe,y(b,2*_+2*S+1),b[2*_+2*S+1]+=v*z,y(b,2*_+2*S+1),b[2*_+2*S+2]+=R*z,y(b,2*_+2*S+2)}for(_=0;_<E;_++)b[_]=b[2*_+1]<<16|b[2*_];for(_=E;_<2*E;_++)b[_]=0;return new o(b,0)};function y(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function I(k,E){this.g=k,this.h=E}function D(k,E){if(N(E))throw Error("division by zero");if(N(k))return new I(m,m);if(C(k))return E=D(A(k),E),new I(A(E.g),A(E.h));if(C(E))return E=D(k,A(E)),new I(A(E.g),E.h);if(30<k.g.length){if(C(k)||C(E))throw Error("slowDivide_ only works with positive integers.");for(var b=g,_=E;0>=_.l(k);)b=P(b),_=P(_);var S=L(b,1),R=L(_,1);for(_=L(_,2),b=L(b,2);!N(_);){var v=R.add(_);0>=v.l(k)&&(S=S.add(b),R=v),_=L(_,1),b=L(b,1)}return E=x(k,S.j(E)),new I(S,E)}for(S=m;0<=k.l(E);){for(b=Math.max(1,Math.floor(k.m()/E.m())),_=Math.ceil(Math.log(b)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),R=d(b),v=R.j(E);C(v)||0<v.l(k);)b-=_,R=d(b),v=R.j(E);N(R)&&(R=g),S=S.add(R),k=x(k,v)}return new I(S,k)}t.A=function(k){return D(this,k).h},t.and=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],_=0;_<E;_++)b[_]=this.i(_)&k.i(_);return new o(b,this.h&k.h)},t.or=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],_=0;_<E;_++)b[_]=this.i(_)|k.i(_);return new o(b,this.h|k.h)},t.xor=function(k){for(var E=Math.max(this.g.length,k.g.length),b=[],_=0;_<E;_++)b[_]=this.i(_)^k.i(_);return new o(b,this.h^k.h)};function P(k){for(var E=k.g.length+1,b=[],_=0;_<E;_++)b[_]=k.i(_)<<1|k.i(_-1)>>>31;return new o(b,k.h)}function L(k,E){var b=E>>5;E%=32;for(var _=k.g.length-b,S=[],R=0;R<_;R++)S[R]=0<E?k.i(R+b)>>>E|k.i(R+b+1)<<32-E:k.i(R+b);return new o(S,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,$r=o}).apply(typeof sx<"u"?sx:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qb,Bo,Wb,wc,Cf,Kb,Gb,Qb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var O=l[T];if(!(O in p))break e;p=p[O]}l=l[l.length-1],T=p[l],h=h(T),h!=T&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,T=!1,O={next:function(){if(!T&&p<l.length){var M=p++;return{value:h(M,l[M]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function w(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function N(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(T,O,M){for(var K=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)K[Ee-2]=arguments[Ee];return h.prototype[O].apply(T,K)}}function C(l){const h=l.length;if(0<h){const p=Array(h);for(let T=0;T<h;T++)p[T]=l[T];return p}return[]}function A(l,h){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(u(T)){const O=l.length||0,M=T.length||0;l.length=O+M;for(let K=0;K<M;K++)l[O+K]=T[K]}else l.push(T)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function y(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var P=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function L(l,h,p){for(const T in l)h.call(p,l[T],T,l)}function k(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function E(l){const h={};for(const p in l)h[p]=l[p];return h}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(l,h){let p,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(p in T)l[p]=T[p];for(let M=0;M<b.length;M++)p=b[M],Object.prototype.hasOwnProperty.call(T,p)&&(l[p]=T[p])}}function S(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function R(l){c.setTimeout(()=>{throw l},0)}function v(){var l=V;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class z{constructor(){this.h=this.g=null}add(h,p){const T=pe.get();T.set(h,p),this.h?this.h.next=T:this.g=T,this.h=T}}var pe=new x(()=>new ye,l=>l.reset());class ye{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let se,W=!1,V=new z,B=()=>{const l=c.Promise.resolve(void 0);se=()=>{l.then(Y)}};var Y=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(p){R(p)}var h=pe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}W=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Ke=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function rn(l,h){if(Z.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(P){e:{try{D(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:sn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&rn.aa.h.call(this)}}N(rn,Z);var sn={2:"touch",3:"pen",4:"mouse"};rn.prototype.h=function(){rn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),ul=0;function hd(l,h,p,T,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!T,this.ha=O,this.key=++ul,this.da=this.fa=!1}function hs(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ys(l){this.src=l,this.g={},this.h=0}Ys.prototype.add=function(l,h,p,T,O){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var K=$(l,h,T,O);return-1<K?(h=l[K],p||(h.fa=!1)):(h=new hd(h,this.src,M,!!T,O),h.fa=p,l.push(h)),h};function ho(l,h){var p=h.type;if(p in l.g){var T=l.g[p],O=Array.prototype.indexOf.call(T,h,void 0),M;(M=0<=O)&&Array.prototype.splice.call(T,O,1),M&&(hs(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function $(l,h,p,T){for(var O=0;O<l.length;++O){var M=l[O];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==T)return O}return-1}var he="closure_lm_"+(1e6*Math.random()|0),be={};function Ge(l,h,p,T,O){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Ge(l,h[M],p,T,O);return null}return p=gg(p),l&&l[qt]?l.K(h,p,d(T)?!!T.capture:!1,O):xe(l,h,p,!1,T,O)}function xe(l,h,p,T,O,M){if(!h)throw Error("Invalid event type");var K=d(O)?!!O.capture:!!O,Ee=pd(l);if(Ee||(l[he]=Ee=new Ys(l)),p=Ee.add(h,p,T,K,M),p.proxy)return p;if(T=fo(),p.proxy=T,T.src=l,T.listener=p,l.addEventListener)Ke||(O=K),O===void 0&&(O=!1),l.addEventListener(h.toString(),T,O);else if(l.attachEvent)l.attachEvent(mg(h.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function fo(){function l(p){return h.call(l.src,l.listener,p)}const h=nN;return l}function pg(l,h,p,T,O){if(Array.isArray(h))for(var M=0;M<h.length;M++)pg(l,h[M],p,T,O);else T=d(T)?!!T.capture:!!T,p=gg(p),l&&l[qt]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],p=$(M,p,T,O),-1<p&&(hs(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=pd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=$(h,p,T,O)),(p=-1<l?h[l]:null)&&fd(p))}function fd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[qt])ho(h.i,l);else{var p=l.type,T=l.proxy;h.removeEventListener?h.removeEventListener(p,T,l.capture):h.detachEvent?h.detachEvent(mg(p),T):h.addListener&&h.removeListener&&h.removeListener(T),(p=pd(h))?(ho(p,l),p.h==0&&(p.src=null,h[he]=null)):hs(l)}}}function mg(l){return l in be?be[l]:be[l]="on"+l}function nN(l,h){if(l.da)l=!0;else{h=new rn(h,this);var p=l.listener,T=l.ha||l.src;l.fa&&fd(l),l=p.call(T,h)}return l}function pd(l){return l=l[he],l instanceof Ys?l:null}var md="__closure_events_fn_"+(1e9*Math.random()>>>0);function gg(l){return typeof l=="function"?l:(l[md]||(l[md]=function(h){return l.handleEvent(h)}),l[md])}function ct(){ee.call(this),this.i=new Ys(this),this.M=this,this.F=null}N(ct,ee),ct.prototype[qt]=!0,ct.prototype.removeEventListener=function(l,h,p,T){pg(this,l,h,p,T)};function _t(l,h){var p,T=l.F;if(T)for(p=[];T;T=T.F)p.push(T);if(l=l.M,T=h.type||h,typeof h=="string")h=new Z(h,l);else if(h instanceof Z)h.target=h.target||l;else{var O=h;h=new Z(T,l),_(h,O)}if(O=!0,p)for(var M=p.length-1;0<=M;M--){var K=h.g=p[M];O=dl(K,T,!0,h)&&O}if(K=h.g=l,O=dl(K,T,!0,h)&&O,O=dl(K,T,!1,h)&&O,p)for(M=0;M<p.length;M++)K=h.g=p[M],O=dl(K,T,!1,h)&&O}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],T=0;T<p.length;T++)hs(p[T]);delete l.g[h],l.h--}}this.F=null},ct.prototype.K=function(l,h,p,T){return this.i.add(String(l),h,!1,p,T)},ct.prototype.L=function(l,h,p,T){return this.i.add(String(l),h,!0,p,T)};function dl(l,h,p,T){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,M=0;M<h.length;++M){var K=h[M];if(K&&!K.da&&K.capture==p){var Ee=K.listener,nt=K.ha||K.src;K.fa&&ho(l.i,K),O=Ee.call(nt,T)!==!1&&O}}return O&&!T.defaultPrevented}function yg(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function xg(l){l.g=yg(()=>{l.g=null,l.i&&(l.i=!1,xg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class rN extends ee{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:xg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function po(l){ee.call(this),this.h=l,this.g={}}N(po,ee);var vg=[];function _g(l){L(l.g,function(h,p){this.g.hasOwnProperty(p)&&fd(h)},l),l.g={}}po.prototype.N=function(){po.aa.N.call(this),_g(this)},po.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gd=c.JSON.stringify,sN=c.JSON.parse,iN=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function yd(){}yd.prototype.h=null;function wg(l){return l.h||(l.h=l.i())}function bg(){}var mo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xd(){Z.call(this,"d")}N(xd,Z);function vd(){Z.call(this,"c")}N(vd,Z);var fs={},Eg=null;function hl(){return Eg=Eg||new ct}fs.La="serverreachability";function Ng(l){Z.call(this,fs.La,l)}N(Ng,Z);function go(l){const h=hl();_t(h,new Ng(h))}fs.STAT_EVENT="statevent";function Tg(l,h){Z.call(this,fs.STAT_EVENT,l),this.stat=h}N(Tg,Z);function wt(l){const h=hl();_t(h,new Tg(h,l))}fs.Ma="timingevent";function Ig(l,h){Z.call(this,fs.Ma,l),this.size=h}N(Ig,Z);function yo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function xo(){this.g=!0}xo.prototype.xa=function(){this.g=!1};function oN(l,h,p,T,O,M){l.info(function(){if(l.g)if(M)for(var K="",Ee=M.split("&"),nt=0;nt<Ee.length;nt++){var ge=Ee[nt].split("=");if(1<ge.length){var ut=ge[0];ge=ge[1];var dt=ut.split("_");K=2<=dt.length&&dt[1]=="type"?K+(ut+"="+ge+"&"):K+(ut+"=redacted&")}}else K=null;else K=M;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+h+`
`+p+`
`+K})}function aN(l,h,p,T,O,M,K){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+h+`
`+p+`
`+M+" "+K})}function Js(l,h,p,T){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+cN(l,p)+(T?" "+T:"")})}function lN(l,h){l.info(function(){return"TIMEOUT: "+h})}xo.prototype.info=function(){};function cN(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var T=p[l];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var M=O[0];if(M!="noop"&&M!="stop"&&M!="close")for(var K=1;K<O.length;K++)O[K]=""}}}}return gd(p)}catch{return h}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_d;function pl(){}N(pl,yd),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},_d=new pl;function cr(l,h,p,T){this.j=l,this.i=h,this.l=p,this.R=T||1,this.U=new po(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sg}function Sg(){this.i=null,this.g="",this.h=!1}var Cg={},wd={};function bd(l,h,p){l.L=1,l.v=xl(Mn(h)),l.m=p,l.P=!0,Ag(l,null)}function Ag(l,h){l.F=Date.now(),ml(l),l.A=Mn(l.v);var p=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Hg(p.i,"t",T),l.C=0,p=l.j.J,l.h=new Sg,l.g=ly(l.j,p?h:null,!l.m),0<l.O&&(l.M=new rN(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,T=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(vg[0]=O.toString()),O=vg);for(var M=0;M<O.length;M++){var K=Ge(p,O[M],T||h.handleEvent,!1,h.h||h);if(!K)break;h.g[K.key]=K}h=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),go(),oN(l.i,l.u,l.A,l.l,l.R,l.m)}cr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Fn(l)==3?h.j():this.Y(l)},cr.prototype.Y=function(l){try{if(l==this.g)e:{const dt=Fn(this.g);var h=this.g.Ba();const ti=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||Yg(this.g)))){this.J||dt!=4||h==7||(h==8||0>=ti?go(3):go(2)),Ed(this);var p=this.g.Z();this.X=p;t:if(Rg(this)){var T=Yg(this.g);l="";var O=T.length,M=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),vo(this);var K="";break t}this.h.i=new c.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(T[h],{stream:!(M&&h==O-1)});T.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=p==200,aN(this.i,this.u,this.A,this.l,this.R,dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,nt=this.g;if((Ee=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ee)){var ge=Ee;break t}}ge=null}if(p=ge)Js(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nd(this,p);else{this.o=!1,this.s=3,wt(12),ps(this),vo(this);break e}}if(this.P){p=!0;let on;for(;!this.J&&this.C<K.length;)if(on=uN(this,K),on==wd){dt==4&&(this.s=4,wt(14),p=!1),Js(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Cg){this.s=4,wt(15),Js(this.i,this.l,K,"[Invalid Chunk]"),p=!1;break}else Js(this.i,this.l,on,null),Nd(this,on);if(Rg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||K.length!=0||this.h.h||(this.s=1,wt(16),p=!1),this.o=this.o&&p,!p)Js(this.i,this.l,K,"[Invalid Chunked Response]"),ps(this),vo(this);else if(0<K.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Ad(ut),ut.M=!0,wt(11))}}else Js(this.i,this.l,K,null),Nd(this,K);dt==4&&ps(this),this.o&&!this.J&&(dt==4?sy(this.j,this):(this.o=!1,ml(this)))}else kN(this.g),p==400&&0<K.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ps(this),vo(this)}}}catch{}finally{}};function Rg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function uN(l,h){var p=l.C,T=h.indexOf(`
`,p);return T==-1?wd:(p=Number(h.substring(p,T)),isNaN(p)?Cg:(T+=1,T+p>h.length?wd:(h=h.slice(T,T+p),l.C=T+p,h)))}cr.prototype.cancel=function(){this.J=!0,ps(this)};function ml(l){l.S=Date.now()+l.I,jg(l,l.I)}function jg(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=yo(g(l.ba,l),h)}function Ed(l){l.B&&(c.clearTimeout(l.B),l.B=null)}cr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(lN(this.i,this.A),this.L!=2&&(go(),wt(17)),ps(this),this.s=2,vo(this)):jg(this,this.S-l)};function vo(l){l.j.G==0||l.J||sy(l.j,l)}function ps(l){Ed(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,_g(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Nd(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Td(p.h,l))){if(!l.K&&Td(p.h,l)&&p.G==3){try{var T=p.Da.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Nl(p),bl(p);else break e;Cd(p),wt(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=yo(g(p.Za,p),6e3));if(1>=Og(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else gs(p,11)}else if((l.K||p.g==l)&&Nl(p),!y(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let ge=O[h];if(p.T=ge[0],ge=ge[1],p.G==2)if(ge[0]=="c"){p.K=ge[1],p.ia=ge[2];const ut=ge[3];ut!=null&&(p.la=ut,p.j.info("VER="+p.la));const dt=ge[4];dt!=null&&(p.Aa=dt,p.j.info("SVER="+p.Aa));const ti=ge[5];ti!=null&&typeof ti=="number"&&0<ti&&(T=1.5*ti,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const on=l.g;if(on){const Il=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var M=T.h;M.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Id(M,M.h),M.h=null))}if(T.D){const Rd=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Rd&&(T.ya=Rd,Ie(T.I,T.D,Rd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var K=l;if(T.qa=ay(T,T.J?T.ia:null,T.W),K.K){Vg(T.h,K);var Ee=K,nt=T.L;nt&&(Ee.I=nt),Ee.B&&(Ed(Ee),ml(Ee)),T.g=K}else ny(T);0<p.i.length&&El(p)}else ge[0]!="stop"&&ge[0]!="close"||gs(p,7);else p.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?gs(p,7):Sd(p):ge[0]!="noop"&&p.l&&p.l.ta(ge),p.v=0)}}go(4)}catch{}}var dN=class{constructor(l,h){this.g=l,this.map=h}};function Pg(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Og(l){return l.h?1:l.g?l.g.size:0}function Td(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Id(l,h){l.g?l.g.add(h):l.h=h}function Vg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Pg.prototype.cancel=function(){if(this.i=Lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Lg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return C(l.i)}function hN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,T=0;T<p;T++)h.push(l[T]);return h}h=[],p=0;for(T in l)h[p++]=l[T];return h}function fN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const T in l)h[p++]=T;return h}}}function Mg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=fN(l),T=hN(l),O=T.length,M=0;M<O;M++)h.call(void 0,T[M],p&&p[M],l)}var Fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pN(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var T=l[p].indexOf("="),O=null;if(0<=T){var M=l[p].substring(0,T);O=l[p].substring(T+1)}else M=l[p];h(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ms(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ms){this.h=l.h,gl(this,l.j),this.o=l.o,this.g=l.g,yl(this,l.s),this.l=l.l;var h=l.i,p=new bo;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Ug(this,p),this.m=l.m}else l&&(h=String(l).match(Fg))?(this.h=!1,gl(this,h[1]||"",!0),this.o=_o(h[2]||""),this.g=_o(h[3]||"",!0),yl(this,h[4]),this.l=_o(h[5]||"",!0),Ug(this,h[6]||"",!0),this.m=_o(h[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}ms.prototype.toString=function(){var l=[],h=this.j;h&&l.push(wo(h,$g,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(wo(h,$g,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(wo(p,p.charAt(0)=="/"?yN:gN,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",wo(p,vN)),l.join("")};function Mn(l){return new ms(l)}function gl(l,h,p){l.j=p?_o(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function yl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Ug(l,h,p){h instanceof bo?(l.i=h,_N(l.i,l.h)):(p||(h=wo(h,xN)),l.i=new bo(h,l.h))}function Ie(l,h,p){l.i.set(h,p)}function xl(l){return Ie(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function _o(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function wo(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,mN),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function mN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var $g=/[#\/\?@]/g,gN=/[#\?:]/g,yN=/[#\?]/g,xN=/[#\?@]/g,vN=/#/g;function bo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function ur(l){l.g||(l.g=new Map,l.h=0,l.i&&pN(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=bo.prototype,t.add=function(l,h){ur(this),this.i=null,l=Zs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function zg(l,h){ur(l),h=Zs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Bg(l,h){return ur(l),h=Zs(l,h),l.g.has(h)}t.forEach=function(l,h){ur(this),this.g.forEach(function(p,T){p.forEach(function(O){l.call(h,O,T,this)},this)},this)},t.na=function(){ur(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let T=0;T<h.length;T++){const O=l[T];for(let M=0;M<O.length;M++)p.push(h[T])}return p},t.V=function(l){ur(this);let h=[];if(typeof l=="string")Bg(this,l)&&(h=h.concat(this.g.get(Zs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return ur(this),this.i=null,l=Zs(this,l),Bg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Hg(l,h,p){zg(l,h),0<p.length&&(l.i=null,l.g.set(Zs(l,h),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var T=h[p];const M=encodeURIComponent(String(T)),K=this.V(T);for(T=0;T<K.length;T++){var O=M;K[T]!==""&&(O+="="+encodeURIComponent(String(K[T]))),l.push(O)}}return this.i=l.join("&")};function Zs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function _N(l,h){h&&!l.j&&(ur(l),l.i=null,l.g.forEach(function(p,T){var O=T.toLowerCase();T!=O&&(zg(this,T),Hg(this,O,p))},l)),l.j=h}function wN(l,h){const p=new xo;if(c.Image){const T=new Image;T.onload=w(dr,p,"TestLoadImage: loaded",!0,h,T),T.onerror=w(dr,p,"TestLoadImage: error",!1,h,T),T.onabort=w(dr,p,"TestLoadImage: abort",!1,h,T),T.ontimeout=w(dr,p,"TestLoadImage: timeout",!1,h,T),c.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else h(!1)}function bN(l,h){const p=new xo,T=new AbortController,O=setTimeout(()=>{T.abort(),dr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:T.signal}).then(M=>{clearTimeout(O),M.ok?dr(p,"TestPingServer: ok",!0,h):dr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),dr(p,"TestPingServer: error",!1,h)})}function dr(l,h,p,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(p)}catch{}}function EN(){this.g=new iN}function NN(l,h,p){const T=p||"";try{Mg(l,function(O,M){let K=O;d(O)&&(K=gd(O)),h.push(T+M+"="+encodeURIComponent(K))})}catch(O){throw h.push(T+"type="+encodeURIComponent("_badmap")),O}}function vl(l){this.l=l.Ub||null,this.j=l.eb||!1}N(vl,yd),vl.prototype.g=function(){return new _l(this.l,this.j)},vl.prototype.i=function(l){return function(){return l}}({});function _l(l,h){ct.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(_l,ct),t=_l.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,No(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Eo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function qg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Eo(this):No(this),this.readyState==3&&qg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Eo(this))},t.Qa=function(l){this.g&&(this.response=l,Eo(this))},t.ga=function(){this.g&&Eo(this)};function Eo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,No(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function No(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Wg(l){let h="";return L(l,function(p,T){h+=T,h+=":",h+=p,h+=`\r
`}),h}function kd(l,h,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=Wg(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ie(l,h,p))}function Ve(l){ct.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ve,ct);var TN=/^https?$/i,IN=["POST","PUT"];t=Ve.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_d.g(),this.v=this.o?wg(this.o):wg(_d),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){Kg(this,M);return}if(l=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)p.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())p.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),O=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(IN,h,void 0))||T||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,K]of p)this.g.setRequestHeader(M,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xg(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){Kg(this,M)}};function Kg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Gg(l),wl(l)}function Gg(l){l.A||(l.A=!0,_t(l,"complete"),_t(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_t(this,"complete"),_t(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qg(this):this.bb())},t.bb=function(){Qg(this)};function Qg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Fn(l)!=4||l.Z()!=2)){if(l.u&&Fn(l)==4)yg(l.Ea,0,l);else if(_t(l,"readystatechange"),Fn(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var T;if(T=K===0){var O=String(l.D).match(Fg)[1]||null;!O&&c.self&&c.self.location&&(O=c.self.location.protocol.slice(0,-1)),T=!TN.test(O?O.toLowerCase():"")}p=T}if(p)_t(l,"complete"),_t(l,"success");else{l.m=6;try{var M=2<Fn(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",Gg(l)}}finally{wl(l)}}}}function wl(l,h){if(l.g){Xg(l);const p=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||_t(l,"ready");try{p.onreadystatechange=T}catch{}}}function Xg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Fn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),sN(h)}};function Yg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function kN(l){const h={};l=(l.g&&2<=Fn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(y(l[T]))continue;var p=S(l[T]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[O]||[];h[O]=M,M.push(p)}k(h,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function To(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Jg(l){this.Aa=0,this.i=[],this.j=new xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=To("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=To("baseRetryDelayMs",5e3,l),this.cb=To("retryDelaySeedMs",1e4,l),this.Wa=To("forwardChannelMaxRetries",2,l),this.wa=To("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Pg(l&&l.concurrentRequestLimit),this.Da=new EN,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,T){wt(0),this.W=l,this.H=h||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=ay(this,null,this.W),El(this)};function Sd(l){if(Zg(l),l.G==3){var h=l.U++,p=Mn(l.I);if(Ie(p,"SID",l.K),Ie(p,"RID",h),Ie(p,"TYPE","terminate"),Io(l,p),h=new cr(l,l.j,h),h.L=2,h.v=xl(Mn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=ly(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ml(h)}oy(l)}function bl(l){l.g&&(Ad(l),l.g.cancel(),l.g=null)}function Zg(l){bl(l),l.u&&(c.clearTimeout(l.u),l.u=null),Nl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function El(l){if(!Dg(l.h)&&!l.s){l.s=!0;var h=l.Ga;se||B(),W||(se(),W=!0),V.add(h,l),l.B=0}}function SN(l,h){return Og(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=yo(g(l.Ga,l,h),iy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new cr(this,this.j,l);let M=this.o;if(this.S&&(M?(M=E(M),_(M,this.S)):M=this.S),this.m!==null||this.O||(O.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(h+=T,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ty(this,O,h),p=Mn(this.I),Ie(p,"RID",l),Ie(p,"CVER",22),this.D&&Ie(p,"X-HTTP-Session-Id",this.D),Io(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(Wg(M)))+"&"+h:this.m&&kd(p,this.m,M)),Id(this.h,O),this.Ua&&Ie(p,"TYPE","init"),this.P?(Ie(p,"$req",h),Ie(p,"SID","null"),O.T=!0,bd(O,p,null)):bd(O,p,h),this.G=2}}else this.G==3&&(l?ey(this,l):this.i.length==0||Dg(this.h)||ey(this))};function ey(l,h){var p;h?p=h.l:p=l.U++;const T=Mn(l.I);Ie(T,"SID",l.K),Ie(T,"RID",p),Ie(T,"AID",l.T),Io(l,T),l.m&&l.o&&kd(T,l.m,l.o),p=new cr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=ty(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Id(l.h,p),bd(p,T,h)}function Io(l,h){l.H&&L(l.H,function(p,T){Ie(h,T,p)}),l.l&&Mg({},function(p,T){Ie(h,T,p)})}function ty(l,h,p){p=Math.min(l.i.length,p);var T=l.l?g(l.l.Na,l.l,l):null;e:{var O=l.i;let M=-1;for(;;){const K=["count="+p];M==-1?0<p?(M=O[0].g,K.push("ofs="+M)):M=0:K.push("ofs="+M);let Ee=!0;for(let nt=0;nt<p;nt++){let ge=O[nt].g;const ut=O[nt].map;if(ge-=M,0>ge)M=Math.max(0,O[nt].g-100),Ee=!1;else try{NN(ut,K,"req"+ge+"_")}catch{T&&T(ut)}}if(Ee){T=K.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,T}function ny(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;se||B(),W||(se(),W=!0),V.add(h,l),l.v=0}}function Cd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=yo(g(l.Fa,l),iy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,ry(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=yo(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),bl(this),ry(this))};function Ad(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function ry(l){l.g=new cr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Mn(l.qa);Ie(h,"RID","rpc"),Ie(h,"SID",l.K),Ie(h,"AID",l.T),Ie(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ie(h,"TO",l.ja),Ie(h,"TYPE","xmlhttp"),Io(l,h),l.m&&l.o&&kd(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=xl(Mn(h)),p.m=null,p.P=!0,Ag(p,l)}t.Za=function(){this.C!=null&&(this.C=null,bl(this),Cd(this),wt(19))};function Nl(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function sy(l,h){var p=null;if(l.g==h){Nl(l),Ad(l),l.g=null;var T=2}else if(Td(l.h,h))p=h.D,Vg(l.h,h),T=1;else return;if(l.G!=0){if(h.o)if(T==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;T=hl(),_t(T,new Ig(T,p)),El(l)}else ny(l);else if(O=h.s,O==3||O==0&&0<h.X||!(T==1&&SN(l,h)||T==2&&Cd(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),O){case 1:gs(l,5);break;case 4:gs(l,10);break;case 3:gs(l,6);break;default:gs(l,2)}}}function iy(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function gs(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),T=l.Xa;const O=!T;T=new ms(T||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gl(T,"https"),xl(T),O?wN(T.toString(),p):bN(T.toString(),p)}else wt(2);l.G=0,l.l&&l.l.sa(h),oy(l),Zg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function oy(l){if(l.G=0,l.ka=[],l.l){const h=Lg(l.h);(h.length!=0||l.i.length!=0)&&(A(l.ka,h),A(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function ay(l,h,p){var T=p instanceof ms?Mn(p):new ms(p);if(T.g!="")h&&(T.g=h+"."+T.g),yl(T,T.s);else{var O=c.location;T=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var M=new ms(null);T&&gl(M,T),h&&(M.g=h),O&&yl(M,O),p&&(M.l=p),T=M}return p=l.D,h=l.ya,p&&h&&Ie(T,p,h),Ie(T,"VER",l.la),Io(l,T),T}function ly(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ve(new vl({eb:p})):new Ve(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cy(){}t=cy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(l,h){return new Vt(l,h)};function Vt(l,h){ct.call(this),this.g=new Jg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!y(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ei(this)}N(Vt,ct),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Sd(this.g)},Vt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=gd(l),l=p);h.i.push(new dN(h.Ya++,l)),h.G==3&&El(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Sd(this.g),delete this.g,Vt.aa.N.call(this)};function uy(l){xd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}N(uy,xd);function dy(){vd.call(this),this.status=1}N(dy,vd);function ei(l){this.g=l}N(ei,cy),ei.prototype.ua=function(){_t(this.g,"a")},ei.prototype.ta=function(l){_t(this.g,new uy(l))},ei.prototype.sa=function(l){_t(this.g,new dy)},ei.prototype.ra=function(){_t(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Qb=function(){return new Tl},Gb=function(){return hl()},Kb=fs,Cf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,wc=fl,kg.COMPLETE="complete",Wb=kg,bg.EventType=mo,mo.OPEN="a",mo.CLOSE="b",mo.ERROR="c",mo.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Bo=bg,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,qb=Ve}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const ix="@firebase/firestore",ox="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Fu("@firebase/firestore");function ri(){return Us.logLevel}function Q(t,...e){if(Us.logLevel<=le.DEBUG){const n=e.map(gm);Us.debug(`Firestore (${oo}): ${t}`,...n)}}function ir(t,...e){if(Us.logLevel<=le.ERROR){const n=e.map(gm);Us.error(`Firestore (${oo}): ${t}`,...n)}}function $i(t,...e){if(Us.logLevel<=le.WARN){const n=e.map(gm);Us.warn(`Firestore (${oo}): ${t}`,...n)}}function gm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Xb(t,r,n)}function Xb(t,e,n){let r=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function _e(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Xb(e,s,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class uj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class dj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hj{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string",31837,{l:r}),new Yb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class fj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new fj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ax{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ax(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ax(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=gj(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Af(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fh(s)===fh(i)?ce(s,i):fh(s)?1:-1}return ce(t.length,e.length)}const yj=55296,xj=57343;function fh(t){const e=t.charCodeAt(0);return e>=yj&&e<=xj}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="__name__";class bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=bn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ce(e.length,n.length)}static compareSegments(e,n){const r=bn.isNumericId(e),s=bn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?bn.extractNumericId(e).compare(bn.extractNumericId(n)):Af(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $r.fromString(e.substring(4,e.length-2))}}class Ne extends bn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends bn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return vj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lx}static keyField(){return new it([lx])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ne.fromString(e))}static fromName(e){return new J(Ne.fromString(e).popFirst(5))}static empty(){return new J(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _j(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cx(t){if(!J.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ux(t){if(J.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qu(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function rl(t,e){if(!Zb(t))throw new G(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=-62135596800,hx=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hx);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dx)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hx}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rl(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:We("string",ve._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new ve(0,0))}static max(){return new re(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=-1;function wj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new Kr(s,J.empty(),e)}function bj(t){return new Kr(t.readTime,t.key,ja)}class Kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kr(re.min(),J.empty(),ja)}static max(){return new Kr(re.max(),J.empty(),ja)}}function Ej(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Nj)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ij(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=-1;function Ku(t){return t==null}function au(t){return t===0&&1/t==-1/0}function kj(t){return typeof t=="number"&&Number.isInteger(t)&&!au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="";function Sj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fx(e)),e=Cj(t.get(n),e);return fx(e)}function Cj(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case e1:n+="";break;default:n+=i}}return n}function fx(t){return t+e1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gl(this.root,e,this.comparator,!0)}}class Gl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??st.RED,this.left=s??st.EMPTY,this.right=i??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new st(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return st.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mx(this.data.getIterator())}getIteratorFrom(e){return new mx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class mx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Ye(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new n1("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const Aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=Aj.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="server_timestamp",s1="__type__",i1="__previous_value__",o1="__local_write_time__";function vm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[s1])==null?void 0:r.stringValue)===r1}function Gu(t){const e=t.mapValue.fields[i1];return vm(e)?Gu(e):e}function Pa(t){const e=Gr(t.mapValue.fields[o1].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const lu="(default)";class Da{constructor(e,n){this.projectId=e,this.database=n||lu}static empty(){return new Da("","")}get isDefaultDatabase(){return this.database===lu}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="__type__",jj="__max__",Ql={mapValue:{}},l1="__vector__",cu="value";function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vm(t)?4:Dj(t)?9007199254740991:Pj(t)?10:11:ne(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gr(s.timestampValue),c=Gr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qr(s.bytesValue).isEqual(Qr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),c=Ue(i.doubleValue);return o===c?au(o)===au(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(px(o)!==px(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Dn(o[u],c[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Oa(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Bi(t,e){if(t===e)return 0;const n=Xr(t),r=Xr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gx(t.timestampValue,e.timestampValue);case 4:return gx(Pa(t),Pa(e));case 5:return Af(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Qr(i),u=Qr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ce(c[d],u[d]);if(f!==0)return f}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ce(Ue(i.latitude),Ue(o.latitude));return c!==0?c:ce(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,w,N,C;const c=i.fields||{},u=o.fields||{},d=(g=c[cu])==null?void 0:g.arrayValue,f=(w=u[cu])==null?void 0:w.arrayValue,m=ce(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((C=f==null?void 0:f.values)==null?void 0:C.length)||0);return m!==0?m:yx(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ql.mapValue&&o===Ql.mapValue)return 0;if(i===Ql.mapValue)return 1;if(o===Ql.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Af(u[m],f[m]);if(g!==0)return g;const w=Bi(c[u[m]],d[f[m]]);if(w!==0)return w}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function gx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Gr(t),r=Gr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function yx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bi(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function Hi(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Rf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Rf(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function bc(t){switch(Xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gu(t);return e?16+bc(e):16;case 5:return 2*t.stringValue.length;case 6:return Qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+bc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ls(r.fields,(i,o)=>{s+=i.length+bc(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function xx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jf(t){return!!t&&"integerValue"in t}function _m(t){return!!t&&"arrayValue"in t}function vx(t){return!!t&&"nullValue"in t}function _x(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ec(t){return!!t&&"mapValue"in t}function Pj(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a1])==null?void 0:r.stringValue)===l1}function ia(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return{...t}}function Dj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ec(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=it.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ia(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ec(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ec(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ls(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(ia(this.value))}}function c1(t){const e=[];return ls(t.fields,(n,r)=>{const s=new it([n]);if(Ec(r)){const i=c1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new yt(e,0,re.min(),re.min(),re.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,re.min(),re.min(),At.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,re.min(),re.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n){this.position=e,this.inclusive=n}}function wx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Bi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function bx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n="asc"){this.field=e,this.dir=n}}function Oj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class qe extends u1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Lj(e,n,r):n==="array-contains"?new Uj(e,r):n==="in"?new $j(e,r):n==="not-in"?new zj(e,r):n==="array-contains-any"?new Bj(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mj(e,r):new Fj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bi(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(Bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends u1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xn(e,n)}matches(e){return d1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d1(t){return t.op==="and"}function h1(t){return Vj(t)&&d1(t)}function Vj(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function Pf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Hi(t.value);if(h1(t))return t.filters.map(e=>Pf(e)).join(",");{const e=t.filters.map(n=>Pf(n)).join(",");return`${t.op}(${e})`}}function f1(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Dn(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&f1(o,s.filters[c]),!0):!1}(t,e):void ne(19439)}function p1(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Hi(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(p1).join(" ,")+"}"}(t):"Filter"}class Lj extends qe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class Mj extends qe{constructor(e,n){super(e,"in",n),this.keys=m1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Fj extends qe{constructor(e,n){super(e,"not-in",n),this.keys=m1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function m1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class Uj extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _m(n)&&Oa(n.arrayValue,this.value)}}class $j extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oa(this.value.arrayValue,n)}}class zj extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oa(this.value.arrayValue,n)}}class Bj extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Ex(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Hj(t,e,n,r,s,i,o)}function wm(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hi(r)).join(",")),e.Te=n}return e.Te}function bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Oj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bx(t.startAt,e.startAt)&&bx(t.endAt,e.endAt)}function Df(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qj(t,e,n,r,s,i,o,c){return new co(t,e,n,r,s,i,o,c)}function Em(t){return new co(t)}function Nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function g1(t){return t.collectionGroup!==null}function oa(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(it.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Va(i,r))}),n.has(it.keyField().canonicalString())||e.Ie.push(new Va(it.keyField(),r))}return e.Ie}function Cn(t){const e=ie(t);return e.Ee||(e.Ee=Wj(e,oa(t))),e.Ee}function Wj(t,e){if(t.limitType==="F")return Ex(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Va(s.field,i)});const n=t.endAt?new uu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uu(t.startAt.position,t.startAt.inclusive):null;return Ex(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Of(t,e){const n=t.filters.concat([e]);return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Vf(t,e,n){return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qu(t,e){return bm(Cn(t),Cn(e))&&t.limitType===e.limitType}function y1(t){return`${wm(Cn(t))}|lt:${t.limitType}`}function si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>p1(s)).join(", ")}]`),Ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Hi(s)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function Xu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=wx(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,oa(r),s)||r.endAt&&!function(o,c,u){const d=wx(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,oa(r),s))}(t,e)}function Kj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x1(t){return(e,n)=>{let r=!1;for(const s of oa(t)){const i=Gj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Gj(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Bi(u,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return t1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=new Oe(J.comparator);function or(){return Qj}const v1=new Oe(J.comparator);function Ho(...t){let e=v1;for(const n of t)e=e.insert(n.key,n);return e}function _1(t){let e=v1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return aa()}function w1(){return aa()}function aa(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Xj=new Oe(J.comparator),Yj=new Ye(J.comparator);function ue(...t){let e=Yj;for(const n of t)e=e.add(n);return e}const Jj=new Ye(ce);function Zj(){return Jj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:au(e)?"-0":e}}function b1(t){return{integerValue:""+t}}function eP(t,e){return kj(e)?b1(e):Nm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function tP(t,e,n){return t instanceof du?function(s,i){const o={fields:{[s1]:{stringValue:r1},[o1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vm(i)&&(i=Gu(i)),i&&(o.fields[i1]=i),{mapValue:o}}(n,e):t instanceof La?N1(t,e):t instanceof Ma?T1(t,e):function(s,i){const o=E1(s,i),c=Tx(o)+Tx(s.Ae);return jf(o)&&jf(s.Ae)?b1(c):Nm(s.serializer,c)}(t,e)}function nP(t,e,n){return t instanceof La?N1(t,e):t instanceof Ma?T1(t,e):n}function E1(t,e){return t instanceof hu?function(r){return jf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class du extends Yu{}class La extends Yu{constructor(e){super(),this.elements=e}}function N1(t,e){const n=I1(e);for(const r of t.elements)n.some(s=>Dn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends Yu{constructor(e){super(),this.elements=e}}function T1(t,e){let n=I1(e);for(const r of t.elements)n=n.filter(s=>!Dn(s,r));return{arrayValue:{values:n}}}class hu extends Yu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tx(t){return Ue(t.integerValue||t.doubleValue)}function I1(t){return _m(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function rP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof La&&s instanceof La||r instanceof Ma&&s instanceof Ma?zi(r.elements,s.elements,Dn):r instanceof hu&&s instanceof hu?Dn(r.Ae,s.Ae):r instanceof du&&s instanceof du}(t.transform,e.transform)}class sP{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ju{}function k1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tm(t.key,en.none()):new sl(t.key,t.data,en.none());{const n=t.data,r=At.empty();let s=new Ye(it.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new cs(t.key,r,new Ft(s.toArray()),en.none())}}function iP(t,e,n){t instanceof sl?function(s,i,o){const c=s.value.clone(),u=kx(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(s,i,o){if(!Nc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=kx(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(S1(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function la(t,e,n,r){return t instanceof sl?function(i,o,c,u){if(!Nc(i.precondition,o))return c;const d=i.value.clone(),f=Sx(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof cs?function(i,o,c,u){if(!Nc(i.precondition,o))return c;const d=Sx(i.fieldTransforms,u,o),f=o.data;return f.setAll(S1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return Nc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function oP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=E1(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Ix(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>rP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends Ju{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cs extends Ju{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function S1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kx(t,e,n){const r=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,nP(o,c,n[s]))}return r}function Sx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,tP(i,o,e))}return r}class Tm extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aP extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&iP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=w1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=k1(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>Ix(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>Ix(n,r))}}class Im{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Xj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Im(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function dP(t){switch(t){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function C1(t){if(t===void 0)return ir("GRPC error has no .code"),F.UNKNOWN;switch(t){case Be.OK:return F.OK;case Be.CANCELLED:return F.CANCELLED;case Be.UNKNOWN:return F.UNKNOWN;case Be.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Be.INTERNAL:return F.INTERNAL;case Be.UNAVAILABLE:return F.UNAVAILABLE;case Be.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Be.NOT_FOUND:return F.NOT_FOUND;case Be.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Be.ABORTED:return F.ABORTED;case Be.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Be.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new $r([4294967295,4294967295],0);function Cx(t){const e=hP().encode(t),n=new Hb;return n.update(e),new Uint8Array(n.digest())}function Ax(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $r([n,r],0),new $r([s,i],0)]}class km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(r<0)throw new qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$r.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply($r.fromNumber(r)));return s.compare(fP)===1&&(s=new $r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Cx(e),[r,s]=Ax(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new km(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Cx(e),[r,s]=Ax(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zu(re.min(),s,new Oe(ce),or(),ue())}}class il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class A1{constructor(e,n){this.targetId=e,this.Ce=n}}class R1{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rx{constructor(){this.ve=0,this.Fe=jx(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new il(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=jx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pP{constructor(e){this.Ge=e,this.ze=new Map,this.je=or(),this.Je=Xl(),this.He=Xl(),this.Ye=new Oe(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Df(i))if(r===0){const o=new J(i.path);this.et(n,o,yt.newNoDocument(o,re.min()))}else _e(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Qr(r).toUint8Array()}catch(u){if(u instanceof n1)return $i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new km(o,s,i)}catch(u){return $i(u instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Df(c.target)){const u=new J(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,yt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ue();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Zu(e,n,this.Ye,this.je,r);return this.je=or(),this.Je=Xl(),this.He=Xl(),this.Ye=new Oe(ce),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ye(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ye(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xl(){return new Oe(J.comparator)}function jx(){return new Oe(J.comparator)}const mP={asc:"ASCENDING",desc:"DESCENDING"},gP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yP={and:"AND",or:"OR"};class xP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lf(t,e){return t.useProto3Json||Ku(e)?e:{value:e}}function fu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vP(t,e){return fu(t,e.toTimestamp())}function An(t){return _e(!!t,49232),re.fromTimestamp(function(n){const r=Gr(n);return new ve(r.seconds,r.nanos)}(t))}function Sm(t,e){return Mf(t,e).canonicalString()}function Mf(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function P1(t){const e=Ne.fromString(t);return _e(M1(e),10190,{key:e.toString()}),e}function Ff(t,e){return Sm(t.databaseId,e.path)}function ph(t,e){const n=P1(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(O1(n))}function D1(t,e){return Sm(t.databaseId,e)}function _P(t){const e=P1(t);return e.length===4?Ne.emptyPath():O1(e)}function Uf(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O1(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Px(t,e,n){return{name:Ff(t,e),fields:n.value.mapValue.fields}}function wP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(_e(f===void 0||typeof f=="string",58123),lt.fromBase64String(f||"")):(_e(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),lt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?F.UNKNOWN:C1(d.code);return new G(f,d.message||"")}(o);n=new R1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ph(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):re.min(),c=new At({mapValue:{fields:r.document.fields}}),u=yt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Tc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ph(t,r.document),i=r.readTime?An(r.readTime):re.min(),o=yt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Tc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ph(t,r.document),i=r.removedTargetIds||[];n=new Tc([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new uP(s,i),c=r.targetId;n=new A1(c,o)}}return n}function bP(t,e){let n;if(e instanceof sl)n={update:Px(t,e.key,e.value)};else if(e instanceof Tm)n={delete:Ff(t,e.key)};else if(e instanceof cs)n={update:Px(t,e.key,e.data),updateMask:RP(e.fieldMask)};else{if(!(e instanceof aP))return ne(16599,{Vt:e.type});n={verify:Ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof du)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof La)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof hu)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:vP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function EP(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(re.min())&&(o=An(i)),new sP(o,s.transformResults||[])}(n,e))):[]}function NP(t,e){return{documents:[D1(t,e.path)]}}function TP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D1(t,s);const i=function(d){if(d.length!==0)return L1(xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ii(g.field),direction:SP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Lf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function IP(t){let e=_P(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=V1(m);return g instanceof xn&&h1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(N){return new Va(oi(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Ku(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new uu(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new uu(w,g)}(n.endAt)),qj(e,s,o,i,c,"F",u,d)}function kP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function V1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oi(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=oi(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=oi(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oi(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(oi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>V1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function SP(t){return mP[t]}function CP(t){return gP[t]}function AP(t){return yP[t]}function ii(t){return{fieldPath:t.canonicalString()}}function oi(t){return it.fromServerFormat(t.fieldPath)}function L1(t){return t instanceof qe?function(n){if(n.op==="=="){if(_x(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NAN"}};if(vx(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_x(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NAN"}};if(vx(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ii(n.field),op:CP(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>L1(s));return r.length===1?r[0]:{compositeFilter:{op:AP(n.op),filters:r}}}(t):ne(54877,{filter:t})}function RP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function M1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=re.min(),o=re.min(),c=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.yt=e}}function PP(t){const e=IP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.Cn=new OP}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Kr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class OP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},F1=41943040;class St{static withCacheSize(e){return new St(e,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St.DEFAULT_COLLECTION_PERCENTILE=10,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,St.DEFAULT=new St(F1,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),St.DISABLED=new St(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qi(0)}static cr(){return new qi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="LruGarbageCollector",VP=1048576;function Vx([t,e],[n,r]){const s=ce(t,n);return s===0?ce(e,r):s}class LP{constructor(e){this.Ir=e,this.buffer=new Ye(Vx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(Ox,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){lo(n)?Q(Ox,"Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.Vr(3e5)})}}class FP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Wu.ce);const r=new LP(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Dx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ri()<=le.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function UP(t,e){return new FP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&la(r.mutation,s,Ft.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=Ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ho();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=or();const o=aa(),c=function(){return aa()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof cs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),la(f.mutation,d,f.mutation.getFieldMask(),ve.now())):o.set(d.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new zP(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=aa();let s=new Oe((o,c)=>o-c),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ft.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||ue()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=w1();f.forEach(g=>{if(!i.has(g)){const w=k1(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Ts());let c=ja,u=i;return o.next(d=>U.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ue())).next(f=>({batchId:c,changes:_1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ho();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(m,g){return new co(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,yt.newInvalidDocument(f)))});let c=Ho();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&la(f.mutation,d,Ft.empty(),ve.now()),Xu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:PP(s.bundledQuery),readTime:An(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.overlays=new Oe(J.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ts();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Ts(),i=n.length+1,o=new J(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Ts(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Ts(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cP(n,r));let i=this.qr.get(n);i===void 0&&(i=ue(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.Qr=new Ye(Ze.$r),this.Ur=new Ye(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ze(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Ne([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Ne([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=ue();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(Ze.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lP(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Ze(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?xm:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ce);return n.forEach(s=>{const i=new Ze(s,0),o=new Ze(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Ze(new J(i),0);let c=new Ye(ce);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ze(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.ri=e,this.docs=function(){return new Oe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,c=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Ej(bj(f),r)<=0||(s.has(f.key)||Xu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QP(this)}getSize(e){return U.resolve(this.size)}}class QP extends $P{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.persistence=e,this.si=new Gs(n=>wm(n),bm),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Cm,this.targetCount=0,this.ai=qi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new qi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wu(0),this.li=!1,this.li=!0,this.hi=new WP,this.referenceDelegate=e(this),this.Pi=new XP(this),this.indexManager=new DP,this.remoteDocumentCache=function(s){return new GP(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new jP(n),this.Ii=new HP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new KP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new YP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class YP extends Tj{constructor(e){super(),this.currentSequenceNumber=e}}class Am{constructor(e){this.persistence=e,this.Ri=new Cm,this.Vi=null}static mi(e){return new Am(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pu{constructor(e,n){this.persistence=e,this.pi=new Gs(r=>Sj(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=UP(this,n)}static mi(e,n){return new pu(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bc(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CS()?8:Ij(vt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new JP;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ri()<=le.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(ri()<=le.DEBUG&&Q("QueryEngine","Query:",si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ri()<=le.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):U.resolve())}ys(e,n){if(Nx(n))return U.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vf(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ue(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Vf(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Nx(n)||s.isEqual(re.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(ri()<=le.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),si(n)),this.vs(e,o,n,wj(s,ja)).next(c=>c))})}Ds(e,n){let r=new Ye(x1(e));return n.forEach((s,i)=>{Xu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ri()<=le.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",si(n)),this.ps.getDocumentsMatchingQuery(e,n,Kr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LocalStore",e4=3e8;class t4{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Oe(ce),this.xs=new Gs(i=>wm(i),bm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function n4(t,e,n,r){return new t4(t,e,n,r)}async function $1(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=ue();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function r4(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=U.resolve();return g.forEach(N=>{w=w.next(()=>f.getEntry(u,N)).next(C=>{const A=d.docVersions.get(N);_e(A!==null,48541),C.version.compareTo(A)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ue();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function z1(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function s4(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(lt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(C,A,x){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=e4?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,w,f)&&c.push(n.Pi.updateTargetData(i,w))});let u=or(),d=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(i4(i,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(re.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function i4(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Q(jm,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function o4(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function a4(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function $f(t,e,n){const r=ie(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!lo(o))throw o;Q(jm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Lx(t,e,n){const r=ie(t);let s=re.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=ie(u),g=m.xs.get(f);return g!==void 0?U.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,Cn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:ue())).next(c=>(l4(r,Kj(e),c),{documents:c,Qs:i})))}function l4(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Mx{constructor(){this.activeTargetIds=Zj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c4{constructor(){this.Mo=new Mx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="ConnectivityMonitor";class Ux{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(Fx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(Fx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function zf(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="RestConnection",d4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===lu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=zf(),c=this.zo(e,n.toUriEncodedString());Q(mh,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),f=os(d);return this.Jo(e,c,u,r,f).then(m=>(Q(mh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw $i(mh,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=d4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class p4 extends h4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=zf();return new Promise((c,u)=>{const d=new qb;d.setWithCredentials(!0),d.listenOnce(Wb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case wc.NO_ERROR:const m=d.getResponseJson();Q(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case wc.TIMEOUT:Q(pt,`RPC '${e}' ${o} timed out`),u(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const g=d.getStatus();if(Q(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const N=w==null?void 0:w.error;if(N&&N.status&&N.message){const C=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(y)>=0?y:F.UNKNOWN}(N.status);u(new G(C,N.message))}else u(new G(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(pt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);Q(pt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=zf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qb(),c=Gb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(pt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,w=!1;const N=new f4({Yo:A=>{w?Q(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(Q(pt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Q(pt,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Zo:()=>m.close()}),C=(A,x,y)=>{A.listen(x,I=>{try{y(I)}catch(D){setTimeout(()=>{throw D},0)}})};return C(m,Bo.EventType.OPEN,()=>{w||(Q(pt,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),C(m,Bo.EventType.CLOSE,()=>{w||(w=!0,Q(pt,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(m))}),C(m,Bo.EventType.ERROR,A=>{w||(w=!0,$i(pt,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),N.a_(new G(F.UNAVAILABLE,"The operation could not be completed")))}),C(m,Bo.EventType.MESSAGE,A=>{var x;if(!w){const y=A.data[0];_e(!!y,16349);const I=y,D=(I==null?void 0:I.error)||((x=I[0])==null?void 0:x.error);if(D){Q(pt,`RPC '${e}' stream ${s} received error:`,D);const P=D.status;let L=function(b){const _=Be[b];if(_!==void 0)return C1(_)}(P),k=D.message;L===void 0&&(L=F.INTERNAL,k="Unknown error status: "+P+" with message "+D.message),w=!0,N.a_(new G(L,k)),m.close()}else Q(pt,`RPC '${e}' stream ${s} received:`,y),N.u_(y)}}),C(c,Kb.STAT_EVENT,A=>{A.stat===Cf.PROXY?Q(pt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Cf.NOPROXY&&Q(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new xP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="PersistentStream";class H1{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new B1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m4 extends H1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wP(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?An(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Uf(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Df(u)?{documents:NP(i,u)}:{query:TP(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=j1(i,o.resumeToken);const d=Lf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){c.readTime=fu(i,o.snapshotVersion.toTimestamp());const d=Lf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=kP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Uf(this.serializer),n.removeTarget=e,this.q_(n)}}class g4 extends H1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=EP(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Uf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{}class x4 extends y4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Mf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Mf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class v4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ir(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="RemoteStore";class _4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Qs(this)&&(Q($s,"Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.Ea.add(4),await ol(d),d.Ra.set("Unknown"),d.Ea.delete(4),await td(d)}(this))})}),this.Ra=new v4(r,s)}}async function td(t){if(Qs(t))for(const e of t.da)await e(!0)}async function ol(t){for(const e of t.da)await e(!1)}function q1(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vm(n)?Om(n):uo(n).O_()&&Dm(n,e))}function Pm(t,e){const n=ie(t),r=uo(n);n.Ia.delete(e),r.O_()&&W1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Qs(n)&&n.Ra.set("Unknown"))}function Dm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).Y_(e)}function W1(t,e){t.Va.Ue(e),uo(t).Z_(e)}function Om(t){t.Va=new pP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.Ra.ua()}function Vm(t){return Qs(t)&&!uo(t).x_()&&t.Ia.size>0}function Qs(t){return ie(t).Ea.size===0}function K1(t){t.Va=void 0}async function w4(t){t.Ra.set("Online")}async function b4(t){t.Ia.forEach((e,n)=>{Dm(t,e)})}async function E4(t,e){K1(t),Vm(t)?(t.Ra.ha(e),Om(t)):t.Ra.set("Unknown")}async function N4(t,e,n){if(t.Ra.set("Online"),e instanceof R1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){Q($s,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mu(t,r)}else if(e instanceof Tc?t.Va.Ze(e):e instanceof A1?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await z1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(lt.EMPTY_BYTE_STRING,f.snapshotVersion)),W1(i,u);const m=new Sr(f.target,u,d,f.sequenceNumber);Dm(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q($s,"Failed to raise snapshot:",r),await mu(t,r)}}async function mu(t,e,n){if(!lo(e))throw e;t.Ea.add(1),await ol(t),t.Ra.set("Offline"),n||(n=()=>z1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q($s,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await td(t)})}function G1(t,e){return e().catch(n=>mu(t,n,e))}async function nd(t){const e=ie(t),n=Yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xm;for(;T4(e);)try{const s=await o4(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,I4(e,s)}catch(s){await mu(e,s)}Q1(e)&&X1(e)}function T4(t){return Qs(t)&&t.Ta.length<10}function I4(t,e){t.Ta.push(e);const n=Yr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Q1(t){return Qs(t)&&!Yr(t).x_()&&t.Ta.length>0}function X1(t){Yr(t).start()}async function k4(t){Yr(t).ra()}async function S4(t){const e=Yr(t);for(const n of t.Ta)e.ea(n.mutations)}async function C4(t,e,n){const r=t.Ta.shift(),s=Im.from(r,e,n);await G1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nd(t)}async function A4(t,e){e&&Yr(t).X_&&await async function(r,s){if(function(o){return dP(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();Yr(r).B_(),await G1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nd(r)}}(t,e),Q1(t)&&X1(t)}async function zx(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Q($s,"RemoteStore received new credentials");const r=Qs(n);n.Ea.add(3),await ol(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await td(n)}async function R4(t,e){const n=ie(t);e?(n.Ea.delete(2),await td(n)):e||(n.Ea.add(2),await ol(n),n.Ra.set("Unknown"))}function uo(t){return t.ma||(t.ma=function(n,r,s){const i=ie(n);return i.sa(),new m4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:w4.bind(null,t),t_:b4.bind(null,t),r_:E4.bind(null,t),H_:N4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Vm(t)?Om(t):t.Ra.set("Unknown")):(await t.ma.stop(),K1(t))})),t.ma}function Yr(t){return t.fa||(t.fa=function(n,r,s){const i=ie(n);return i.sa(),new g4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:k4.bind(null,t),r_:A4.bind(null,t),ta:S4.bind(null,t),na:C4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await nd(t)):(await t.fa.stop(),t.Ta.length>0&&(Q($s,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Lm(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(t,e){if(ir("AsyncQueue",`${e}: ${t}`),lo(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{static emptySet(e){return new Ri(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ri)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ri;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.ga=new Oe(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Wi(e,n,Ri.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class P4{constructor(){this.queries=Hx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=Hx(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function Hx(){return new Gs(t=>y1(t),Qu)}async function Y1(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new j4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Mm(o,`Initialization of query '${si(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Fm(n)}async function J1(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function D4(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Fm(n)}function O4(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Fm(t){t.Ca.forEach(e=>{e.next()})}var Bf,qx;(qx=Bf||(Bf={})).Ma="default",qx.Cache="cache";class Z1{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.key=e}}class tE{constructor(e){this.key=e}}class V4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ue(),this.mutatedKeys=ue(),this.eu=x1(e),this.tu=new Ri(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Bx,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=Xu(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let A=!1;g&&w?g.data.isEqual(w.data)?N!==C&&(r.track({type:3,doc:w}),A=!0):this.su(g,w)||(r.track({type:2,doc:w}),A=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),A=!0):g&&!w&&(r.track({type:1,doc:g}),A=!0,(u||d)&&(c=!0)),A&&(w?(o=o.add(w),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(w,N){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:A})}};return C(w)-C(N)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Wi(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new tE(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new eE(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Um="SyncEngine";class L4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M4{constructor(e){this.key=e,this.hu=!1}}class F4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gs(c=>y1(c),Qu),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(J.comparator),this.Au=new Map,this.Ru=new Cm,this.Vu={},this.mu=new Map,this.fu=qi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U4(t,e,n=!0){const r=aE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await nE(r,e,n,!0),s}async function $4(t,e){const n=aE(t);await nE(n,e,!0,!1)}async function nE(t,e,n,r){const s=await a4(t.localStore,Cn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await z4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&q1(t.remoteStore,s),c}async function z4(t,e,n,r,s){t.pu=(m,g,w)=>async function(C,A,x,y){let I=A.view.ru(x);I.Cs&&(I=await Lx(C.localStore,A.query,!1).then(({documents:k})=>A.view.ru(k,I)));const D=y&&y.targetChanges.get(A.targetId),P=y&&y.targetMismatches.get(A.targetId)!=null,L=A.view.applyChanges(I,C.isPrimaryClient,D,P);return Kx(C,A.targetId,L.au),L.snapshot}(t,m,g,w);const i=await Lx(t.localStore,e,!0),o=new V4(e,i.Qs),c=o.ru(i.documents),u=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Kx(t,n,d.au);const f=new L4(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function B4(t,e,n){const r=ie(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Qu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $f(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pm(r.remoteStore,s.targetId),Hf(r,s.targetId)}).catch(ao)):(Hf(r,s.targetId),await $f(r.localStore,s.targetId,!0))}async function H4(t,e){const n=ie(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pm(n.remoteStore,r.targetId))}async function q4(t,e,n){const r=J4(t);try{const s=await function(o,c){const u=ie(o),d=ve.now(),f=c.reduce((w,N)=>w.add(N.key),ue());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=or(),C=ue();return u.Ns.getEntries(w,f).next(A=>{N=A,N.forEach((x,y)=>{y.isValidDocument()||(C=C.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,N)).next(A=>{m=A;const x=[];for(const y of c){const I=oP(y,m.get(y.key).overlayedDocument);I!=null&&x.push(new cs(y.key,I,c1(I.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,x,c)}).next(A=>{g=A;const x=A.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(w,A.batchId,x)})}).then(()=>({batchId:g.batchId,changes:_1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Oe(ce)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await al(r,s.changes),await nd(r.remoteStore)}catch(s){const i=Mm(s,"Failed to persist write");n.reject(i)}}async function rE(t,e){const n=ie(t);try{const r=await s4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?_e(o.hu,14607):s.removedDocuments.size>0&&(_e(o.hu,42227),o.hu=!1))}),await al(n,r,e)}catch(r){await ao(r)}}function Wx(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=ie(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&Fm(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function W4(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Oe(J.comparator);o=o.insert(i,yt.newNoDocument(i,re.min()));const c=ue().add(i),u=new Zu(re.min(),new Map,new Oe(ce),o,c);await rE(r,u),r.du=r.du.remove(i),r.Au.delete(e),$m(r)}else await $f(r.localStore,e,!1).then(()=>Hf(r,e,n)).catch(ao)}async function K4(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await r4(n.localStore,e);iE(n,r,null),sE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,s)}catch(s){await ao(s)}}async function G4(t,e,n){const r=ie(t);try{const s=await function(o,c){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(_e(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);iE(r,e,n),sE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,s)}catch(s){await ao(s)}}function sE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function iE(t,e,n){const r=ie(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||oE(t,r)})}function oE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Pm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),$m(t))}function Kx(t,e,n){for(const r of n)r instanceof eE?(t.Ru.addReference(r.key,e),Q4(t,r)):r instanceof tE?(Q(Um,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||oE(t,r.key)):ne(19791,{wu:r})}function Q4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(Um,"New document in limbo: "+n),t.Eu.add(r),$m(t))}function $m(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new M4(n)),t.du=t.du.insert(n,r),q1(t.remoteStore,new Sr(Cn(Em(n.path)),r,"TargetPurposeLimboResolution",Wu.ce))}}async function al(t,e,n){const r=ie(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Rm.As(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=ie(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.Es,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>U.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!lo(m))throw m;Q(jm,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.Ms.get(g),N=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(N);f.Ms=f.Ms.insert(g,C)}}}(r.localStore,i))}async function X4(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Q(Um,"User change. New user:",e.toKey());const r=await $1(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new G(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.Ls)}}function Y4(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let s=ue();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function aE(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W4.bind(null,e),e.Pu.H_=D4.bind(null,e.eventManager),e.Pu.yu=O4.bind(null,e.eventManager),e}function J4(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G4.bind(null,e),e}class gu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return n4(this.persistence,new ZP,e.initialUser,this.serializer)}Cu(e){return new U1(Am.mi,this.serializer)}Du(e){return new c4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gu.provider={build:()=>new gu};class Z4 extends gu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof pu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?St.withCacheSize(this.cacheSizeBytes):St.DEFAULT;return new U1(r=>pu.mi(r,n),this.serializer)}}class qf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X4.bind(null,this.syncEngine),await R4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P4}()}createDatastore(e){const n=ed(e.databaseInfo.databaseId),r=function(i){return new p4(i)}(e.databaseInfo);return function(i,o,c,u){return new x4(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new _4(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Wx(this.syncEngine,n,0),function(){return Ux.v()?new Ux:new u4}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new F4(s,i,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ie(s);Q($s,"RemoteStore shutting down."),i.Ea.add(5),await ol(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qf.provider={build:()=>new qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="FirestoreClient";class eD{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(Jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(Jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yh(t,e){t.asyncQueue.verifyOperationInProgress(),Q(Jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tD(t);Q(Jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>zx(e.remoteStore,s)),t._onlineComponents=e}async function tD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(Jr,"Using user provided OfflineComponentProvider");try{await yh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$i("Error using user provided cache. Falling back to memory cache: "+n),await yh(t,new gu)}}else Q(Jr,"Using default OfflineComponentProvider"),await yh(t,new Z4(void 0));return t._offlineComponents}async function cE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(Jr,"Using user provided OnlineComponentProvider"),await Gx(t,t._uninitializedComponentsProvider._online)):(Q(Jr,"Using default OnlineComponentProvider"),await Gx(t,new qf))),t._onlineComponents}function nD(t){return cE(t).then(e=>e.syncEngine)}async function Wf(t){const e=await cE(t),n=e.eventManager;return n.onListen=U4.bind(null,e.syncEngine),n.onUnlisten=B4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=H4.bind(null,e.syncEngine),n}function rD(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new lE({next:g=>{f.Nu(),o.enqueueAndForget(()=>J1(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Z1(c,f,{includeMetadataChanges:!0,qa:!0});return Y1(i,m)}(await Wf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="firestore.googleapis.com",Xx=!0;class Yx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dE,this.ssl=Xx}else this.host=e.host,this.ssl=e.ssl??Xx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=F1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VP)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_j("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uj;switch(r.type){case"firstParty":return new pj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qx.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Qx.delete(n),r.terminate())}(this),Promise.resolve()}}function sD(t,e,n,r={}){var d;t=Zt(t,rd);const s=os(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(sm(`https://${c}`),im("Firestore",!0)),i.host!==dE&&i.host!==c&&$i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Ms(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=mt.MOCK_USER;else{f=sb(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mt(g)}t._authCredentials=new dj(new Yb(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ze(this.firestore,e,this._key)}toJSON(){return{type:ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(rl(n,ze._jsonSchema))return new ze(e,r||null,new J(Ne.fromString(n.referencePath)))}}ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:We("string",ze._jsonSchemaVersion),referencePath:We("string")};class Br extends us{constructor(e,n,r){super(e,n,Em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new J(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function Nr(t,e,...n){if(t=Re(t),Jb("collection","path",e),t instanceof rd){const r=Ne.fromString(e,...n);return ux(r),new Br(t,null,r)}{if(!(t instanceof ze||t instanceof Br))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return ux(r),new Br(t.firestore,null,r)}}function Fa(t,e,...n){if(t=Re(t),arguments.length===1&&(e=ym.newId()),Jb("doc","path",e),t instanceof rd){const r=Ne.fromString(e,...n);return cx(r),new ze(t,null,new J(r))}{if(!(t instanceof ze||t instanceof Br))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return cx(r),new ze(t.firestore,t instanceof Br?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="AsyncQueue";class Zx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new B1(this,"async_queue_retry"),this._c=()=>{const r=gh();r&&Q(Jx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new zr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;Q(Jx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ir("INTERNAL UNHANDLED ERROR: ",ev(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Lm.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:ev(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ev(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Zr extends rd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zx(e),this._firestoreClient=void 0,await e}}}function iD(t,e){const n=typeof t=="object"?t:Uu(),r=typeof t=="string"?t:lu,s=ro(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tb("firestore");i&&sD(s,...i)}return s}function zm(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oD(t),t._firestoreClient}function oD(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,f){return new Rj(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,uE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new eD(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(lt.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qt(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rl(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:We("string",Qt._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rn._jsonSchemaVersion}}static fromJSON(e){if(rl(e,Rn._jsonSchema))return new Rn(e.latitude,e.longitude)}}Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:We("string",Rn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rl(e,jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new jn(e.vectorValues);throw new G(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jn._jsonSchemaVersion="firestore/vectorValue/1.0",jn._jsonSchema={type:We("string",jn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^__.*__$/;class lD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class hE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class Hm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fE(this.Ac)&&aD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ed(e)}Cc(e,n,r,s=!1){return new Hm({Ac:e,methodName:n,Dc:r,path:it.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function id(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new cD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function pE(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);qm("Data must be an object, but it was:",o,r);const c=mE(r,o);let u,d;if(i.merge)u=new Ft(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Kf(e,m,n);if(!o.contains(g))throw new G(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);yE(f,g)||f.push(g)}u=new Ft(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new lD(new At(c),u,d)}class od extends Bm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}function uD(t,e,n,r){const s=t.Cc(1,e,n);qm("Data must be an object, but it was:",s,r);const i=[],o=At.empty();ls(r,(u,d)=>{const f=Wm(e,u,n);d=Re(d);const m=s.yc(f);if(d instanceof od)i.push(f);else{const g=ll(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new Ft(i);return new hE(o,c,s.fieldTransforms)}function dD(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[Kf(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Kf(e,i[g])),u.push(i[g+1]);const d=[],f=At.empty();for(let g=c.length-1;g>=0;--g)if(!yE(d,c[g])){const w=c[g];let N=u[g];N=Re(N);const C=o.yc(w);if(N instanceof od)d.push(w);else{const A=ll(N,C);A!=null&&(d.push(w),f.set(w,A))}}const m=new Ft(d);return new hE(f,m,o.fieldTransforms)}function hD(t,e,n,r=!1){return ll(n,t.Cc(r?4:3,e))}function ll(t,e){if(gE(t=Re(t)))return qm("Unsupported field value:",e,t),mE(t,e);if(t instanceof Bm)return function(r,s){if(!fE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=ll(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:fu(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fu(s.serializer,i)}}if(r instanceof Rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qt)return{bytesValue:j1(s.serializer,r._byteString)};if(r instanceof ze){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jn)return function(o,c){return{mapValue:{fields:{[a1]:{stringValue:l1},[cu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Nm(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${qu(r)}`)}(t,e)}function mE(t,e){const n={};return t1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,(r,s)=>{const i=ll(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof Rn||t instanceof Qt||t instanceof ze||t instanceof Bm||t instanceof jn)}function qm(t,e,n){if(!gE(n)||!Zb(n)){const r=qu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Kf(t,e,n){if((e=Re(e))instanceof sd)return e._internalPath;if(typeof e=="string")return Wm(t,e);throw yu("Field path arguments must be of type string or ",t,!1,void 0,n)}const fD=new RegExp("[~\\*/\\[\\]]");function Wm(t,e,n){if(e.search(fD)>=0)throw yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sd(...e.split("."))._internalPath}catch{throw yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,c+t+u)}function yE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ad("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pD extends xE{data(){return super.data()}}function ad(t,e){return typeof e=="string"?Wm(t,e):e instanceof sd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Km{}class _E extends Km{}function _s(t,e,...n){let r=[];e instanceof Km&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Gm).length,c=i.filter(u=>u instanceof ld).length;if(o>1||o>0&&c>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ld extends _E{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ld(e,n,r)}_apply(e){const n=this._parse(e);return wE(e._query,n),new us(e.firestore,e.converter,Of(e._query,n))}_parse(e){const n=id(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){rv(m,f);const N=[];for(const C of m)N.push(nv(u,i,C));g={arrayValue:{values:N}}}else g=nv(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||rv(m,f),g=hD(c,o,m,f==="in"||f==="not-in");return qe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mD(t,e,n){const r=e,s=ad("where",t);return ld._create(s,r,n)}class Gm extends Km{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)wE(o,u),o=Of(o,u)}(e._query,n),new us(e.firestore,e.converter,Of(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qm extends _E{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Va(i,o)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new co(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gD(t,e="asc"){const n=e,r=ad("orderBy",t);return Qm._create(r,n)}function nv(t,e,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g1(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!J.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xx(t,new J(r))}if(n instanceof ze)return xx(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(n)}.`)}function rv(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yD{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ls(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[cu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ue(o.doubleValue));return new jn(n)}convertGeoPoint(e){return new Rn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=Gr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);_e(M1(r),9688,{name:e});const s=new Da(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends xE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ad("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:We("string",Ss._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class Ic extends Ss{data(e={}){return super.data(e)}}class Cs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ic(this._firestore,this._userDataWriter,r.key,r,new Wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Ic(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Wo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ic(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Wo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:xD(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}Cs._jsonSchemaVersion="firestore/querySnapshot/1.0",Cs._jsonSchema={type:We("string",Cs._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class Xm extends yD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function vD(t){t=Zt(t,us);const e=Zt(t.firestore,Zr),n=zm(e),r=new Xm(e);return vE(t._query),rD(n,t._query).then(s=>new Cs(e,r,t,s))}function _D(t,e,n){t=Zt(t,ze);const r=Zt(t.firestore,Zr),s=bE(t.converter,e);return cd(r,[pE(id(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function wD(t,e,n,...r){t=Zt(t,ze);const s=Zt(t.firestore,Zr),i=id(s);let o;return o=typeof(e=Re(e))=="string"||e instanceof sd?dD(i,"updateDoc",t._key,e,n,r):uD(i,"updateDoc",t._key,e),cd(s,[o.toMutation(t._key,en.exists(!0))])}function Gf(t){return cd(Zt(t.firestore,Zr),[new Tm(t._key,en.none())])}function bD(t,e){const n=Zt(t.firestore,Zr),r=Fa(t),s=bE(t.converter,e);return cd(n,[pE(id(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function ai(t,...e){var u,d,f;t=Re(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tv(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,c;if(t instanceof ze)o=Zt(t.firestore,Zr),c=Em(t._key.path),i={next:m=>{e[r]&&e[r](ED(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Zt(t,us);o=Zt(m.firestore,Zr),c=m._query;const g=new Xm(o);i={next:w=>{e[r]&&e[r](new Cs(o,g,m,w))},error:e[r+1],complete:e[r+2]},vE(t._query)}return function(g,w,N,C){const A=new lE(C),x=new Z1(w,A,N);return g.asyncQueue.enqueueAndForget(async()=>Y1(await Wf(g),x)),()=>{A.Nu(),g.asyncQueue.enqueueAndForget(async()=>J1(await Wf(g),x))}}(zm(o),c,s,i)}function cd(t,e){return function(r,s){const i=new zr;return r.asyncQueue.enqueueAndForget(async()=>q4(await nD(r),s,i)),i.promise}(zm(t),e)}function ED(t,e,n){const r=n.docs.get(e._key),s=new Xm(t);return new Ss(t,s,e._key,r,new Wo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oo=s})(Ws),rr(new Pn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Zr(new hj(r.getProvider("auth-internal")),new mj(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),pn(ix,ox,e),pn(ix,ox,"esm2020")})();var ND="firebase",TD="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(ND,TD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebasestorage.googleapis.com",NE="storageBucket",ID=2*60*1e3,kD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends Ln{constructor(e,n,r=0){super(xh(e),`Firebase Storage: ${n} (${xh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Me;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Me||(Me={}));function xh(t){return"storage/"+t}function Ym(){const t="An unknown error occurred, please check the error payload for server response.";return new Fe(Me.UNKNOWN,t)}function SD(t){return new Fe(Me.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function CD(t){return new Fe(Me.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fe(Me.UNAUTHENTICATED,t)}function RD(){return new Fe(Me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jD(t){return new Fe(Me.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function PD(){return new Fe(Me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DD(){return new Fe(Me.CANCELED,"User canceled the upload/download.")}function OD(t){return new Fe(Me.INVALID_URL,"Invalid URL '"+t+"'.")}function VD(t){return new Fe(Me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function LD(){return new Fe(Me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NE+"' property when initializing the app?")}function MD(){return new Fe(Me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function FD(){return new Fe(Me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function UD(t){return new Fe(Me.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qf(t){return new Fe(Me.INVALID_ARGUMENT,t)}function TE(){return new Fe(Me.APP_DELETED,"The Firebase app was deleted.")}function $D(t){return new Fe(Me.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ca(t,e){return new Fe(Me.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vo(t){throw new Fe(Me.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ut.makeFromUrl(e,n)}catch{return new Ut(e,"")}if(r.path==="")return r;throw VD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),N={bucket:1,path:3},C=n===EE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",x=new RegExp(`^https?://${C}/${s}/${A}`,"i"),I=[{regex:c,indices:u,postModify:i},{regex:w,indices:N,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<I.length;D++){const P=I[D],L=P.regex.exec(e);if(L){const k=L[P.indices.bucket];let E=L[P.indices.path];E||(E=""),r=new Ut(k,E),P.postModify(r);break}}if(r==null)throw OD(e);return r}}class zD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function m(A){s=setTimeout(()=>{s=null,t(w,u())},A)}function g(){i&&clearTimeout(i)}function w(A,...x){if(d){g();return}if(A){g(),f.call(null,A,...x);return}if(u()||o){g(),f.call(null,A,...x);return}r<64&&(r*=2);let I;c===1?(c=2,I=0):I=(r+Math.random())*1e3,m(I)}let N=!1;function C(A){N||(N=!0,g(),!d&&(s!==null?(A||(c=2),clearTimeout(s),m(0)):A||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,C(!0)},n),C}function HD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(t){return t!==void 0}function WD(t){return typeof t=="object"&&!Array.isArray(t)}function Jm(t){return typeof t=="string"||t instanceof String}function sv(t){return Zm()&&t instanceof Blob}function Zm(){return typeof Blob<"u"}function iv(t,e,n,r){if(r<e)throw Qf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Qf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function IE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var As;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(As||(As={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n,r,s,i,o,c,u,d,f,m,g=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,C)=>{this.resolve_=N,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Jl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===As.NO_ERROR,u=i.getStatus();if(!c||KD(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===As.ABORT;r(!1,new Jl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Jl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());qD(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=Ym();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?TE():DD();o(u)}else{const u=PD();o(u)}};this.canceled_?n(!1,new Jl(!1,null,!0)):this.backoffId_=BD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function QD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function XD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZD(t,e,n,r,s,i,o=!0,c=!1){const u=IE(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return YD(f,e),QD(f,n),XD(f,i),JD(f,r),new GD(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function t6(...t){const e=e6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zm())return new Blob(t);throw new Fe(Me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function n6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(t){if(typeof atob>"u")throw UD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vh{constructor(e,n){this.data=e,this.contentType=n||null}}function s6(t,e){switch(t){case Nn.RAW:return new vh(kE(e));case Nn.BASE64:case Nn.BASE64URL:return new vh(SE(t,e));case Nn.DATA_URL:return new vh(o6(e),a6(e))}throw Ym()}function kE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function i6(t){let e;try{e=decodeURIComponent(t)}catch{throw ca(Nn.DATA_URL,"Malformed data URL.")}return kE(e)}function SE(t,e){switch(t){case Nn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ca(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Nn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ca(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=r6(e)}catch(s){throw s.message.includes("polyfill")?s:ca(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class CE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ca(Nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=l6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function o6(t){const e=new CE(t);return e.base64?SE(Nn.BASE64,e.rest):i6(e.rest)}function a6(t){return new CE(t).contentType}function l6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){let r=0,s="";sv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(sv(this.data_)){const r=this.data_,s=n6(r,e,n);return s===null?null:new Tr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Tr(r,!0)}}static getBlob(...e){if(Zm()){const n=e.map(r=>r instanceof Tr?r.data_:r);return new Tr(t6.apply(null,n))}else{const n=e.map(o=>Jm(o)?s6(Nn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new Tr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){let e;try{e=JSON.parse(t)}catch{return null}return WD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function u6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function RE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(t,e){return e}class bt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||d6}}let Zl=null;function h6(t){return!Jm(t)||t.length<2?t:RE(t)}function jE(){if(Zl)return Zl;const t=[];t.push(new bt("bucket")),t.push(new bt("generation")),t.push(new bt("metageneration")),t.push(new bt("name","fullPath",!0));function e(i,o){return h6(o)}const n=new bt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new bt("size");return s.xform=r,t.push(s),t.push(new bt("timeCreated")),t.push(new bt("updated")),t.push(new bt("md5Hash",null,!0)),t.push(new bt("cacheControl",null,!0)),t.push(new bt("contentDisposition",null,!0)),t.push(new bt("contentEncoding",null,!0)),t.push(new bt("contentLanguage",null,!0)),t.push(new bt("contentType",null,!0)),t.push(new bt("metadata","customMetadata",!0)),Zl=t,Zl}function f6(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ut(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function p6(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return f6(r,t),r}function PE(t,e,n){const r=AE(e);return r===null?null:p6(t,r,n)}function m6(t,e,n,r){const s=AE(e);if(s===null||!Jm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),w=eg(g,n,r),N=IE({alt:"media",token:d});return w+N})[0]}function g6(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class DE{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){if(!t)throw Ym()}function y6(t,e){function n(r,s){const i=PE(t,s,e);return OE(i!==null),i}return n}function x6(t,e){function n(r,s){const i=PE(t,s,e);return OE(i!==null),m6(i,s,t.host,t._protocol)}return n}function VE(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=RD():s=AD():n.getStatus()===402?s=CD(t.bucket):n.getStatus()===403?s=jD(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function v6(t){const e=VE(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=SD(t.path)),i.serverResponse=s.serverResponse,i}return n}function _6(t,e,n){const r=e.fullServerUrl(),s=eg(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new DE(s,i,x6(t,n),o);return c.errorHandler=v6(e),c}function w6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function b6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=w6(null,e)),r}function E6(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let I="";for(let D=0;D<2;D++)I=I+Math.random().toString().slice(2);return I}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=b6(e,r,s),f=g6(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=Tr.getBlob(m,r,g);if(w===null)throw MD();const N={name:d.fullPath},C=eg(i,t.host,t._protocol),A="POST",x=t.maxUploadRetryTime,y=new DE(C,A,y6(t,n),x);return y.urlParams=N,y.headers=o,y.body=w.uploadData(),y.errorHandler=VE(e),y}class N6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=As.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=As.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=As.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Vo("cannot .send() more than once");if(os(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class T6 extends N6{initXhr(){this.xhr_.responseType="text"}}function LE(){return new T6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this._service=e,n instanceof Ut?this._location=n:this._location=Ut.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zs(e,n)}get root(){const e=new Ut(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RE(this._location.path)}get storage(){return this._service}get parent(){const e=c6(this._location.path);if(e===null)return null;const n=new Ut(this._location.bucket,e);return new zs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $D(e)}}function I6(t,e,n){t._throwIfRoot("uploadBytes");const r=E6(t.storage,t._location,jE(),new Tr(e,!0),n);return t.storage.makeRequestWithTokens(r,LE).then(s=>({metadata:s,ref:t}))}function k6(t){t._throwIfRoot("getDownloadURL");const e=_6(t.storage,t._location,jE());return t.storage.makeRequestWithTokens(e,LE).then(n=>{if(n===null)throw FD();return n})}function S6(t,e){const n=u6(t._location.path,e),r=new Ut(t._location.bucket,n);return new zs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t){return/^[A-Za-z]+:\/\//.test(t)}function A6(t,e){return new zs(t,e)}function ME(t,e){if(t instanceof tg){const n=t;if(n._bucket==null)throw LD();const r=new zs(n,n._bucket);return e!=null?ME(r,e):r}else return e!==void 0?S6(t,e):t}function R6(t,e){if(e&&C6(e)){if(t instanceof tg)return A6(t,e);throw Qf("To use ref(service, url), the first argument must be a Storage instance.")}else return ME(t,e)}function ov(t,e){const n=e==null?void 0:e[NE];return n==null?null:Ut.makeFromBucketSpec(n,t)}function j6(t,e,n,r={}){t.host=`${e}:${n}`;const s=os(e);s&&(sm(`https://${t.host}/b`),im("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:sb(i,t.app.options.projectId))}class tg{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=EE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ID,this._maxUploadRetryTime=kD,this._requests=new Set,s!=null?this._bucket=Ut.makeFromBucketSpec(s,this._host):this._bucket=ov(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ut.makeFromBucketSpec(this._url,e):this._bucket=ov(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new zD(TE());{const o=ZD(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const av="@firebase/storage",lv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="storage";function P6(t,e,n){return t=Re(t),I6(t,e,n)}function D6(t){return t=Re(t),k6(t)}function O6(t,e){return t=Re(t),R6(t,e)}function V6(t=Uu(),e){t=Re(t);const r=ro(t,FE).getImmediate({identifier:e}),s=tb("storage");return s&&L6(r,...s),r}function L6(t,e,n,r={}){j6(t,e,n,r)}function M6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new tg(n,r,s,e,Ws)}function F6(){rr(new Pn(FE,M6,"PUBLIC").setMultipleInstances(!0)),pn(av,lv,""),pn(av,lv,"esm2020")}F6();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new Map,UE={activated:!1,tokenObservers:[]},U6={initialized:!1,enabled:!1};function Je(t){return Xf.get(t)||{...UE}}function $6(t,e){return Xf.set(t,e),Xf.get(t)}function ud(){return U6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="https://content-firebaseappcheck.googleapis.com/v1",z6="exchangeRecaptchaV3Token",B6="exchangeDebugToken",cv={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},H6=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Sa,this.pending.promise.catch(n=>{}),await W6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Sa,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function W6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},jt=new no("appCheck","AppCheck",K6);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t=!1){var e;return t?(e=self.grecaptcha)==null?void 0:e.enterprise:self.grecaptcha}function ng(t){if(!Je(t).activated)throw jt.create("use-before-activation",{appName:t.name})}function zE(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),s=Math.floor((e-n*3600*24-r*3600)/60),i=e-n*3600*24-r*3600-s*60;let o="";return n&&(o+=ec(n)+"d:"),r&&(o+=ec(r)+"h:"),o+=ec(s)+"m:"+ec(i)+"s",o}function ec(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rg({url:t,body:e},n){const r={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){const m=await s.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}const i={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,i)}catch(m){throw jt.create("fetch-network-error",{originalErrorMessage:m==null?void 0:m.message})}if(o.status!==200)throw jt.create("fetch-status-error",{httpStatus:o.status});let c;try{c=await o.json()}catch(m){throw jt.create("fetch-parse-error",{originalErrorMessage:m==null?void 0:m.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const d=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}}function G6(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${$E}/projects/${n}/apps/${r}:${z6}?key=${s}`,body:{recaptcha_v3_token:e}}}function BE(t,e){const{projectId:n,appId:r,apiKey:s}=t.options;return{url:`${$E}/projects/${n}/apps/${r}:${B6}?key=${s}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6="firebase-app-check-database",X6=1,Ua="firebase-app-check-store",HE="debug-token";let tc=null;function qE(){return tc||(tc=new Promise((t,e)=>{try{const n=indexedDB.open(Q6,X6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(jt.create("storage-open",{originalErrorMessage:(s=r.target.error)==null?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Ua,{keyPath:"compositeKey"})}}}catch(n){e(jt.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),tc)}function Y6(t){return KE(GE(t))}function J6(t,e){return WE(GE(t),e)}function Z6(t){return WE(HE,t)}function e3(){return KE(HE)}async function WE(t,e){const r=(await qE()).transaction(Ua,"readwrite"),i=r.objectStore(Ua).put({compositeKey:t,value:e});return new Promise((o,c)=>{i.onsuccess=u=>{o()},r.onerror=u=>{var d;c(jt.create("storage-set",{originalErrorMessage:(d=u.target.error)==null?void 0:d.message}))}})}async function KE(t){const n=(await qE()).transaction(Ua,"readonly"),s=n.objectStore(Ua).get(t);return new Promise((i,o)=>{s.onsuccess=c=>{const u=c.target.result;i(u?u.value:void 0)},n.onerror=c=>{var u;o(jt.create("storage-get",{originalErrorMessage:(u=c.target.error)==null?void 0:u.message}))}})}function GE(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Fu("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t3(t){if(om()){let e;try{e=await Y6(t)}catch(n){Cr.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function _h(t,e){return om()?J6(t,e).catch(n=>{Cr.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function n3(){let t;try{t=await e3()}catch{}if(t)return t;{const e=crypto.randomUUID();return Z6(e).catch(n=>Cr.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){return ud().enabled}async function ig(){const t=ud();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function r3(){const t=Zw(),e=ud();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new Sa;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(n3())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={error:"UNKNOWN_ERROR"};function i3(t){return rm.encodeString(JSON.stringify(t),!1)}async function Yf(t,e=!1,n=!1){const r=t.app;ng(r);const s=Je(r);let i=s.token,o;if(i&&!wi(i)&&(s.token=void 0,i=void 0),!i){const d=await s.cachedTokenPromise;d&&(wi(d)?i=d:await _h(r,void 0))}if(!e&&i&&wi(i))return{token:i.token};let c=!1;if(sg())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=rg(BE(r,await ig()),t.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),c=!0);const d=await s.exchangeTokenPromise;return await _h(r,d),s.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Cr.warn(d.message):n&&Cr.error(d),wh(d)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),c=!0),i=await Je(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Cr.warn(d.message):n&&Cr.error(d),o=d}let u;return i?o?wi(i)?u={token:i.token,internalError:o}:u=wh(o):(u={token:i.token},s.token=i,await _h(r,i)):u=wh(o),c&&YE(r,u),u}async function o3(t){const e=t.app;ng(e);const{provider:n}=Je(e);if(sg()){const r=await ig(),{token:s}=await rg(BE(e,r),t.heartbeatServiceProvider);return{token:s}}else{const{token:r}=await n.getToken();return{token:r}}}function QE(t,e,n,r){const{app:s}=t,i=Je(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&wi(i.token)){const c=i.token;Promise.resolve().then(()=>{n({token:c.token}),dv(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>dv(t))}function XE(t,e){const n=Je(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function dv(t){const{app:e}=t,n=Je(e);let r=n.tokenRefresher;r||(r=a3(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function a3(t){const{app:e}=t;return new q6(async()=>{const n=Je(e);let r;if(n.token?r=await Yf(t,!0):r=await Yf(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Je(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},cv.RETRIAL_MIN_WAIT,cv.RETRIAL_MAX_WAIT)}function YE(t,e){const n=Je(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function wi(t){return t.expireTimeMillis-Date.now()>0}function wh(t){return{token:i3(s3),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Je(this.app);for(const n of e)XE(this.app,n.next);return Promise.resolve()}}function c3(t,e){return new l3(t,e)}function u3(t){return{getToken:e=>Yf(t,e),getLimitedUseToken:()=>o3(t),addTokenListener:e=>QE(t,"INTERNAL",e),removeTokenListener:e=>XE(t.app,e)}}const d3="@firebase/app-check",h3="0.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="https://www.google.com/recaptcha/api.js";function p3(t,e){const n=new Sa,r=Je(t);r.reCAPTCHAState={initialized:n};const s=m3(t),i=uv(!1);return i?hv(t,e,i,s,n):x3(()=>{const o=uv(!1);if(!o)throw new Error("no recaptcha");hv(t,e,o,s,n)}),n.promise}function hv(t,e,n,r,s){n.ready(()=>{y3(t,e,n,r),s.resolve(n)})}function m3(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function g3(t){ng(t);const n=await Je(t).reCAPTCHAState.initialized.promise;return new Promise((r,s)=>{const i=Je(t).reCAPTCHAState;n.ready(()=>{r(n.execute(i.widgetId,{action:"fire_app_check"}))})})}function y3(t,e,n,r){const s=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Je(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Je(t).reCAPTCHAState.succeeded=!1}}),i=Je(t);i.reCAPTCHAState={...i.reCAPTCHAState,widgetId:s}}function x3(t){const e=document.createElement("script");e.src=f3,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var r,s,i;_3(this._throttleData);const e=await g3(this._app).catch(o=>{throw jt.create("recaptcha-error")});if(!((r=Je(this._app).reCAPTCHAState)!=null&&r.succeeded))throw jt.create("recaptcha-error");let n;try{n=await rg(G6(this._app,e),this._heartbeatServiceProvider)}catch(o){throw(s=o.code)!=null&&s.includes("fetch-status-error")?(this._throttleData=v3(Number((i=o.customData)==null?void 0:i.httpStatus),this._throttleData),jt.create("initial-throttle",{time:zE(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,n}initialize(e){this._app=e,this._heartbeatServiceProvider=ro(e,"heartbeat"),p3(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof og?this._siteKey===e._siteKey:!1}}function v3(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+H6,httpStatus:t};{const n=e?e.backoffCount:0,r=zS(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function _3(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw jt.create("throttled",{time:zE(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t=Uu(),e){t=Re(t);const n=ro(t,"app-check");if(ud().initialized||r3(),sg()&&ig().then(s=>console.log(`App Check debug token: ${s}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(i.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&i.provider.isEqual(e.provider))return s;throw jt.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return b3(t,e.provider,e.isTokenAutoRefreshEnabled),Je(t).isTokenAutoRefreshEnabled&&QE(r,"INTERNAL",()=>{}),r}function b3(t,e,n=!1){const r=$6(t,{...UE});r.activated=!0,r.provider=e,r.cachedTokenPromise=t3(t).then(s=>(s&&wi(s)&&(r.token=s,YE(t,{token:s.token})),s)),r.isTokenAutoRefreshEnabled=n&&t.automaticDataCollectionEnabled,!t.automaticDataCollectionEnabled&&n&&Cr.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(t)}const E3="app-check",fv="app-check-internal";function N3(){rr(new Pn(E3,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return c3(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(fv).initialize()})),rr(new Pn(fv,t=>{const e=t.getProvider("app-check").getImmediate();return u3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),pn(d3,h3)}N3();const T3={apiKey:"AIzaSyCwXCs0LEzqpO4lfWvXR6dGIQm8Nb-9FYc",authDomain:"gen-lang-client-0848034244.firebaseapp.com",projectId:"gen-lang-client-0848034244",storageBucket:"gen-lang-client-0848034244.firebasestorage.app",messagingSenderId:"511888474862",appId:"1:511888474862:web:67ad0a998ed2f84e75a9ff",measurementId:"G-6L7CVRRB1J"},dd=ab(T3);typeof window<"u"&&w3(dd,{provider:new og("6LcdXpgrAAAAAIIz9-fGWaBMjJBCeUF0SNONMWgJ"),isTokenAutoRefreshEnabled:!0});const bh=Bb(dd),Xt=iD(dd),I3=V6(dd),JE=j.createContext(void 0),ds=()=>{const t=j.useContext(JE);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},k3=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(!0),i=(e==null?void 0:e.email)==="admin@admin.com",o=async(d,f)=>{var m;try{const g=_s(Nr(Xt,"userSessions"),mD("email","==",d)),w=await vD(g);if(!w.empty){const C=w.docs[0],x=(m=C.data().createdAt)==null?void 0:m.toDate();if((new Date().getTime()-x.getTime())/(1e3*60*60)<24)throw new Error("এই অ্যাকাউন্ট অন্য ডিভাইসে লগইন করা আছে। প্রথমে সেখান থেকে লগআউট করুন।");await Gf(C.ref)}await GA(bh,d,f);const N=Bb().currentUser;N&&await _D(Fa(Xt,"userSessions",N.uid),{email:N.email,userId:N.uid,createdAt:new Date,deviceInfo:navigator.userAgent}),q.success("সফলভাবে লগইন হয়েছে!")}catch(g){throw g.message.includes("অন্য ডিভাইসে")?q.error(g.message):q.error("লগইন করতে সমস্যা হয়েছে!"),g}},c=async()=>{try{e&&await Gf(Fa(Xt,"userSessions",e.uid)),await JA(bh),q.success("সফলভাবে লগআউট হয়েছে!")}catch(d){throw q.error("লগআউট করতে সমস্যা হয়েছে!"),d}};j.useEffect(()=>YA(bh,f=>{n(f),s(!1)}),[]);const u={currentUser:e,login:o,logout:c,loading:r,isAdmin:i};return a.jsx(JE.Provider,{value:u,children:!r&&t})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),pv=t=>{const e=C3(t);return e.charAt(0).toUpperCase()+e.slice(1)},ZE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),A3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...c},u)=>j.createElement("svg",{ref:u,...R3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ZE("lucide",s),...!i&&!A3(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,f])=>j.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(t,e)=>{const n=j.forwardRef(({className:r,...s},i)=>j.createElement(j3,{ref:i,iconNode:e,className:ZE(`lucide-${S3(pv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=pv(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],es=oe("award",P3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Rs=oe("book-open",D3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kn=oe("calendar",O3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mv=oe("chart-column",V3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Jf=oe("check",L3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],F3=oe("chevron-left",M3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$3=oe("chevron-right",U3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$a=oe("circle-check-big",z3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],H3=oe("circle-play",B3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zf=oe("circle-question-mark",q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ki=oe("clock",W3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ep=oe("credit-card",K3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ag=oe("download",G3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cl=oe("external-link",Q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eN=oe("eye",X3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],lg=oe("file-text",Y3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Z3=oe("file",J3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],tO=oe("grip-vertical",eO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],cg=oe("heart",nO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],sO=oe("log-in",rO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],oO=oe("log-out",iO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],lO=oe("medal",aO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],gv=oe("message-circle",cO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Gi=oe("message-square",uO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]],hO=oe("pin-off",dO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],yv=oe("pin",fO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Qi=oe("play",pO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ar=oe("plus",mO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yO=oe("refresh-cw",gO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vO=oe("settings",xO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],wO=oe("share-2",_O);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xs=oe("square-pen",bO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],NO=oe("star",EO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],On=oe("trash-2",TO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kO=oe("trending-up",IO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Hr=oe("trophy",SO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],AO=oe("upload",CO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ji=oe("user",RO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],za=oe("users",jO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],tp=oe("video",PO);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],js=oe("x",DO),OO=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(!1),{login:o}=ds(),c=async u=>{u.preventDefault(),i(!0);try{await o(t,n)}catch(d){console.error("Login error:",d)}finally{i(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(Rs,{className:"h-16 w-16 text-blue-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"শিক্ষা প্ল্যাটফর্মে স্বাগতম"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"আপনার অ্যাকাউন্টে লগইন করুন"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"ইমেইল"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"আপনার ইমেইল লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"পাসওয়ার্ড"}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:n,onChange:u=>r(u.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"আপনার পাসওয়ার্ড লিখুন"})]})]}),a.jsx("div",{children:a.jsxs("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:[a.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:a.jsx(sO,{className:"h-5 w-5 text-blue-200 group-hover:text-blue-100"})}),s?"লগইন হচ্ছে...":"লগইন করুন"]})})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"এডমিন অ্যাকাউন্ট: admin@admin.com"})})]})})},ug=()=>{const[t,e]=j.useState({totalUsers:0,totalVideos:0,totalTopics:0,totalPosts:0,totalEvents:0,averageProgress:0}),[n,r]=j.useState(!0);return j.useEffect(()=>{const s=[],i=_s(Nr(Xt,"userProfiles")),o=ai(i,C=>{e(A=>({...A,totalUsers:C.size}))});s.push(o);const c=_s(Nr(Xt,"videos")),u=ai(c,C=>{e(A=>({...A,totalVideos:C.size}))});s.push(u);const d=_s(Nr(Xt,"topics")),f=ai(d,C=>{e(A=>({...A,totalTopics:C.size}))});s.push(f);const m=_s(Nr(Xt,"posts")),g=ai(m,C=>{e(A=>({...A,totalPosts:C.size}))});s.push(g);const w=_s(Nr(Xt,"events")),N=ai(w,C=>{e(A=>({...A,totalEvents:C.size})),r(!1)});return s.push(N),()=>{s.forEach(C=>C())}},[]),{stats:t,loading:n}},de=(t,e,n)=>{const[r,s]=j.useState([]),[i,o]=j.useState(!0),[c,u]=j.useState(null);return j.useEffect(()=>{o(!0);let g=Nr(Xt,t);e&&(g=_s(g,gD(e)));const w=ai(g,N=>{const C=N.docs.map(A=>{const x=A.data(),y=Object.keys(x).reduce((I,D)=>{const P=x[D];return P instanceof ve?I[D]=P.toDate():I[D]=P,I},{});return{id:A.id,...y,createdAt:x.createdAt instanceof ve?x.createdAt.toDate():x.createdAt||new Date}});s(C),o(!1),u(null)},N=>{console.error("Firestore error:",N),u(N.message),o(!1)});return()=>w()},[t,e,n==null?void 0:n.field,n==null?void 0:n.operator,n==null?void 0:n.value]),{documents:r,loading:i,error:c,addDocument:async g=>{try{const w=Object.keys(g).reduce((C,A)=>{const x=g[A];return x instanceof Date?C[A]=ve.fromDate(x):C[A]=x,C},{});return(await bD(Nr(Xt,t),{...w,createdAt:ve.fromDate(new Date)})).id}catch(w){throw u(w.message),w}},updateDocument:async(g,w)=>{try{const N=Object.keys(w).reduce((C,A)=>{const x=w[A];return x instanceof Date?C[A]=ve.fromDate(x):C[A]=x,C},{});await wD(Fa(Xt,t,g),N)}catch(N){throw u(N.message),N}},deleteDocument:async g=>{try{await Gf(Fa(Xt,t,g))}catch(w){throw u(w.message),w}}}},Ba=async(t,e)=>{try{const n=O6(I3,`${e}/${Date.now()}_${t.name}`),r=await P6(n,t);return await D6(r.ref)}catch(n){throw console.error("File upload error:",n),q.error("ফাইল আপলোড করতে সমস্যা হয়েছে"),n}},xu=t=>{if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]},Ha=t=>t.includes("image")?"🖼️":t.includes("video")?"🎥":t.includes("audio")?"🎵":t.includes("pdf")?"📄":t.includes("document")||t.includes("word")?"📝":t.includes("spreadsheet")||t.includes("excel")?"📊":t.includes("presentation")||t.includes("powerpoint")?"📋":t.includes("zip")||t.includes("rar")?"📦":"📁",VO=()=>{const{documents:t,addDocument:e,updateDocument:n,deleteDocument:r}=de("topics","order"),[s,i]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState({name:"",description:"",thumbnail:"",order:0}),[f,m]=j.useState(!1),g=()=>{d({name:"",description:"",thumbnail:"",order:t.length}),c(null)},w=y=>{y?(d({name:y.name,description:y.description,thumbnail:y.thumbnail||"",order:y.order}),c(y)):g(),i(!0)},N=()=>{i(!1),g()},C=async y=>{y.preventDefault();try{o?(await n(o.id,u),q.success("টপিক আপডেট হয়েছে!")):(await e(u),q.success("নতুন টপিক যোগ করা হয়েছে!")),N()}catch{q.error("সমস্যা হয়েছে!")}},A=async y=>{if(window.confirm("আপনি কি নিশ্চিত যে এই টপিকটি মুছে ফেলতে চান?"))try{await r(y),q.success("টপিক মুছে ফেলা হয়েছে!")}catch{q.error("মুছে ফেলতে সমস্যা হয়েছে!")}},x=async y=>{var D;const I=(D=y.target.files)==null?void 0:D[0];if(I){if(!I.type.startsWith("image/")){q.error("শুধুমাত্র ছবি আপলোড করুন!");return}m(!0);try{const P=await Ba(I,"topic-thumbnails");d({...u,thumbnail:P}),q.success("ছবি আপলোড হয়েছে!")}catch{q.error("ছবি আপলোড করতে সমস্যা হয়েছে!")}finally{m(!1)}}};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"টপিক ম্যানেজমেন্ট"}),a.jsxs("button",{onClick:()=>w(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"নতুন টপিক"})]})]}),a.jsx("div",{className:"space-y-4",children:t.map(y=>a.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[a.jsx(tO,{className:"h-5 w-5 text-gray-400"}),y.thumbnail&&a.jsx("img",{src:y.thumbnail,alt:y.name,className:"w-12 h-12 object-cover rounded-lg"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:y.name}),a.jsx("p",{className:"text-sm text-gray-600",children:y.description})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>w(y),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>A(y.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(On,{className:"h-4 w-4"})})]})]},y.id))}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:o?"টপিক এডিট করুন":"নতুন টপিক যোগ করুন"}),a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"টপিকের নাম"}),a.jsx("input",{type:"text",required:!0,value:u.name,onChange:y=>d({...u,name:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"টপিকের নাম লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"বিবরণ"}),a.jsx("textarea",{value:u.description,onChange:y=>d({...u,description:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"টপিকের বিবরণ লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"থাম্বনেইল ছবি"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:f}),u.thumbnail&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:u.thumbnail,alt:"Preview",className:"w-full h-32 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>d({...u,thumbnail:""}),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:a.jsx(On,{className:"h-3 w-3"})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ক্রম নম্বর"}),a.jsx("input",{type:"number",value:u.order,onChange:y=>d({...u,order:parseInt(y.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:f?"আপলোড হচ্ছে...":o?"আপডেট করুন":"যোগ করুন"}),a.jsx("button",{type:"button",onClick:N,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})})]})},dg=t=>{const e=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,n=t.match(e);return n?n[1]:""},hg=(t,e="medium")=>`https://img.youtube.com/vi/${t}/${e==="medium"?"mqdefault":e==="high"?"hqdefault":e==="standard"?"sddefault":e==="maxres"?"maxresdefault":"default"}.jpg`,fg=({videoId:t,isOpen:e,onClose:n,title:r})=>e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r||"ভিডিও প্লেয়ার"}),a.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(js,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"relative pt-[56.25%] bg-black",children:a.jsx("iframe",{className:"absolute inset-0 w-full h-full",src:`https://www.youtube.com/embed/${t}?autoplay=1&rel=0`,title:r,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null,LO=()=>{const{documents:t,addDocument:e,updateDocument:n,deleteDocument:r}=de("videos","order"),{documents:s}=de("topics","order"),[i,o]=j.useState(!1),[c,u]=j.useState(null),[d,f]=j.useState({isOpen:!1,videoId:"",title:""}),[m,g]=j.useState({title:"",description:"",youtubeUrl:"",topicId:"",files:[],order:0}),[w,N]=j.useState(!1),C=()=>{g({title:"",description:"",youtubeUrl:"",topicId:"",files:[],order:t.length}),u(null)},A=b=>{b?(g({title:b.title,description:b.description,youtubeUrl:b.youtubeUrl,topicId:b.topicId,files:b.files||[],order:b.order}),u(b)):C(),o(!0)},x=()=>{o(!1),C()},y=async b=>{b.preventDefault();const _=dg(m.youtubeUrl);if(!_){q.error("সঠিক ইউটিউব লিংক দিন!");return}try{const S={...m,videoId:_};c?(await n(c.id,S),q.success("ভিডিও আপডেট হয়েছে!")):(await e(S),q.success("নতুন ভিডিও যোগ করা হয়েছে!")),x()}catch{q.error("সমস্যা হয়েছে!")}},I=async b=>{if(window.confirm("আপনি কি নিশ্চিত যে এই ভিডিওটি মুছে ফেলতে চান?"))try{await r(b),q.success("ভিডিও মুছে ফেলা হয়েছে!")}catch{q.error("মুছে ফেলতে সমস্যা হয়েছে!")}},D=async b=>{const _=Array.from(b.target.files||[]);if(_.length!==0){N(!0);try{const S=_.map(async v=>{const z=await Ba(v,"video-files");return{id:Date.now()+Math.random(),name:v.name,url:z,size:v.size,type:v.type}}),R=await Promise.all(S);g({...m,files:[...m.files,...R]}),q.success("ফাইল আপলোড হয়েছে!")}catch{q.error("ফাইল আপলোড করতে সমস্যা হয়েছে!")}finally{N(!1)}}},P=b=>{g({...m,files:m.files.filter(_=>_.id!==b)})},L=(b,_)=>{f({isOpen:!0,videoId:b,title:_})},k=()=>{f({isOpen:!1,videoId:"",title:""})},E=b=>{const _=s.find(S=>S.id===b);return _?_.name:"অজানা টপিক"};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ভিডিও ম্যানেজমেন্ট"}),a.jsxs("button",{onClick:()=>A(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"নতুন ভিডিও"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(b=>a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:hg(b.videoId),alt:b.title,className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>L(b.videoId,b.title),className:"bg-white text-gray-900 p-3 rounded-full hover:bg-gray-100 transition-colors mr-2",children:a.jsx(Qi,{className:"h-5 w-5"})}),a.jsx("a",{href:b.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-white text-gray-900 p-3 rounded-full hover:bg-gray-100 transition-colors",children:a.jsx(cl,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:b.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:b.description}),a.jsx("p",{className:"text-xs text-blue-600 mb-3",children:E(b.topicId)}),b.files&&b.files.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[b.files.length," টি ফাইল"]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.files.slice(0,3).map((_,S)=>a.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[Ha(_.type)," ",_.name.length>10?_.name.substring(0,10)+"...":_.name]},S)),b.files.length>3&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",b.files.length-3," আরো"]})]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:["ক্রম: ",b.order]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>A(b),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>I(b.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(On,{className:"h-4 w-4"})})]})]})]})]},b.id))}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:c?"ভিডিও এডিট করুন":"নতুন ভিডিও যোগ করুন"}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ভিডিওর শিরোনাম"}),a.jsx("input",{type:"text",required:!0,value:m.title,onChange:b=>g({...m,title:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ভিডিওর শিরোনাম লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"বিবরণ"}),a.jsx("textarea",{value:m.description,onChange:b=>g({...m,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"ভিডিওর বিবরণ লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ইউটিউব লিংক"}),a.jsx("input",{type:"url",required:!0,value:m.youtubeUrl,onChange:b=>g({...m,youtubeUrl:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://youtube.com/watch?v=..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"টপিক"}),a.jsxs("select",{required:!0,value:m.topicId,onChange:b=>g({...m,topicId:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"টপিক নির্বাচন করুন"}),s.map(b=>a.jsx("option",{value:b.id,children:b.name},b.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ফাইল আপলোড করুন"}),a.jsx("input",{type:"file",multiple:!0,onChange:D,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w}),m.files.length>0&&a.jsx("div",{className:"mt-2 space-y-2",children:m.files.map(b=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{children:Ha(b.type)}),a.jsx("span",{className:"text-sm",children:b.name}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",xu(b.size),")"]})]}),a.jsx("button",{type:"button",onClick:()=>P(b.id),className:"text-red-500 hover:text-red-700",children:a.jsx(On,{className:"h-4 w-4"})})]},b.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ক্রম নম্বর"}),a.jsx("input",{type:"number",value:m.order,onChange:b=>g({...m,order:parseInt(b.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:w,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:w?"আপলোড হচ্ছে...":c?"আপডেট করুন":"যোগ করুন"}),a.jsx("button",{type:"button",onClick:x,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})}),a.jsx(fg,{videoId:d.videoId,isOpen:d.isOpen,onClose:k,title:d.title})]})},MO=()=>{const{documents:t,addDocument:e,updateDocument:n,deleteDocument:r}=de("categories","createdAt"),{documents:s,updateDocument:i,deleteDocument:o}=de("posts","createdAt"),[c,u]=j.useState("categories"),[d,f]=j.useState(!1),[m,g]=j.useState(null),[w,N]=j.useState({name:"",description:"",color:"#3B82F6"}),C=()=>{N({name:"",description:"",color:"#3B82F6"}),g(null)},A=_=>{_?(N({name:_.name,description:_.description,color:_.color}),g(_)):C(),f(!0)},x=()=>{f(!1),C()},y=async _=>{_.preventDefault();try{m?(await n(m.id,w),q.success("ক্যাটাগরি আপডেট হয়েছে!")):(await e(w),q.success("নতুন ক্যাটাগরি যোগ করা হয়েছে!")),x()}catch{q.error("সমস্যা হয়েছে!")}},I=async _=>{if(window.confirm("আপনি কি নিশ্চিত যে এই ক্যাটাগরিটি মুছে ফেলতে চান?"))try{await r(_),q.success("ক্যাটাগরি মুছে ফেলা হয়েছে!")}catch{q.error("মুছে ফেলতে সমস্যা হয়েছে!")}},D=async _=>{try{await i(_,{approved:!0}),q.success("পোস্ট অনুমোদিত হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},P=async _=>{if(window.confirm("আপনি কি নিশ্চিত যে এই পোস্টটি প্রত্যাখ্যান করতে চান?"))try{await o(_),q.success("পোস্ট প্রত্যাখ্যান করা হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},L=async(_,S)=>{try{await i(_,{pinned:!S}),q.success(S?"পোস্ট আনপিন করা হয়েছে!":"পোস্ট পিন করা হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},k=_=>{const S=t.find(R=>R.id===_);return S?S.name:"অজানা ক্যাটাগরি"},E=s.filter(_=>!_.approved),b=s.filter(_=>_.approved);return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"কমিউনিটি ম্যানেজমেন্ট"})}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"categories",label:"ক্যাটাগরি"},{id:"pending",label:`অপেক্ষমাণ পোস্ট (${E.length})`},{id:"approved",label:"অনুমোদিত পোস্ট"}].map(_=>a.jsx("button",{onClick:()=>u(_.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c===_.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:_.label},_.id))})}),c==="categories"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"ক্যাটাগরি তালিকা"}),a.jsxs("button",{onClick:()=>A(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"নতুন ক্যাটাগরি"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(_=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:_.color}}),a.jsx("h4",{className:"font-semibold text-gray-900",children:_.name})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:_.description}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>A(_),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>I(_.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(On,{className:"h-4 w-4"})})]})]},_.id))})]}),c==="pending"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"অপেক্ষমাণ পোস্ট"}),a.jsxs("div",{className:"space-y-4",children:[E.map(_=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:_.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[_.authorName," • ",k(_.categoryId)]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>D(_.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"অনুমোদন করুন",children:a.jsx(Jf,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>P(_.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"প্রত্যাখ্যান করুন",children:a.jsx(js,{className:"h-4 w-4"})})]})]}),a.jsx("p",{className:"text-gray-700 mb-3",children:_.content}),_.imageUrl&&a.jsx("img",{src:_.imageUrl,alt:"Post",className:"w-full max-w-md h-48 object-cover rounded-lg"})]},_.id)),E.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:"কোন অপেক্ষমাণ পোস্ট নেই"})]})]}),c==="approved"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"অনুমোদিত পোস্ট"}),a.jsxs("div",{className:"space-y-4",children:[b.map(_=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:_.title}),_.pinned&&a.jsx(yv,{className:"h-4 w-4 text-blue-600"})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[_.authorName," • ",k(_.categoryId)]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>L(_.id,_.pinned),className:`p-2 rounded-lg transition-colors ${_.pinned?"text-blue-600 hover:bg-blue-50":"text-gray-600 hover:bg-gray-50"}`,title:_.pinned?"আনপিন করুন":"পিন করুন",children:_.pinned?a.jsx(hO,{className:"h-4 w-4"}):a.jsx(yv,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>P(_.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"মুছে ফেলুন",children:a.jsx(On,{className:"h-4 w-4"})})]})]}),a.jsx("p",{className:"text-gray-700 mb-3",children:_.content}),_.imageUrl&&a.jsx("img",{src:_.imageUrl,alt:"Post",className:"w-full max-w-md h-48 object-cover rounded-lg mb-3"}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(cg,{className:"h-4 w-4"}),a.jsx("span",{children:_.likesCount})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Gi,{className:"h-4 w-4"}),a.jsx("span",{children:_.commentsCount})]})]})]},_.id)),b.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:"কোন অনুমোদিত পোস্ট নেই"})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:m?"ক্যাটাগরি এডিট করুন":"নতুন ক্যাটাগরি যোগ করুন"}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ক্যাটাগরির নাম"}),a.jsx("input",{type:"text",required:!0,value:w.name,onChange:_=>N({...w,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ক্যাটাগরির নাম লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"বিবরণ"}),a.jsx("textarea",{value:w.description,onChange:_=>N({...w,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"ক্যাটাগরির বিবরণ লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"রঙ"}),a.jsx("input",{type:"color",value:w.color,onChange:_=>N({...w,color:_.target.value}),className:"w-full h-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:m?"আপডেট করুন":"যোগ করুন"}),a.jsx("button",{type:"button",onClick:x,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})})]})},FO=()=>{const{documents:t,addDocument:e,updateDocument:n,deleteDocument:r}=de("events","date"),[s,i]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState({title:"",description:"",date:"",time:"",liveLink:"",type:"live"}),f=()=>{d({title:"",description:"",date:"",time:"",liveLink:"",type:"live"}),c(null)},m=y=>{if(y){const I=y.date instanceof Date?y.date:new Date(y.date);d({title:y.title,description:y.description,date:I.toISOString().split("T")[0],time:y.time,liveLink:y.liveLink||"",type:y.type}),c(y)}else f();i(!0)},g=()=>{i(!1),f()},w=async y=>{y.preventDefault();try{const I={...u,date:new Date(u.date+"T00:00:00")};o?(await n(o.id,I),q.success("ইভেন্ট আপডেট হয়েছে!")):(await e(I),q.success("নতুন ইভেন্ট যোগ করা হয়েছে!")),g()}catch{q.error("সমস্যা হয়েছে!")}},N=async y=>{if(window.confirm("আপনি কি নিশ্চিত যে এই ইভেন্টটি মুছে ফেলতে চান?"))try{await r(y),q.success("ইভেন্ট মুছে ফেলা হয়েছে!")}catch{q.error("মুছে ফেলতে সমস্যা হয়েছে!")}},C=y=>{switch(y){case"live":return"bg-red-100 text-red-800";case"assignment":return"bg-blue-100 text-blue-800";case"exam":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},A=y=>{switch(y){case"live":return"লাইভ ক্লাস";case"assignment":return"অ্যাসাইনমেন্ট";case"exam":return"পরীক্ষা";default:return"অন্যান্য"}},x=y=>{const I=y instanceof Date?y:new Date(y);return new Intl.DateTimeFormat("bn-BD",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(I)};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ক্যালেন্ডার ম্যানেজমেন্ট"}),a.jsxs("button",{onClick:()=>m(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"নতুন ইভেন্ট"})]})]}),a.jsxs("div",{className:"space-y-4",children:[t.map(y=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y.title}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(y.type)}`,children:A(y.type)})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:y.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Kn,{className:"h-4 w-4"}),a.jsx("span",{children:x(y.date)})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:y.time})]}),y.liveLink&&a.jsxs("a",{href:y.liveLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800",children:[a.jsx(cl,{className:"h-4 w-4"}),a.jsx("span",{children:"লাইভ লিংক"})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>m(y),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>N(y.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(On,{className:"h-4 w-4"})})]})]})},y.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Kn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"কোন ইভেন্ট নেই"})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:o?"ইভেন্ট এডিট করুন":"নতুন ইভেন্ট যোগ করুন"}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ইভেন্টের শিরোনাম"}),a.jsx("input",{type:"text",required:!0,value:u.title,onChange:y=>d({...u,title:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ইভেন্টের শিরোনাম লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"বিবরণ"}),a.jsx("textarea",{value:u.description,onChange:y=>d({...u,description:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"ইভেন্টের বিবরণ লিখুন"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"তারিখ"}),a.jsx("input",{type:"date",required:!0,value:u.date,onChange:y=>d({...u,date:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"সময়"}),a.jsx("input",{type:"time",required:!0,value:u.time,onChange:y=>d({...u,time:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ইভেন্টের ধরন"}),a.jsxs("select",{value:u.type,onChange:y=>d({...u,type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"live",children:"লাইভ ক্লাস"}),a.jsx("option",{value:"assignment",children:"অ্যাসাইনমেন্ট"}),a.jsx("option",{value:"exam",children:"পরীক্ষা"}),a.jsx("option",{value:"other",children:"অন্যান্য"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"লাইভ লিংক (ঐচ্ছিক)"}),a.jsx("input",{type:"url",value:u.liveLink,onChange:y=>d({...u,liveLink:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:o?"আপডেট করুন":"যোগ করুন"}),a.jsx("button",{type:"button",onClick:g,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})})]})},UO=()=>{const{documents:t,addDocument:e,updateDocument:n,deleteDocument:r}=de("quizzes","createdAt"),{documents:s}=de("videos","order"),{documents:i}=de("topics","order"),{documents:o}=de("userProgress","submittedAt"),[c,u]=j.useState(!1),[d,f]=j.useState(null),[m,g]=j.useState(null),[w,N]=j.useState({videoId:"",questions:[],passingScore:70,points:10}),C=()=>{N({videoId:"",questions:[],passingScore:70,points:10}),f(null)},A=S=>{S?(N({videoId:S.videoId,questions:S.questions,passingScore:S.passingScore,points:S.points}),f(S)):C(),u(!0)},x=()=>{u(!1),C()},y=()=>{const S={id:Date.now().toString(),question:"",options:["","","",""],correctAnswer:0};N({...w,questions:[...w.questions,S]})},I=(S,R,v)=>{const z=[...w.questions];z[S]={...z[S],[R]:v},N({...w,questions:z})},D=(S,R,v)=>{const z=[...w.questions];z[S].options[R]=v,N({...w,questions:z})},P=S=>{const R=w.questions.filter((v,z)=>z!==S);N({...w,questions:R})},L=async S=>{if(S.preventDefault(),w.questions.length===0){q.error("অন্তত একটি প্রশ্ন যোগ করুন!");return}for(let R=0;R<w.questions.length;R++){const v=w.questions[R];if(!v.question.trim()){q.error(`প্রশ্ন ${R+1} এর জন্য প্রশ্ন লিখুন!`);return}if(v.options.some(z=>!z.trim())){q.error(`প্রশ্ন ${R+1} এর সব অপশন পূরণ করুন!`);return}}try{d?(await n(d.id,w),q.success("কুইজ আপডেট হয়েছে!")):(await e(w),q.success("নতুন কুইজ যোগ করা হয়েছে!")),x()}catch{q.error("সমস্যা হয়েছে!")}},k=async S=>{if(window.confirm("আপনি কি নিশ্চিত যে এই কুইজটি মুছে ফেলতে চান?"))try{await r(S),q.success("কুইজ মুছে ফেলা হয়েছে!")}catch{q.error("মুছে ফেলতে সমস্যা হয়েছে!")}},E=S=>{const R=s.find(v=>v.id===S);return R?R.title:"অজানা ভিডিও"},b=S=>{const R=s.find(z=>z.id===S);if(!R)return"অজানা টপিক";const v=i.find(z=>z.id===R.topicId);return v?v.name:"অজানা টপিক"},_=S=>o.filter(R=>{var v;return R.videoId===((v=t.find(z=>z.id===S))==null?void 0:v.videoId)&&R.quizScore!==void 0});return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"কুইজ ম্যানেজমেন্ট"}),a.jsx("p",{className:"text-gray-600",children:"ভিডিওর জন্য কুইজ তৈরি এবং পরিচালনা করুন"})]}),a.jsxs("button",{onClick:()=>A(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"নতুন কুইজ"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(S=>{const R=_(S.id),v=R.length>0?R.reduce((z,pe)=>z+(pe.quizScore||0),0)/R.length:0;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zf,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"font-semibold text-gray-900",children:"কুইজ"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>g(m===S.id?null:S.id),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"ফলাফল দেখুন",children:a.jsx(eN,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>A(S),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>k(S.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(On,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:E(S.videoId)}),a.jsx("p",{className:"text-sm text-blue-600",children:b(S.videoId)}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:[S.questions.length," টি প্রশ্ন"]}),a.jsxs("span",{children:["পাসিং: ",S.passingScore,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(es,{className:"h-4 w-4 text-yellow-500"}),a.jsxs("span",{className:"text-sm font-medium text-yellow-600",children:[S.points," পয়েন্ট"]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[R.length," জন অংশগ্রহণ"]})]}),R.length>0&&a.jsxs("div",{className:"text-sm text-green-600",children:["গড় স্কোর: ",v.toFixed(1),"%"]})]}),m===S.id&&R.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"কুইজের ফলাফল"}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:R.map(z=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-700",children:"ব্যবহারকারী"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:`font-medium ${(z.quizScore||0)>=S.passingScore?"text-green-600":"text-red-600"}`,children:[z.quizScore,"%"]}),(z.quizScore||0)>=S.passingScore&&a.jsx($a,{className:"h-4 w-4 text-green-600"})]})]},z.id))})]})]},S.id)}),t.length===0&&a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx(Zf,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"কোন কুইজ নেই"})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:d?"কুইজ এডিট করুন":"নতুন কুইজ তৈরি করুন"}),a.jsxs("form",{onSubmit:L,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ভিডিও নির্বাচন করুন"}),a.jsxs("select",{required:!0,value:w.videoId,onChange:S=>N({...w,videoId:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"ভিডিও নির্বাচন করুন"}),s.map(S=>a.jsx("option",{value:S.id,children:S.title},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"পাসিং স্কোর (%)"}),a.jsx("input",{type:"number",min:"0",max:"100",value:w.passingScore,onChange:S=>N({...w,passingScore:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"পয়েন্ট"}),a.jsx("input",{type:"number",min:"1",value:w.points,onChange:S=>N({...w,points:parseInt(S.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"প্রশ্নসমূহ"}),a.jsxs("button",{type:"button",onClick:y,className:"flex items-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"প্রশ্ন যোগ করুন"})]})]}),a.jsx("div",{className:"space-y-6",children:w.questions.map((S,R)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("h5",{className:"font-medium text-gray-900",children:["প্রশ্ন ",R+1]}),a.jsx("button",{type:"button",onClick:()=>P(R),className:"text-red-600 hover:text-red-800",children:a.jsx(On,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"প্রশ্ন লিখুন...",value:S.question,onChange:v=>I(R,"question",v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:S.options.map((v,z)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"radio",name:`correct-${R}`,checked:S.correctAnswer===z,onChange:()=>I(R,"correctAnswer",z),className:"text-blue-600"}),a.jsx("input",{type:"text",placeholder:`অপশন ${z+1}`,value:v,onChange:pe=>D(R,z,pe.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]},z))})]})]},S.id))})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:d?"আপডেট করুন":"কুইজ তৈরি করুন"}),a.jsx("button",{type:"button",onClick:x,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})})]})},$O=()=>{var w,N,C;const{documents:t}=de("userProgress","submittedAt"),{documents:e}=de("videos","order"),{documents:n}=de("topics","order"),{documents:r}=de("userProfiles"),[s,i]=j.useState(null),[o,c]=j.useState("all"),u=A=>{const x=e.find(y=>y.id===A);return x?x.title:"অজানা ভিডিও"},d=A=>{const x=e.find(I=>I.id===A);if(!x)return"অজানা টপিক";const y=n.find(I=>I.id===x.topicId);return y?y.name:"অজানা টপিক"},f=A=>r.find(x=>x.userId===A),m=t.filter(A=>o==="pending"?!A.watched:o==="completed"?A.watched:!0),g=A=>new Intl.DateTimeFormat("bn-BD",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(A);return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"শিক্ষার্থীর অগ্রগতি"}),a.jsx("p",{className:"text-gray-600",children:"শিক্ষার্থীদের ভিডিও সম্পূর্ণকরণ এবং প্রজেক্ট জমা দেখুন"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["সব (",t.length,")"]}),a.jsxs("button",{onClick:()=>c("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o==="pending"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["অপেক্ষমাণ (",t.filter(A=>!A.watched).length,")"]}),a.jsxs("button",{onClick:()=>c("completed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o==="completed"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["সম্পূর্ণ (",t.filter(A=>A.watched).length,")"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[m.map(A=>{const x=f(A.userId);return a.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${(s==null?void 0:s.id)===A.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>i(A),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[x!=null&&x.avatar?a.jsx("img",{src:x.avatar,alt:x.displayName,className:"w-10 h-10 rounded-full object-cover"}):a.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx(ji,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:(x==null?void 0:x.displayName)||"ব্যবহারকারী"}),a.jsx("p",{className:"text-sm text-gray-600",children:u(A.videoId)})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[A.watched?a.jsx($a,{className:"h-5 w-5 text-green-600"}):a.jsx(Ki,{className:"h-5 w-5 text-orange-600"}),A.quizScore!==void 0&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(es,{className:"h-4 w-4 text-yellow-600"}),a.jsxs("span",{className:"text-sm font-medium text-yellow-600",children:[A.quizScore,"%"]})]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{className:"mb-1",children:["টপিক: ",d(A.videoId)]}),A.submittedAt&&a.jsxs("p",{children:["জমা দেওয়া: ",g(A.submittedAt)]})]})]},A.id)}),m.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(lg,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"কোন অগ্রগতি নেই"})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:s?a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"অগ্রগতির বিস্তারিত"}),a.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.watched?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.watched?"সম্পূর্ণ":"অপেক্ষমাণ"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"শিক্ষার্থী"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[(w=f(s.userId))!=null&&w.avatar?a.jsx("img",{src:(N=f(s.userId))==null?void 0:N.avatar,alt:"User",className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx(ji,{className:"h-4 w-4 text-gray-600"})}),a.jsx("span",{className:"text-gray-900",children:((C=f(s.userId))==null?void 0:C.displayName)||"ব্যবহারকারী"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ভিডিও"}),a.jsx("p",{className:"text-gray-900",children:u(s.videoId)}),a.jsx("p",{className:"text-sm text-gray-600",children:d(s.videoId)})]}),s.summary&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"সারসংক্ষেপ"}),a.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:a.jsx("p",{className:"text-gray-900",children:s.summary})})]}),s.workLink&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"প্রজেক্ট লিংক"}),a.jsxs("a",{href:s.workLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 bg-white rounded-lg p-4 border border-gray-200 hover:border-blue-300 transition-colors",children:[a.jsx(cl,{className:"h-4 w-4"}),a.jsx("span",{children:"প্রজেক্ট দেখুন"})]})]}),s.quizScore!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"কুইজের ফলাফল"}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-gray-900",children:["স্কোর: ",s.quizScore,"%"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[s.quizPassed?a.jsx($a,{className:"h-5 w-5 text-green-600"}):a.jsx(Ki,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:`text-sm font-medium ${s.quizPassed?"text-green-600":"text-red-600"}`,children:s.quizPassed?"পাস":"ফেইল"})]})]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["চেষ্টা: ",s.quizAttempts," বার"]})]})]}),s.submittedAt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"জমা দেওয়ার সময়"}),a.jsx("p",{className:"text-gray-900",children:g(s.submittedAt)})]})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(eN,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"বিস্তারিত দেখতে একটি অগ্রগতি নির্বাচন করুন"})]})})]})]})},zO=({data:t})=>a.jsx("div",{className:"space-y-2",children:t.map((e,n)=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"w-16 text-sm text-gray-600",children:e.name}),a.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:"h-4 rounded-full transition-all duration-500",style:{width:`${e.value/Math.max(...t.map(r=>r.value))*100}%`,backgroundColor:e.color||"#3B82F6"}})}),a.jsx("span",{className:"w-12 text-sm font-medium text-gray-900",children:e.value})]},n))}),BO=({data:t})=>a.jsx("div",{className:"space-y-3",children:t.slice(0,8).map((e,n)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("span",{className:"text-sm text-blue-600",children:[e.points," পয়েন্ট"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[e.videos," ভিডিও"]})]})]},n))}),HO=({data:t})=>a.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map((e,n)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-2 flex items-center justify-center text-white font-bold",style:{backgroundColor:e.color},children:e.value}),a.jsx("p",{className:"text-sm text-gray-600",children:e.name})]},n))}),qO=()=>{const{stats:t,loading:e}=ug(),{documents:n}=de("userProfiles","points"),r=n.sort((o,c)=>c.points-o.points).slice(0,10),s=[{name:"শিক্ষার্থী",value:t.totalUsers,color:"#3B82F6"},{name:"ভিডিও",value:t.totalVideos,color:"#10B981"},{name:"টপিক",value:t.totalTopics,color:"#8B5CF6"},{name:"পোস্ট",value:t.totalPosts,color:"#F59E0B"}],i=r.map((o,c)=>({name:o.displayName||`ব্যবহারকারী ${c+1}`,points:o.points,videos:o.completedVideos}));return e?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[1,2,3,4].map(o=>a.jsx("div",{className:"h-24 bg-gray-200 rounded"},o))})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"মোট শিক্ষার্থী",value:t.totalUsers,icon:za,color:"blue",change:"+12%"},{title:"মোট ভিডিও",value:t.totalVideos,icon:tp,color:"green",change:"+8%"},{title:"মোট টপিক",value:t.totalTopics,icon:Rs,color:"purple",change:"+5%"},{title:"মোট পোস্ট",value:t.totalPosts,icon:Gi,color:"orange",change:"+15%"}].map((o,c)=>a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:o.title}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:o.value}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx(kO,{className:"h-4 w-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-sm text-green-600",children:o.change})]})]}),a.jsx("div",{className:`p-3 rounded-full bg-${o.color}-100`,children:a.jsx(o.icon,{className:`h-8 w-8 text-${o.color}-600`})})]})},c))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"সিস্টেম ওভারভিউ"}),a.jsx("div",{className:"h-64",children:a.jsx(zO,{data:s})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"শীর্ষ শিক্ষার্থী"}),a.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((o,c)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${c===0?"bg-yellow-100 text-yellow-800":c===1?"bg-gray-100 text-gray-800":c===2?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:c<3?a.jsx(es,{className:"h-4 w-4"}):c+1}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:o.displayName||"ব্যবহারকারী"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[o.completedVideos," ভিডিও সম্পূর্ণ"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-blue-600",children:o.points}),a.jsx("p",{className:"text-xs text-gray-500",children:"পয়েন্ট"})]})]},o.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"শিক্ষার্থীদের অগ্রগতি"}),a.jsx("div",{className:"h-64 overflow-y-auto",children:a.jsx(BO,{data:i})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"কন্টেন্ট বিতরণ"}),a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(HO,{data:s})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"বিস্তারিত র‍্যাঙ্কিং"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"র‍্যাঙ্ক"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"নাম"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"পয়েন্ট"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"সম্পূর্ণ ভিডিও"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"যোগদানের তারিখ"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((o,c)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:c<3?a.jsx(es,{className:`h-5 w-5 ${c===0?"text-yellow-500":c===1?"text-gray-400":"text-orange-500"}`}):a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["#",c+1]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.displayName||"ব্যবহারকারী"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.points," পয়েন্ট"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.completedVideos}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(o.joinedAt).toLocaleDateString("bn-BD")})]},o.id))})]})})]})]})},WO=()=>{const{documents:t,addDocument:e,updateDocument:n,deleteDocument:r}=de("challenges","createdAt"),{documents:s,updateDocument:i,deleteDocument:o}=de("challengeSubmissions","createdAt"),{documents:c,updateDocument:u}=de("challengePayments","createdAt"),[d,f]=j.useState("challenges"),[m,g]=j.useState(!1),[w,N]=j.useState(null),[C,A]=j.useState({type:"7day",title:"",description:"",startDate:"",endDate:"",price:0,paymentNumber:""}),x=()=>{A({type:"7day",title:"",description:"",startDate:"",endDate:"",price:0,paymentNumber:""}),N(null)},y=v=>{v?(A({type:v.type,title:v.title,description:v.description,startDate:new Date(v.startDate).toISOString().split("T")[0],endDate:new Date(v.endDate).toISOString().split("T")[0],price:v.price,paymentNumber:v.paymentNumber||""}),N(v)):x(),g(!0)},I=()=>{g(!1),x()},D=async v=>{v.preventDefault();try{const z={...C,startDate:new Date(C.startDate),endDate:new Date(C.endDate),isActive:!0};if(w)await n(w.id,z),q.success("চ্যালেঞ্জ আপডেট হয়েছে!");else{const pe=t.filter(ye=>ye.type===C.type&&ye.isActive);for(const ye of pe)await n(ye.id,{isActive:!1});await e(z),q.success("নতুন চ্যালেঞ্জ তৈরি হয়েছে!")}I()}catch{q.error("সমস্যা হয়েছে!")}},P=async v=>{if(window.confirm("আপনি কি নিশ্চিত যে এই চ্যালেঞ্জটি মুছে ফেলতে চান?"))try{await r(v),q.success("চ্যালেঞ্জ মুছে ফেলা হয়েছে!")}catch{q.error("মুছে ফেলতে সমস্যা হয়েছে!")}},L=async v=>{try{await i(v,{approved:!0}),q.success("প্রজেক্ট অনুমোদিত হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},k=async v=>{if(window.confirm("আপনি কি নিশ্চিত যে এই প্রজেক্টটি প্রত্যাখ্যান করতে চান?"))try{await o(v),q.success("প্রজেক্ট প্রত্যাখ্যান করা হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},E=async v=>{try{await u(v,{status:"approved"}),q.success("পেমেন্ট অনুমোদিত হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},b=async v=>{try{await u(v,{status:"rejected"}),q.success("পেমেন্ট প্রত্যাখ্যান করা হয়েছে!")}catch{q.error("সমস্যা হয়েছে!")}},_=async(v,z)=>{if(window.confirm(`আপনি কি নিশ্চিত যে ${z==="7day"?"৭ দিনের":"৩০ দিনের"} চ্যালেঞ্জ রিসেট করতে চান? সব সাবমিশন মুছে যাবে।`))try{const pe=s.filter(ye=>ye.challengeId===v);for(const ye of pe)await o(ye.id);await n(v,{isActive:!1}),q.success("চ্যালেঞ্জ রিসেট হয়েছে!")}catch{q.error("রিসেট করতে সমস্যা হয়েছে!")}},S=s.filter(v=>!v.approved),R=c.filter(v=>v.status==="pending");return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"চ্যালেঞ্জ ম্যানেজমেন্ট"})}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"challenges",label:"চ্যালেঞ্জ তালিকা"},{id:"submissions",label:`অপেক্ষমাণ প্রজেক্ট (${S.length})`},{id:"payments",label:`অপেক্ষমাণ পেমেন্ট (${R.length})`}].map(v=>a.jsx("button",{onClick:()=>f(v.id),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${d===v.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:v.label},v.id))})}),d==="challenges"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"চ্যালেঞ্জ তালিকা"}),a.jsxs("button",{onClick:()=>y(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ar,{className:"h-4 w-4"}),a.jsx("span",{children:"নতুন চ্যালেঞ্জ"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(v=>{const z=s.filter(pe=>pe.challengeId===v.id);return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Hr,{className:`h-6 w-6 ${v.type==="7day"?"text-purple-600":"text-orange-600"}`}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:v.title}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v.type==="7day"?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"}`,children:v.type==="7day"?"৭ দিনের চ্যালেঞ্জ":"৩০ দিনের চ্যালেঞ্জ"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[v.isActive&&a.jsx("button",{onClick:()=>_(v.id,v.type),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"চ্যালেঞ্জ রিসেট করুন",children:a.jsx(yO,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>y(v),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>P(v.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(On,{className:"h-4 w-4"})})]})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:v.description}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),a.jsxs("span",{children:[new Date(v.startDate).toLocaleDateString("bn-BD")," - ",new Date(v.endDate).toLocaleDateString("bn-BD")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(za,{className:"h-4 w-4"}),a.jsxs("span",{children:[z.length," জন অংশগ্রহণকারী"]})]}),v.price>0&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ep,{className:"h-4 w-4"}),a.jsxs("span",{children:["৳",v.price]})]}),a.jsx("div",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${v.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.isActive?"সক্রিয়":"নিষ্ক্রিয়"})]})]},v.id)})})]}),d==="submissions"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"অপেক্ষমাণ প্রজেক্ট"}),a.jsxs("div",{className:"space-y-4",children:[S.map(v=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:v.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[v.authorName," • ",v.challengeType==="7day"?"৭ দিনের চ্যালেঞ্জ":"৩০ দিনের চ্যালেঞ্জ"]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>L(v.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"অনুমোদন করুন",children:a.jsx(Jf,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>k(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"প্রত্যাখ্যান করুন",children:a.jsx(js,{className:"h-4 w-4"})})]})]}),a.jsx("p",{className:"text-gray-700 mb-3",children:v.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx("a",{href:v.youtubeUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"ইউটিউব ভিডিও দেখুন"}),v.files&&v.files.length>0&&a.jsxs("span",{children:[v.files.length," টি ফাইল"]})]})]},v.id)),S.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:"কোন অপেক্ষমাণ প্রজেক্ট নেই"})]})]}),d==="payments"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"অপেক্ষমাণ পেমেন্ট"}),a.jsxs("div",{className:"space-y-4",children:[R.map(v=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:v.userName}),a.jsx("p",{className:"text-sm text-gray-600",children:v.userEmail})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>E(v.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"অনুমোদন করুন",children:a.jsx(Jf,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>b(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"প্রত্যাখ্যান করুন",children:a.jsx(js,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"পেমেন্ট নম্বর:"}),a.jsx("p",{className:"font-medium",children:v.paymentNumber})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"ট্রানজেকশন আইডি:"}),a.jsx("p",{className:"font-medium",children:v.transactionId})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"পরিমাণ:"}),a.jsxs("p",{className:"font-medium",children:["৳",v.amount]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"তারিখ:"}),a.jsx("p",{className:"font-medium",children:new Date(v.createdAt).toLocaleDateString("bn-BD")})]})]})]},v.id)),R.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:"কোন অপেক্ষমাণ পেমেন্ট নেই"})]})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:w?"চ্যালেঞ্জ এডিট করুন":"নতুন চ্যালেঞ্জ তৈরি করুন"}),a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"চ্যালেঞ্জের ধরন"}),a.jsxs("select",{value:C.type,onChange:v=>A({...C,type:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"7day",children:"৭ দিনের চ্যালেঞ্জ"}),a.jsx("option",{value:"30day",children:"৩০ দিনের চ্যালেঞ্জ"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"শিরোনাম"}),a.jsx("input",{type:"text",required:!0,value:C.title,onChange:v=>A({...C,title:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"চ্যালেঞ্জের শিরোনাম"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"বিবরণ"}),a.jsx("textarea",{value:C.description,onChange:v=>A({...C,description:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"চ্যালেঞ্জের বিবরণ"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"শুরুর তারিখ"}),a.jsx("input",{type:"date",required:!0,value:C.startDate,onChange:v=>A({...C,startDate:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"শেষের তারিখ"}),a.jsx("input",{type:"date",required:!0,value:C.endDate,onChange:v=>A({...C,endDate:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),C.type==="30day"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"মূল্য (টাকা) - ০ দিলে ফ্রি হবে"}),a.jsx("input",{type:"number",min:"0",value:C.price,onChange:v=>A({...C,price:parseInt(v.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),C.price>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"পেমেন্ট নম্বর (বিকাশ/নগদ)"}),a.jsx("input",{type:"text",value:C.paymentNumber,onChange:v=>A({...C,paymentNumber:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"01XXXXXXXXX"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:w?"আপডেট করুন":"তৈরি করুন"}),a.jsx("button",{type:"button",onClick:I,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})})]})},pr=()=>{const{currentUser:t,logout:e,isAdmin:n}=ds();return a.jsx("nav",{className:"bg-white shadow-lg border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("img",{src:"/Untitled (185 x 55 px).png",alt:"Pantafy Logo",className:"h-8 w-auto"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ji,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:n?"এডমিন":"শিক্ষার্থী"})]}),n&&a.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 rounded-full",children:[a.jsx(vO,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm text-blue-700 font-medium",children:"এডমিন প্যানেল"})]}),a.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-4 py-2 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors",children:[a.jsx(oO,{className:"h-4 w-4"}),a.jsx("span",{children:"লগআউট"})]})]})]})})})},KO=()=>{const[t,e]=j.useState("topics"),{stats:n,loading:r}=ug(),s=[{id:"topics",label:"টপিক ম্যানেজমেন্ট",icon:Rs},{id:"videos",label:"ভিডিও ম্যানেজমেন্ট",icon:tp},{id:"quizzes",label:"কুইজ ম্যানেজমেন্ট",icon:Zf},{id:"community",label:"কমিউনিটি",icon:Gi},{id:"challenges",label:"চ্যালেঞ্জ",icon:Hr},{id:"calendar",label:"ক্যালেন্ডার",icon:Kn},{id:"progress",label:"শিক্ষার্থীর অগ্রগতি",icon:za},{id:"classroom",label:"ক্লাসরুম",icon:H3},{id:"analytics",label:"রিপোর্ট",icon:mv}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"এডমিন ড্যাশবোর্ড"}),a.jsx("p",{className:"text-gray-600",children:"কোর্স এবং শিক্ষার্থীদের ব্যবস্থাপনা করুন"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 animate-fade-in",children:[{title:"মোট শিক্ষার্থী",value:r?"...":n.totalUsers,icon:za,color:"blue"},{title:"মোট ভিডিও",value:r?"...":n.totalVideos,icon:tp,color:"green"},{title:"মোট টপিক",value:r?"...":n.totalTopics,icon:Rs,color:"purple"},{title:"মোট ইভেন্ট",value:r?"...":n.totalEvents,icon:mv,color:"orange"}].map((i,o)=>a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:i.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 animate-pulse",children:i.value})]}),a.jsx("div",{className:`p-3 rounded-full bg-${i.color}-100 animate-bounce`,children:a.jsx(i.icon,{className:`h-6 w-6 text-${i.color}-600`})})]})},o))}),a.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:s.map(i=>{const o=i.icon;return a.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t===i.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(o,{className:"h-5 w-5"}),a.jsx("span",{children:i.label})]},i.id)})})})}),a.jsxs("div",{className:"space-y-6",children:[t==="topics"&&a.jsx(VO,{}),t==="videos"&&a.jsx(LO,{}),t==="quizzes"&&a.jsx(UO,{}),t==="community"&&a.jsx(MO,{}),t==="challenges"&&a.jsx(WO,{}),t==="calendar"&&a.jsx(FO,{}),t==="progress"&&a.jsx($O,{}),t==="classroom"&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"ক্লাসরুম ম্যানেজমেন্ট"}),a.jsx("p",{className:"text-gray-600",children:"শীঘ্রই আসছে..."})]}),t==="analytics"&&a.jsx(qO,{})]})]})]})},tN=document.createElement("style");tN.textContent=`
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .animate-fade-in {
    animation: fade-in 0.6s ease-out;
  }
`;document.head.appendChild(tN);const GO=({video:t,onVideoComplete:e})=>{const{currentUser:n}=ds(),{documents:r}=de("quizzes"),{documents:s,addDocument:i,updateDocument:o}=de("userProgress"),{documents:c,updateDocument:u}=de("userProfiles"),[d,f]=j.useState(!1),[m,g]=j.useState(!1),[w,N]=j.useState(!1),[C,A]=j.useState([]),[x,y]=j.useState(null),[I,D]=j.useState({summary:"",workLink:""}),P=c.find(v=>v.userId===(n==null?void 0:n.uid)),L=r.find(v=>v.videoId===t.id),k=s.find(v=>v.userId===(n==null?void 0:n.uid)&&v.videoId===t.id),E=(k==null?void 0:k.watched)||!1,b=()=>{g(!0)},_=async v=>{if(v.preventDefault(),!!n)try{const z={userId:n.uid,videoId:t.id,watched:!1,canAccess:!0,summary:I.summary,workLink:I.workLink,quizScore:null,quizPassed:!1,quizAttempts:0,submittedAt:new Date};if(k?await o(k.id,z):await i(z),g(!1),L)A(new Array(L.questions.length).fill(-1)),N(!0);else{const pe={...z,watched:!0,completedAt:new Date};if(k)await o(k.id,pe);else{const ye=await i(pe)}if(P){await u(P.id,{points:P.points+5,completedVideos:P.completedVideos+1});const se=videos.filter(W=>W.topicId===t.topicId).sort((W,V)=>W.order-V.order).findIndex(W=>W.id===t.id)}e()}q.success("ভিডিও সম্পূর্ণ করার তথ্য জমা দেওয়া হয়েছে!")}catch(z){console.error("Error submitting completion:",z),q.error("সমস্যা হয়েছে!")}},S=async()=>{if(!L||!n)return;let v=0;L.questions.forEach((ye,se)=>{C[se]===ye.correctAnswer&&v++});const z=Math.round(v/L.questions.length*100),pe=z>=L.passingScore;y(z);try{const ye={...k,watched:pe,quizScore:z,quizPassed:pe,quizAttempts:((k==null?void 0:k.quizAttempts)||0)+1};k&&await o(k.id,ye),pe&&P&&(await u(P.id,{points:P.points+L.points,completedVideos:P.completedVideos+1}),q.success(`অভিনন্দন! আপনি ${L.points} পয়েন্ট পেয়েছেন!`)),pe?e():q.error(`দুঃখিত! আপনার স্কোর ${z}%। পাসিং স্কোর ${L.passingScore}%`)}catch{q.error("কুইজের ফলাফল সেভ করতে সমস্যা হয়েছে!")}},R=()=>{A(new Array(L.questions.length).fill(-1)),y(null)};return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:`https://img.youtube.com/vi/${t.videoId}/maxresdefault.jpg`,alt:t.title,className:"w-full h-64 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:a.jsx("button",{onClick:()=>f(!0),className:"bg-white text-gray-900 p-4 rounded-full hover:bg-gray-100 transition-colors",children:a.jsx(Qi,{className:"h-8 w-8"})})}),E&&a.jsx("div",{className:"absolute top-4 right-4 bg-green-600 text-white p-2 rounded-full",children:a.jsx($a,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),t.files&&t.files.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"সংযুক্ত ফাইল:"}),a.jsx("div",{className:"space-y-2",children:t.files.map((v,z)=>a.jsxs("a",{href:v.url,download:v.name,className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(lg,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"flex-1 text-gray-900",children:v.name}),a.jsx(cl,{className:"h-4 w-4 text-gray-400"})]},z))})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("button",{onClick:()=>f(!0),className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(Qi,{className:"h-5 w-5"}),a.jsx("span",{children:"ভিডিও দেখুন"})]}),!E&&a.jsxs("button",{onClick:b,className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[a.jsx($a,{className:"h-5 w-5"}),a.jsx("span",{children:"সম্পূর্ণ করুন"})]})]}),L&&a.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(es,{className:"h-5 w-5 text-yellow-600"}),a.jsx("span",{className:"font-semibold text-yellow-800",children:"কুইজ উপলব্ধ"})]}),a.jsxs("p",{className:"text-yellow-700 text-sm",children:["এই ভিডিও সম্পূর্ণ করার পর ",L.questions.length,"টি প্রশ্নের কুইজ দিতে হবে। পাসিং স্কোর: ",L.passingScore,"%"]})]})]}),a.jsx(fg,{videoId:t.videoId,isOpen:d,onClose:()=>f(!1),title:t.title}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"ভিডিও সম্পূর্ণ করুন"}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"এই ভিডিও থেকে আপনি কী শিখেছেন? (সারসংক্ষেপ) *"}),a.jsx("textarea",{required:!0,value:I.summary,onChange:v=>D({...I,summary:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"আপনার শেখা বিষয়গুলো লিখুন..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"প্রজেক্ট লিংক (যদি থাকে)"}),a.jsx("input",{type:"url",value:I.workLink,onChange:v=>D({...I,workLink:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"জমা দিন"}),a.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})}),w&&L&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["কুইজ - ",t.title]}),x===null?a.jsxs("div",{className:"space-y-6",children:[L.questions.map((v,z)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["প্রশ্ন ",z+1,": ",v.question]}),a.jsx("div",{className:"space-y-2",children:v.options.map((pe,ye)=>a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:`question-${z}`,value:ye,checked:C[z]===ye,onChange:()=>{const se=[...C];se[z]=ye,A(se)},className:"text-blue-600"}),a.jsx("span",{className:"text-gray-700",children:pe})]},ye))})]},v.id)),a.jsx("button",{onClick:S,disabled:C.includes(-1),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"কুইজ জমা দিন"})]}):a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`text-6xl mb-4 ${x>=L.passingScore?"text-green-600":"text-red-600"}`,children:x>=L.passingScore?"🎉":"😞"}),a.jsxs("h4",{className:"text-2xl font-bold mb-2",children:["আপনার স্কোর: ",x,"%"]}),a.jsx("p",{className:`text-lg mb-6 ${x>=L.passingScore?"text-green-600":"text-red-600"}`,children:x>=L.passingScore?`অভিনন্দন! আপনি ${L.points} পয়েন্ট পেয়েছেন!`:`দুঃখিত! পাসিং স্কোর ${L.passingScore}%`}),a.jsx("div",{className:"flex space-x-4",children:x>=L.passingScore?a.jsx("button",{onClick:()=>N(!1),className:"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors",children:"পরবর্তী ভিডিওতে যান"}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:R,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"আবার চেষ্টা করুন"}),a.jsx("button",{onClick:()=>N(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors",children:"বন্ধ করুন"})]})})]})]})})]})},QO=()=>{var W;const[t,e]=j.useState(!1),[n,r]=j.useState("all"),[s,i]=j.useState({title:"",content:"",youtubeUrl:"",imageUrl:"",categoryId:"",files:[]}),[o,c]=j.useState(!1),[u,d]=j.useState({}),{currentUser:f}=ds(),{documents:m,addDocument:g,updateDocument:w}=de("posts","createdAt"),{documents:N,addDocument:C}=de("comments","createdAt"),{documents:A}=de("categories","createdAt"),{documents:x}=de("userProfiles"),y=x.find(V=>V.userId===(f==null?void 0:f.uid)),I=m.filter(V=>V.approved).filter(V=>n==="all"||V.categoryId===n).sort((V,B)=>{if(V.pinned&&!B.pinned)return-1;if(!V.pinned&&B.pinned)return 1;const Y=V.likesCount||0,ee=B.likesCount||0;return Y!==ee?ee-Y:new Date(B.createdAt).getTime()-new Date(V.createdAt).getTime()}),D=()=>{i({title:"",content:"",youtubeUrl:"",imageUrl:"",categoryId:"",files:[]})},P=async V=>{var B;if(V.preventDefault(),!f||!s.title.trim()||!s.content.trim()||!s.categoryId){q.error("সব ফিল্ড পূরণ করুন!");return}c(!0);try{const Y={title:s.title,content:s.content,youtubeUrl:s.youtubeUrl||"",imageUrl:s.imageUrl||"",files:s.files||[],categoryId:s.categoryId,authorId:f.uid,authorName:(y==null?void 0:y.displayName)||((B=f.email)==null?void 0:B.split("@")[0])||"ব্যবহারকারী",authorAvatar:(y==null?void 0:y.avatar)||"",approved:!1,pinned:!1,likes:[],likesCount:0,commentsCount:0};await g(Y),D(),e(!1),q.success("পোস্ট সফলভাবে জমা দেওয়া হয়েছে! অ্যাডমিন অনুমোদনের পর এটি প্রদর্শিত হবে।")}catch(Y){console.error("Error creating post:",Y),q.error("পোস্ট তৈরিতে সমস্যা হয়েছে।")}finally{c(!1)}},L=async V=>{var Y;const B=(Y=V.target.files)==null?void 0:Y[0];if(B){if(!B.type.startsWith("image/")){q.error("শুধুমাত্র ছবি আপলোড করুন!");return}c(!0);try{const ee=await Ba(B,"community-images");i({...s,imageUrl:ee}),q.success("ছবি আপলোড হয়েছে!")}catch{q.error("ছবি আপলোড করতে সমস্যা হয়েছে!")}finally{c(!1)}}},k=async V=>{const B=Array.from(V.target.files||[]);if(B.length!==0){c(!0);try{const Y=B.map(async Z=>{const Ke=await Ba(Z,"community-files");return{id:Date.now()+Math.random(),name:Z.name,url:Ke,size:Z.size,type:Z.type}}),ee=await Promise.all(Y);i({...s,files:[...s.files,...ee]}),q.success("ফাইল আপলোড হয়েছে!")}catch{q.error("ফাইল আপলোড করতে সমস্যা হয়েছে!")}finally{c(!1)}}},E=V=>{i({...s,files:s.files.filter(B=>B.id!==V)})},b=async V=>{if(f)try{const B=m.find(Ke=>Ke.id===V);if(!B)return;const Y=B.likes||[],Z=Y.includes(f.uid)?Y.filter(Ke=>Ke!==f.uid):[...Y,f.uid];await w(V,{likes:Z,likesCount:Z.length})}catch(B){console.error("Error updating like:",B),q.error("লাইক করতে সমস্যা হয়েছে!")}},_=async V=>{var B,Y;if(!(!f||!((B=u[V])!=null&&B.trim())))try{await C({postId:V,authorId:f.uid,authorName:(y==null?void 0:y.displayName)||((Y=f.email)==null?void 0:Y.split("@")[0])||"ব্যবহারকারী",authorAvatar:(y==null?void 0:y.avatar)||"",content:u[V]});const ee=m.find(Z=>Z.id===V);ee&&await w(V,{commentsCount:ee.commentsCount+1}),d({...u,[V]:""}),q.success("মন্তব্য যোগ করা হয়েছে!")}catch(ee){console.error("Error adding comment:",ee),q.error("মন্তব্য করতে সমস্যা হয়েছে!")}},S=V=>{const B=A.find(Y=>Y.id===V);return B?B.name:"অজানা ক্যাটাগরি"},R=V=>{const B=A.find(Y=>Y.id===V);return B?B.color:"#3B82F6"},v=V=>N.filter(B=>B.postId===V),z=V=>{var B;return f?(B=V.likes)==null?void 0:B.includes(f.uid):!1},pe=V=>{const Y=Math.floor((new Date().getTime()-V.getTime())/(1e3*60));if(Y<1)return"এখনই";if(Y<60)return`${Y} মিনিট আগে`;const ee=Math.floor(Y/60);if(ee<24)return`${ee} ঘন্টা আগে`;const Z=Math.floor(ee/24);return Z<7?`${Z} দিন আগে`:V.toLocaleDateString("bn-BD")},ye=V=>{const B=dg(V);return B?a.jsx("div",{className:"relative w-full h-48 bg-gray-900 rounded-xl overflow-hidden mb-4",children:a.jsx("iframe",{src:`https://www.youtube.com/embed/${B}`,title:"YouTube video",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):null},se=V=>m.filter(B=>B.approved&&B.categoryId===V).length;return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 pb-20 lg:pb-0",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"কমিউনিটি"}),a.jsx("p",{className:"text-gray-600",children:"সবার সাথে আপনার অভিজ্ঞতা শেয়ার করুন"})]}),a.jsx("div",{className:"lg:hidden mb-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"টপিক ফিল্টার"}),a.jsx("button",{onClick:()=>e(!0),className:"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition-colors",children:a.jsx(ar,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>r("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${n==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["সব (",m.filter(V=>V.approved).length,")"]}),A.map(V=>{const B=se(V.id);return a.jsxs("button",{onClick:()=>r(V.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${n===V.id?"text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,style:{backgroundColor:n===V.id?V.color:void 0},children:[V.name," (",B,")"]},V.id)})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"lg:col-span-3",children:[a.jsx("div",{className:"hidden lg:block mb-8",children:a.jsx("div",{className:"bg-white rounded-xl shadow-md p-4",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[y!=null&&y.avatar?a.jsx("img",{src:y.avatar,alt:"Your avatar",className:"w-12 h-12 rounded-full object-cover"}):a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold",children:(W=f==null?void 0:f.email)==null?void 0:W.charAt(0).toUpperCase()})}),a.jsx("button",{onClick:()=>e(!0),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 px-4 py-3 rounded-full text-left transition-colors",children:"আপনার মনে কি আছে?"}),a.jsx("button",{onClick:()=>e(!0),className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors",children:a.jsx(ar,{className:"h-5 w-5"})})]})})}),a.jsxs("div",{className:"space-y-6",children:[I.map(V=>{var Y,ee;const B=v(V.id);return a.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[V.authorAvatar?a.jsx("img",{src:V.authorAvatar,alt:V.authorName,className:"w-10 h-10 rounded-full object-cover"}):a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:V.authorName.charAt(0).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:V.authorName}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:pe(new Date(V.createdAt))}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:R(V.categoryId)},children:S(V.categoryId)}),V.pinned&&a.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"পিন করা"})]})]})]})}),a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:V.title}),a.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:V.content}),V.youtubeUrl&&ye(V.youtubeUrl),V.imageUrl&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:V.imageUrl,alt:"Post image",className:"w-full h-64 object-cover rounded-lg"})}),V.files&&V.files.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"সংযুক্ত ফাইল:"}),a.jsx("div",{className:"space-y-2",children:V.files.map((Z,Ke)=>a.jsxs("a",{href:Z.url,download:Z.name,className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(lg,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"flex-1 text-gray-900",children:Z.name}),a.jsx(ag,{className:"h-4 w-4 text-gray-400"})]},Ke))})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>b(V.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${z(V)?"text-red-600 bg-red-50":"text-gray-600 hover:text-red-600 hover:bg-red-50"}`,children:[a.jsx(cg,{className:`h-4 w-4 ${z(V)?"fill-current":""}`}),a.jsx("span",{className:"text-sm font-medium",children:V.likesCount||0})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[a.jsx(gv,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:V.commentsCount||0})]})]}),a.jsx("button",{className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(wO,{className:"h-4 w-4"})})]}),B.length>0&&a.jsx("div",{className:"mt-4 space-y-3 border-t border-gray-100 pt-4",children:B.map(Z=>a.jsxs("div",{className:"flex space-x-3",children:[Z.authorAvatar?a.jsx("img",{src:Z.authorAvatar,alt:Z.authorName,className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs font-semibold",children:Z.authorName.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"flex-1 bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("p",{className:"font-medium text-gray-900 text-sm",children:Z.authorName}),a.jsx("span",{className:"text-xs text-gray-500",children:pe(new Date(Z.createdAt))})]}),a.jsx("p",{className:"text-gray-700 text-sm",children:Z.content})]})]},Z.id))}),a.jsxs("div",{className:"mt-4 flex space-x-3",children:[y!=null&&y.avatar?a.jsx("img",{src:y.avatar,alt:"Your avatar",className:"w-8 h-8 rounded-full object-cover"}):a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs font-semibold",children:(Y=f==null?void 0:f.email)==null?void 0:Y.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"flex-1 flex space-x-2",children:[a.jsx("input",{type:"text",value:u[V.id]||"",onChange:Z=>d({...u,[V.id]:Z.target.value}),placeholder:"একটি মন্তব্য লিখুন...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",onKeyPress:Z=>Z.key==="Enter"&&_(V.id)}),a.jsx("button",{onClick:()=>_(V.id),disabled:!((ee=u[V.id])!=null&&ee.trim()),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"পোস্ট"})]})]})]},V.id)}),I.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(gv,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"কোনো পোস্ট নেই"}),a.jsx("p",{className:"text-gray-600",children:"প্রথম পোস্ট তৈরি করুন এবং কমিউনিটির সাথে শেয়ার করুন!"})]})]})]}),a.jsx("div",{className:"hidden lg:block",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"টপিকস"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>r("all"),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${n==="all"?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:"সব পোস্ট"}),a.jsx("span",{className:"text-sm opacity-75",children:m.filter(V=>V.approved).length})]})}),A.map(V=>{const B=se(V.id);return a.jsx("button",{onClick:()=>r(V.id),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${n===V.id?"text-white":"hover:bg-gray-100"}`,style:{backgroundColor:n===V.id?V.color:void 0},children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:V.name}),a.jsx("span",{className:"text-sm opacity-75",children:B})]})},V.id)})]})]})})]}),t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"পোস্ট তৈরি করুন"}),a.jsx("button",{onClick:()=>e(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(js,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"পোস্টের শিরোনাম *"}),a.jsx("input",{type:"text",required:!0,value:s.title,onChange:V=>i({...s,title:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"আকর্ষণীয় শিরোনাম লিখুন..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ক্যাটাগরি *"}),a.jsxs("select",{required:!0,value:s.categoryId,onChange:V=>i({...s,categoryId:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"ক্যাটাগরি নির্বাচন করুন"}),A.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"পোস্টের বিবরণ *"}),a.jsx("textarea",{required:!0,value:s.content,onChange:V=>i({...s,content:V.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"আপনার মতামত বা অভিজ্ঞতা শেয়ার করুন..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ইউটিউব ভিডিও লিংক (ঐচ্ছিক)"}),a.jsx("input",{type:"url",value:s.youtubeUrl,onChange:V=>i({...s,youtubeUrl:V.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://youtube.com/watch?v=..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ছবি আপলোড (ঐচ্ছিক)"}),a.jsx("input",{type:"file",accept:"image/*",onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o}),s.imageUrl&&a.jsxs("div",{className:"mt-2 relative",children:[a.jsx("img",{src:s.imageUrl,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>i({...s,imageUrl:""}),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:a.jsx(js,{className:"h-3 w-3"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ফাইল আপলোড (ঐচ্ছিক)"}),a.jsx("input",{type:"file",multiple:!0,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o}),s.files.length>0&&a.jsx("div",{className:"mt-2 space-y-2",children:s.files.map(V=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsx("span",{className:"text-sm",children:V.name}),a.jsx("button",{type:"button",onClick:()=>E(V.id),className:"text-red-500 hover:text-red-700",children:a.jsx(js,{className:"h-4 w-4"})})]},V.id))})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>e(!1),className:"flex-1 py-3 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"বাতিল"}),a.jsx("button",{type:"submit",disabled:o||!s.title.trim()||!s.content.trim()||!s.categoryId,className:"flex-1 py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"আপলোড হচ্ছে...":"পোস্ট করুন"})]})]})]})})]})},XO=()=>{const{documents:t}=de("events","date"),[e,n]=j.useState(new Date),[r,s]=j.useState(null),i=x=>new Date(x.getFullYear(),x.getMonth()+1,0).getDate(),o=x=>new Date(x.getFullYear(),x.getMonth(),1).getDay(),c=x=>t.filter(y=>new Date(y.date).toDateString()===x.toDateString()),u=x=>{n(y=>{const I=new Date(y);return x==="prev"?I.setMonth(y.getMonth()-1):I.setMonth(y.getMonth()+1),I})},d=x=>new Intl.DateTimeFormat("bn-BD",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(x),f=x=>{switch(x){case"live":return"bg-red-500";case"assignment":return"bg-blue-500";case"exam":return"bg-orange-500";default:return"bg-gray-500"}},m=x=>{switch(x){case"live":return"লাইভ ক্লাস";case"assignment":return"অ্যাসাইনমেন্ট";case"exam":return"পরীক্ষা";default:return"অন্যান্য"}},g=i(e),w=o(e),N=new Date,C=[];for(let x=0;x<w;x++)C.push(null);for(let x=1;x<=g;x++)C.push(x);const A=r?c(r):[];return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pb-20 lg:pb-0",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"ক্যালেন্ডার"}),a.jsx("p",{className:"text-gray-600",children:"আসন্ন ইভেন্ট এবং ক্লাসের সময়সূচী দেখুন"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:new Intl.DateTimeFormat("bn-BD",{year:"numeric",month:"long"}).format(e)}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>u("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(F3,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>u("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx($3,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["রবি","সোম","মঙ্গল","বুধ","বৃহ","শুক্র","শনি"].map(x=>a.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600",children:x},x))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:C.map((x,y)=>{if(x===null)return a.jsx("div",{className:"p-2 h-12"},y);const I=new Date(e.getFullYear(),e.getMonth(),x),D=c(I),P=I.toDateString()===N.toDateString(),L=r&&I.toDateString()===r.toDateString();return a.jsxs("button",{onClick:()=>s(I),className:`p-2 h-12 text-sm rounded-lg transition-colors relative ${P?"bg-blue-600 text-white":L?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,children:[a.jsx("span",{children:x}),D.length>0&&a.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"flex space-x-1",children:D.slice(0,3).map((k,E)=>a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${f(k.type)}`},E))})})]},x)})})]})}),a.jsxs("div",{className:"space-y-6",children:[r&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:d(r)}),A.length>0?a.jsx("div",{className:"space-y-4",children:A.map(x=>a.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:x.title}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${f(x.type)}`,children:m(x.type)})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:x.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:x.time})]}),x.liveLink&&a.jsxs("a",{href:x.liveLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800",children:[a.jsx(cl,{className:"h-4 w-4"}),a.jsx("span",{children:"লাইভ লিংক"})]})]})]},x.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"এই দিনে কোন ইভেন্ট নেই"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"আসন্ন ইভেন্ট"}),a.jsxs("div",{className:"space-y-3",children:[t.filter(x=>new Date(x.date)>=N).slice(0,5).map(x=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${f(x.type)}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:x.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[new Intl.DateTimeFormat("bn-BD",{month:"short",day:"numeric"}).format(new Date(x.date))," • ",x.time]})]})]},x.id)),t.filter(x=>new Date(x.date)>=N).length===0&&a.jsx("p",{className:"text-gray-500 text-center py-4",children:"কোন আসন্ন ইভেন্ট নেই"})]})]})]})]})]})},YO=()=>{const{currentUser:t}=ds(),{documents:e}=de("challenges","createdAt"),{documents:n,addDocument:r,updateDocument:s}=de("challengeSubmissions","likesCount"),{documents:i,addDocument:o}=de("challengeComments","createdAt"),{documents:c,addDocument:u}=de("challengePayments","createdAt"),{documents:d}=de("userProfiles"),[f,m]=j.useState("7day"),[g,w]=j.useState(!1),[N,C]=j.useState(!1),[A,x]=j.useState(null),[y,I]=j.useState({isOpen:!1,videoId:"",title:""}),[D,P]=j.useState(null),[L,k]=j.useState(""),[E,b]=j.useState(!1),[_,S]=j.useState({title:"",description:"",youtubeUrl:"",imageUrl:"",files:[]}),[R,v]=j.useState({paymentNumber:"",transactionId:""}),z=d.find($=>$.userId===(t==null?void 0:t.uid)),pe=e.find($=>$.type==="7day"&&$.isActive),ye=e.find($=>$.type==="30day"&&$.isActive),se=f==="7day"?pe:ye,W=n.filter($=>$.challengeType===f&&$.approved&&(se?$.challengeId===se.id:!1)).sort(($,he)=>he.likesCount-$.likesCount),V=se?c.find($=>$.challengeId===se.id&&$.userId===(t==null?void 0:t.uid)&&$.status==="approved"):null,B=$=>$?$.type==="7day"?!0:$.type==="30day"?$.price===0||V:!1:!1,Y=()=>{S({title:"",description:"",youtubeUrl:"",imageUrl:"",files:[]})},ee=async $=>{var be;if($.preventDefault(),!t||!se)return;const he=dg(_.youtubeUrl);if(!he){q.error("সঠিক ইউটিউব লিংক দিন!");return}try{await r({challengeId:se.id,challengeType:f,userId:t.uid,authorName:(z==null?void 0:z.displayName)||((be=t.email)==null?void 0:be.split("@")[0])||"ব্যবহারকারী",authorAvatar:z==null?void 0:z.avatar,title:_.title,description:_.description,youtubeUrl:_.youtubeUrl,videoId:he,imageUrl:_.imageUrl,files:_.files,approved:!1,likes:[],likesCount:0,commentsCount:0}),q.success("প্রজেক্ট জমা দেওয়া হয়েছে! অনুমোদনের জন্য অপেক্ষা করুন।"),w(!1),Y()}catch{q.error("প্রজেক্ট জমা দিতে সমস্যা হয়েছে!")}},Z=async $=>{var he;if($.preventDefault(),!(!t||!se))try{await u({challengeId:se.id,userId:t.uid,userName:(z==null?void 0:z.displayName)||((he=t.email)==null?void 0:he.split("@")[0])||"ব্যবহারকারী",userEmail:t.email||"",paymentNumber:R.paymentNumber,transactionId:R.transactionId,amount:se.price,status:"pending"}),q.success("পেমেন্ট তথ্য জমা দেওয়া হয়েছে! অনুমোদনের জন্য অপেক্ষা করুন।"),C(!1),v({paymentNumber:"",transactionId:""})}catch{q.error("পেমেন্ট তথ্য জমা দিতে সমস্যা হয়েছে!")}},Ke=async $=>{const he=Array.from($.target.files||[]);if(he.length!==0){b(!0);try{const be=he.map(async xe=>{const fo=await Ba(xe,"challenge-files");return{id:Date.now()+Math.random(),name:xe.name,url:fo,size:xe.size,type:xe.type}}),Ge=await Promise.all(be);S({..._,files:[..._.files,...Ge]}),q.success("ফাইল আপলোড হয়েছে!")}catch{q.error("ফাইল আপলোড করতে সমস্যা হয়েছে!")}finally{b(!1)}}},rn=$=>{S({..._,files:_.files.filter(he=>he.id!==$)})},sn=async $=>{if(!t)return;const he=n.find(be=>be.id===$);if(he)try{const be=he.likes.includes(t.uid);let Ge;be?Ge=he.likes.filter(xe=>xe!==t.uid):Ge=[...he.likes,t.uid],await s($,{likes:Ge,likesCount:Ge.length})}catch{q.error("লাইক করতে সমস্যা হয়েছে!")}},qt=async $=>{var he;if(!(!t||!L.trim()))try{await o({submissionId:$,authorId:t.uid,authorName:(z==null?void 0:z.displayName)||((he=t.email)==null?void 0:he.split("@")[0])||"ব্যবহারকারী",authorAvatar:z==null?void 0:z.avatar,content:L});const be=n.find(Ge=>Ge.id===$);be&&await s($,{commentsCount:be.commentsCount+1}),k(""),q.success("মন্তব্য যোগ করা হয়েছে!")}catch{q.error("মন্তব্য করতে সমস্যা হয়েছে!")}},ul=$=>t?$.likes.includes(t.uid):!1,hd=$=>i.filter(he=>he.submissionId===$),hs=$=>{const be=Math.floor((new Date().getTime()-$.getTime())/(1e3*60));if(be<1)return"এখনই";if(be<60)return`${be} মিনিট আগে`;const Ge=Math.floor(be/60);if(Ge<24)return`${Ge} ঘন্টা আগে`;const xe=Math.floor(Ge/24);return xe<7?`${xe} দিন আগে`:$.toLocaleDateString("bn-BD")},Ys=($,he)=>{I({isOpen:!0,videoId:$,title:he})},ho=()=>{I({isOpen:!1,videoId:"",title:""})};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 pb-20 lg:pb-0",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 rounded-3xl text-white p-8 mb-8 shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),a.jsx("div",{className:"absolute top-0 right-0 w-32 lg:w-64 h-32 lg:h-64 bg-white bg-opacity-10 rounded-full -translate-y-16 lg:-translate-y-32 translate-x-16 lg:translate-x-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 lg:w-48 h-24 lg:h-48 bg-white bg-opacity-10 rounded-full translate-y-12 lg:translate-y-24 -translate-x-12 lg:-translate-x-24"}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(Hr,{className:"h-16 w-16 text-yellow-300 animate-bounce"})}),a.jsx("h1",{className:"text-2xl lg:text-4xl font-bold mb-3 bg-gradient-to-r from-white to-yellow-100 bg-clip-text text-transparent",children:"চ্যালেঞ্জ সেকশন"}),a.jsx("p",{className:"text-purple-100 text-sm lg:text-lg mb-6",children:"আপনার দক্ষতা প্রমাণ করুন এবং পুরস্কার জিতুন!"}),a.jsxs("div",{className:"flex flex-col lg:flex-row justify-center space-y-2 lg:space-y-0 lg:space-x-6 text-purple-100",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kn,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm lg:text-base",children:"৭ দিনের চ্যালেঞ্জ - ফ্রি"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(NO,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm lg:text-base",children:"৩০ দিনের চ্যালেঞ্জ - প্রিমিয়াম"})]})]})]})]}),a.jsx("div",{className:"flex justify-center mb-8",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-2 flex flex-col lg:flex-row space-y-2 lg:space-y-0 lg:space-x-2 w-full max-w-md lg:max-w-none",children:[a.jsx("button",{onClick:()=>m("7day"),className:`px-4 lg:px-8 py-3 lg:py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 text-sm lg:text-base ${f==="7day"?"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kn,{className:"h-5 w-5"}),a.jsx("span",{children:"৭ দিনের চ্যালেঞ্জ"})]})}),a.jsx("button",{onClick:()=>m("30day"),className:`px-4 lg:px-8 py-3 lg:py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 text-sm lg:text-base ${f==="30day"?"bg-gradient-to-r from-orange-600 to-red-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Hr,{className:"h-5 w-5"}),a.jsx("span",{children:"৩০ দিনের চ্যালেঞ্জ"})]})})]})}),se&&a.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-4 lg:p-8 mb-8 border border-gray-100",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start mb-6 space-y-4 lg:space-y-0",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl lg:text-3xl font-bold text-gray-900 mb-3",children:se.title}),a.jsx("p",{className:"text-gray-600 text-sm lg:text-lg mb-4",children:se.description}),a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center space-y-2 lg:space-y-0 lg:space-x-6 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),a.jsxs("span",{children:["শুরু: ",new Date(se.startDate).toLocaleDateString("bn-BD")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsxs("span",{children:["শেষ: ",new Date(se.endDate).toLocaleDateString("bn-BD")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(za,{className:"h-4 w-4"}),a.jsxs("span",{children:[W.length," জন অংশগ্রহণকারী"]})]})]})]}),a.jsxs("div",{className:"flex flex-col space-y-4 w-full lg:w-auto",children:[se.type==="30day"&&se.price>0&&!V&&a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-red-100 rounded-2xl p-4 lg:p-6 mb-4",children:[a.jsx(ep,{className:"h-8 w-8 text-orange-600 mx-auto mb-2"}),a.jsx("p",{className:"text-orange-800 font-semibold",children:"প্রিমিয়াম চ্যালেঞ্জ"}),a.jsxs("p",{className:"text-xl lg:text-2xl font-bold text-orange-900",children:["৳",se.price]})]}),a.jsx("button",{onClick:()=>C(!0),className:"w-full lg:w-auto bg-gradient-to-r from-orange-600 to-red-600 text-white px-6 lg:px-8 py-3 rounded-2xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 transform hover:scale-105 shadow-lg font-semibold text-sm lg:text-base",children:"পেমেন্ট করুন"})]}),B(se)&&a.jsxs("button",{onClick:()=>w(!0),className:"w-full lg:w-auto bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 lg:px-8 py-3 rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 shadow-lg font-semibold flex items-center justify-center space-x-2 text-sm lg:text-base",children:[a.jsx(AO,{className:"h-5 w-5"}),a.jsx("span",{children:"প্রজেক্ট জমা দিন"})]})]})]})}),a.jsxs("div",{className:"space-y-8",children:[W.map(($,he)=>{var Ge;const be=hd($.id);return a.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 transform hover:-translate-y-1 max-w-2xl mx-auto",children:[he<3&&a.jsxs("div",{className:`absolute top-2 lg:top-3 left-2 lg:left-3 z-10 px-2 lg:px-3 py-1 rounded-full text-white font-bold shadow-md text-xs lg:text-sm ${he===0?"bg-gradient-to-r from-yellow-400 to-yellow-600":he===1?"bg-gradient-to-r from-gray-300 to-gray-500":"bg-gradient-to-r from-orange-400 to-orange-600"}`,children:["#",he+1]}),a.jsx("div",{className:"p-3 lg:p-4 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-purple-50",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[$.authorAvatar?a.jsx("img",{src:$.authorAvatar,alt:$.authorName,className:"w-10 lg:w-12 h-10 lg:h-12 rounded-full object-cover ring-2 ring-purple-100 shadow-md"}):a.jsx("div",{className:"w-10 lg:w-12 h-10 lg:h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center ring-2 ring-purple-100 shadow-md",children:a.jsx("span",{className:"text-white font-bold text-sm lg:text-lg",children:$.authorName.charAt(0).toUpperCase()})}),a.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 lg:w-4 h-3 lg:h-4 bg-green-400 rounded-full border-2 border-white shadow-md"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-gray-900 text-sm lg:text-lg",children:$.authorName}),a.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:hs($.createdAt)}),a.jsx("span",{className:`px-2 lg:px-3 py-1 rounded-full text-xs font-semibold text-white ${f==="7day"?"bg-purple-500":"bg-orange-500"}`,children:f==="7day"?"৭ দিনের চ্যালেঞ্জ":"৩০ দিনের চ্যালেঞ্জ"})]})]})]})})}),a.jsxs("div",{className:"p-3 lg:p-4",children:[a.jsx("h2",{className:"text-lg lg:text-xl font-bold text-gray-900 mb-3 leading-tight",children:$.title}),a.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed text-sm lg:text-base",children:$.description}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300",children:[a.jsx("img",{src:hg($.videoId,"maxres"),alt:$.title,className:"w-full h-32 lg:h-48 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>Ys($.videoId,$.title),className:"bg-white text-gray-900 p-3 rounded-full hover:bg-gray-100 transition-colors transform hover:scale-110",children:a.jsx(Qi,{className:"h-4 lg:h-6 w-4 lg:w-6"})})})]})}),$.imageUrl&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:$.imageUrl,alt:"Project",className:"w-full h-32 lg:h-48 object-cover rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300"})}),$.files&&$.files.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("h4",{className:"font-bold text-gray-900 mb-3 flex items-center text-xs lg:text-sm",children:[a.jsx(Z3,{className:"h-4 w-4 mr-2 text-purple-600"}),"সংযুক্ত ফাইল (",$.files.length,"টি)"]}),a.jsx("div",{className:"grid grid-cols-1 gap-2 lg:gap-3",children:$.files.map((xe,fo)=>a.jsxs("a",{href:xe.url,download:xe.name,className:"flex items-center space-x-2 lg:space-x-3 p-2 lg:p-3 bg-gradient-to-r from-gray-50 to-purple-50 rounded-xl hover:from-purple-50 hover:to-pink-50 transition-all duration-300 border border-gray-200 hover:border-purple-300 hover:shadow-md group",children:[a.jsx("span",{className:"text-lg lg:text-2xl",children:Ha(xe.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold text-gray-900 truncate group-hover:text-purple-700",children:xe.name}),a.jsx("p",{className:"text-xs text-gray-500",children:xu(xe.size)})]}),a.jsx(ag,{className:"h-3 lg:h-4 w-3 lg:w-4 text-gray-400 group-hover:text-purple-600 transition-colors"})]},fo))})]})]}),a.jsx("div",{className:"px-3 lg:px-4 py-3 bg-gradient-to-r from-gray-50 to-purple-50 border-t border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-6",children:[a.jsxs("button",{onClick:()=>sn($.id),className:`flex items-center space-x-1 lg:space-x-2 px-2 lg:px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 text-xs lg:text-sm ${ul($)?"text-red-600 bg-red-50 hover:bg-red-100 shadow-md":"text-gray-600 hover:text-red-600 hover:bg-red-50 hover:shadow-md"}`,children:[a.jsx(cg,{className:`h-4 lg:h-5 w-4 lg:w-5 ${ul($)?"fill-current":""}`}),a.jsx("span",{className:"font-bold",children:$.likesCount}),a.jsx("span",{className:"font-semibold hidden lg:inline",children:"লাইক"})]}),a.jsxs("button",{onClick:()=>P(D===$.id?null:$.id),className:"flex items-center space-x-1 lg:space-x-2 px-2 lg:px-4 py-2 rounded-xl text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all duration-300 transform hover:scale-105 hover:shadow-md text-xs lg:text-sm",children:[a.jsx(Gi,{className:"h-4 lg:h-5 w-4 lg:w-5"}),a.jsx("span",{className:"font-bold",children:$.commentsCount}),a.jsx("span",{className:"font-semibold hidden lg:inline",children:"মন্তব্য"})]})]}),a.jsx("div",{className:"text-xs text-gray-500 font-medium hidden lg:block",children:$.likesCount>0&&a.jsxs("span",{className:"bg-gray-100 px-3 py-1 rounded-full",children:[$.likesCount," জন লাইক করেছেন"]})})]})}),D===$.id&&a.jsx("div",{className:"border-t border-gray-100 bg-white",children:a.jsxs("div",{className:"p-3 lg:p-4",children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[be.map(xe=>a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:xe.authorAvatar?a.jsx("img",{src:xe.authorAvatar,alt:xe.authorName,className:"w-8 lg:w-10 h-8 lg:h-10 rounded-full object-cover ring-2 ring-gray-200"}):a.jsx("div",{className:"w-8 lg:w-10 h-8 lg:h-10 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs lg:text-sm font-semibold",children:xe.authorName.charAt(0).toUpperCase()})})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"bg-gradient-to-r from-gray-100 to-purple-50 rounded-xl px-3 lg:px-4 py-2 lg:py-3 hover:from-purple-50 hover:to-pink-50 transition-all duration-300 shadow-sm hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("p",{className:"font-bold text-xs lg:text-sm text-gray-900",children:xe.authorName}),a.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full",children:hs(xe.createdAt)})]}),a.jsx("p",{className:"text-gray-700 leading-relaxed text-xs lg:text-sm",children:xe.content})]})})]},xe.id)),be.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Gi,{className:"h-8 lg:h-12 w-8 lg:w-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"এখনো কোন মন্তব্য নেই। প্রথম মন্তব্য করুন!"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:z!=null&&z.avatar?a.jsx("img",{src:z.avatar,alt:"Your avatar",className:"w-8 lg:w-10 h-8 lg:h-10 rounded-full object-cover ring-2 ring-purple-200"}):a.jsx("div",{className:"w-8 lg:w-10 h-8 lg:h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs lg:text-sm font-semibold",children:(Ge=t==null?void 0:t.email)==null?void 0:Ge.charAt(0).toUpperCase()})})}),a.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row space-y-2 lg:space-y-0 lg:space-x-3",children:[a.jsx("input",{type:"text",value:L,onChange:xe=>k(xe.target.value),placeholder:"একটি মন্তব্য লিখুন...",className:"flex-1 px-3 lg:px-4 py-2 lg:py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 bg-white shadow-sm hover:shadow-md text-sm",onKeyPress:xe=>{xe.key==="Enter"&&L.trim()&&qt($.id)}}),a.jsx("button",{onClick:()=>qt($.id),disabled:!L.trim(),className:"px-4 lg:px-6 py-2 lg:py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-md hover:shadow-lg text-sm",children:"পাঠান"})]})]})]})})]},$.id)}),W.length===0&&se&&a.jsx("div",{className:"text-center py-20",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 lg:p-16",children:[a.jsx(Hr,{className:"h-12 lg:h-20 w-12 lg:w-20 text-gray-300 mx-auto mb-4 lg:mb-8"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-bold text-gray-900 mb-4",children:"এখনো কোন প্রজেক্ট নেই"}),a.jsx("p",{className:"text-gray-500 mb-4 lg:mb-8 text-sm lg:text-lg",children:"প্রথম হয়ে আপনার প্রজেক্ট জমা দিন!"}),B(se)&&a.jsx("button",{onClick:()=>w(!0),className:"px-6 lg:px-8 py-3 lg:py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 shadow-lg font-semibold text-sm lg:text-base",children:"প্রথম প্রজেক্ট জমা দিন"})]})}),!se&&a.jsx("div",{className:"text-center py-20",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 lg:p-16",children:[a.jsx(Kn,{className:"h-12 lg:h-20 w-12 lg:w-20 text-gray-300 mx-auto mb-4 lg:mb-8"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-bold text-gray-900 mb-4",children:"কোন সক্রিয় চ্যালেঞ্জ নেই"}),a.jsx("p",{className:"text-gray-500 text-sm lg:text-lg",children:"নতুন চ্যালেঞ্জের জন্য অপেক্ষা করুন!"})]})})]}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-3xl max-w-3xl w-full p-6 lg:p-10 max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("h3",{className:"text-xl lg:text-3xl font-bold text-gray-900",children:"প্রজেক্ট জমা দিন"}),a.jsx("button",{onClick:()=>w(!1),className:"p-2 lg:p-3 hover:bg-gray-100 rounded-full transition-colors text-xl lg:text-2xl",children:"×"})]}),a.jsxs("form",{onSubmit:ee,className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"প্রজেক্টের শিরোনাম *"}),a.jsx("input",{type:"text",required:!0,value:_.title,onChange:$=>S({..._,title:$.target.value}),className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-sm lg:text-lg",placeholder:"আকর্ষণীয় শিরোনাম লিখুন..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"প্রজেক্টের বিবরণ *"}),a.jsx("textarea",{required:!0,value:_.description,onChange:$=>S({..._,description:$.target.value}),className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-sm lg:text-lg",rows:6,placeholder:"আপনার প্রজেক্ট সম্পর্কে বিস্তারিত লিখুন..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"ইউটিউব ভিডিও লিংক *"}),a.jsx("input",{type:"url",required:!0,value:_.youtubeUrl,onChange:$=>S({..._,youtubeUrl:$.target.value}),className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-sm lg:text-lg",placeholder:"https://youtube.com/watch?v=..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"প্রজেক্টের ছবি (ঐচ্ছিক)"}),a.jsx("input",{type:"url",value:_.imageUrl,onChange:$=>S({..._,imageUrl:$.target.value}),className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-sm lg:text-lg",placeholder:"https://example.com/image.jpg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"ফাইল আপলোড করুন (ঐচ্ছিক)"}),a.jsx("input",{type:"file",multiple:!0,onChange:Ke,className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",disabled:E}),_.files.length>0&&a.jsx("div",{className:"mt-6 space-y-3",children:_.files.map($=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-2xl lg:text-3xl",children:Ha($.type)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs lg:text-sm font-semibold",children:$.name}),a.jsx("p",{className:"text-xs text-gray-500",children:xu($.size)})]})]}),a.jsx("button",{type:"button",onClick:()=>rn($.id),className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-50 transition-colors text-lg lg:text-xl",children:"×"})]},$.id))})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-6 pt-8",children:[a.jsx("button",{type:"submit",disabled:E,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 lg:py-4 rounded-2xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 font-bold text-sm lg:text-lg shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"আপলোড হচ্ছে...":"প্রজেক্ট জমা দিন"}),a.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 bg-gray-200 text-gray-700 py-3 lg:py-4 rounded-2xl hover:bg-gray-300 transition-all duration-300 font-bold text-sm lg:text-lg",children:"বাতিল"})]})]})]})}),N&&se&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-3xl max-w-md w-full p-6 lg:p-10 shadow-2xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(ep,{className:"h-12 lg:h-16 w-12 lg:w-16 text-orange-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl lg:text-3xl font-bold text-gray-900 mb-2",children:"পেমেন্ট করুন"}),a.jsx("p",{className:"text-gray-600",children:"৩০ দিনের চ্যালেঞ্জে অংশগ্রহণের জন্য"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-red-100 rounded-2xl p-4 lg:p-6 mb-8 text-center",children:[a.jsx("p",{className:"text-orange-800 font-semibold mb-2",children:"পেমেন্ট পরিমাণ"}),a.jsxs("p",{className:"text-2xl lg:text-3xl font-bold text-orange-900",children:["৳",se.price]}),se.paymentNumber&&a.jsxs("div",{className:"mt-4 p-4 bg-white rounded-xl",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"পেমেন্ট নম্বর"}),a.jsx("p",{className:"text-base lg:text-lg font-bold text-gray-900",children:se.paymentNumber}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"বিকাশ/নগদ"})]})]}),a.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"আপনার পেমেন্ট নম্বর *"}),a.jsx("input",{type:"text",required:!0,value:R.paymentNumber,onChange:$=>v({...R,paymentNumber:$.target.value}),className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm lg:text-lg",placeholder:"01XXXXXXXXX"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm lg:text-base font-bold text-gray-700 mb-3",children:"ট্রানজেকশন আইডি *"}),a.jsx("input",{type:"text",required:!0,value:R.transactionId,onChange:$=>v({...R,transactionId:$.target.value}),className:"w-full px-4 lg:px-6 py-3 lg:py-4 border border-gray-300 rounded-2xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm lg:text-lg",placeholder:"TXN123456789"})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-4 pt-6",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 lg:py-4 rounded-2xl hover:from-orange-700 hover:to-red-700 transition-all duration-300 font-bold text-sm lg:text-lg shadow-lg transform hover:scale-105",children:"পেমেন্ট জমা দিন"}),a.jsx("button",{type:"button",onClick:()=>C(!1),className:"flex-1 bg-gray-200 text-gray-700 py-3 lg:py-4 rounded-2xl hover:bg-gray-300 transition-all duration-300 font-bold text-sm lg:text-lg",children:"বাতিল"})]})]})]})}),a.jsx(fg,{videoId:y.videoId,isOpen:y.isOpen,onClose:ho,title:y.title})]})})},JO=()=>{const{currentUser:t}=ds(),{documents:e,addDocument:n,updateDocument:r}=de("userProfiles","points"),[s,i]=j.useState(!1),[o,c]=j.useState({displayName:"",bio:"",avatar:""}),u=e.find(N=>N.userId===(t==null?void 0:t.uid)),d=()=>{var N;c(u?{displayName:u.displayName||"",bio:u.bio||"",avatar:u.avatar||""}:{displayName:((N=t==null?void 0:t.email)==null?void 0:N.split("@")[0])||"",bio:"",avatar:""}),i(!0)},f=async N=>{if(N.preventDefault(),!!t)try{const C={userId:t.uid,...o,points:(u==null?void 0:u.points)||0,completedVideos:(u==null?void 0:u.completedVideos)||0,joinedAt:(u==null?void 0:u.joinedAt)||new Date,updatedAt:new Date};u?await r(u.id,C):await n(C),q.success("প্রোফাইল আপডেট হয়েছে!"),i(!1)}catch{q.error("প্রোফাইল আপডেট করতে সমস্যা হয়েছে!")}},m=N=>{switch(N){case 1:return a.jsx(Hr,{className:"h-6 w-6 text-yellow-500"});case 2:return a.jsx(lO,{className:"h-6 w-6 text-gray-400"});case 3:return a.jsx(es,{className:"h-6 w-6 text-orange-500"});default:return a.jsxs("span",{className:"text-lg font-bold text-gray-600",children:["#",N]})}},g=N=>{switch(N){case 1:return"bg-gradient-to-r from-yellow-400 to-yellow-600";case 2:return"bg-gradient-to-r from-gray-300 to-gray-500";case 3:return"bg-gradient-to-r from-orange-400 to-orange-600";default:return"bg-gradient-to-r from-blue-400 to-blue-600"}},w=[...e].sort((N,C)=>C.points-N.points);return a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pb-20 lg:pb-0",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"লিডারবোর্ড"}),a.jsx("p",{className:"text-gray-600",children:"শীর্ষ শিক্ষার্থীদের তালিকা এবং আপনার অবস্থান দেখুন"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"শীর্ষ শিক্ষার্থী"})}),a.jsxs("div",{className:"divide-y divide-gray-200",children:[w.map((N,C)=>{const A=C+1,x=N.userId===(t==null?void 0:t.uid);return a.jsxs("div",{className:`p-6 flex items-center space-x-4 ${x?"bg-blue-50 border-l-4 border-blue-500":""}`,children:[a.jsx("div",{className:"flex-shrink-0",children:m(A)}),a.jsx("div",{className:"flex-shrink-0",children:N.avatar?a.jsx("img",{src:N.avatar,alt:N.displayName,className:"w-12 h-12 rounded-full object-cover"}):a.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx(ji,{className:"h-6 w-6 text-gray-600"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:N.displayName}),x&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:"আপনি"})]}),N.bio&&a.jsx("p",{className:"text-sm text-gray-600 truncate",children:N.bio}),a.jsx("div",{className:"flex items-center space-x-4 mt-1",children:a.jsxs("span",{className:"text-sm text-gray-500",children:[N.completedVideos," টি ভিডিও সম্পূর্ণ"]})})]}),a.jsx("div",{className:"flex-shrink-0 text-right",children:a.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-white font-semibold ${g(A)}`,children:[N.points," পয়েন্ট"]})})]},N.id)}),w.length===0&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Hr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"এখনো কোন র‍্যাঙ্কিং নেই"})]})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"আপনার প্রোফাইল"}),a.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Xs,{className:"h-4 w-4"})})]}),u?a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mb-4",children:u.avatar?a.jsx("img",{src:u.avatar,alt:u.displayName,className:"w-20 h-20 rounded-full object-cover mx-auto"}):a.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-full flex items-center justify-center mx-auto",children:a.jsx(ji,{className:"h-10 w-10 text-gray-600"})})}),a.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:u.displayName}),u.bio&&a.jsx("p",{className:"text-gray-600 mb-4",children:u.bio}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.points}),a.jsx("p",{className:"text-sm text-gray-600",children:"পয়েন্ট"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.completedVideos}),a.jsx("p",{className:"text-sm text-gray-600",children:"ভিডিও"})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["র‍্যাঙ্ক: #",w.findIndex(N=>N.userId===(t==null?void 0:t.uid))+1]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ji,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"প্রোফাইল তৈরি করুন"}),a.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"প্রোফাইল সেটআপ করুন"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"অর্জন"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{title:"প্রথম ভিডিও",icon:"🎬",earned:!0},{title:"১০ ভিডিও",icon:"📚",earned:!1},{title:"১০০ পয়েন্ট",icon:"⭐",earned:!0},{title:"টপ ১০",icon:"🏆",earned:!1}].map((N,C)=>a.jsxs("div",{className:`p-3 rounded-lg text-center ${N.earned?"bg-yellow-50 border border-yellow-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsx("div",{className:"text-2xl mb-1",children:N.icon}),a.jsx("p",{className:`text-xs font-medium ${N.earned?"text-yellow-800":"text-gray-500"}`,children:N.title})]},C))})]})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"প্রোফাইল আপডেট করুন"}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"নাম"}),a.jsx("input",{type:"text",required:!0,value:o.displayName,onChange:N=>c({...o,displayName:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"আপনার নাম লিখুন"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"বায়ো"}),a.jsx("textarea",{value:o.bio,onChange:N=>c({...o,bio:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"নিজের সম্পর্কে কিছু লিখুন..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"প্রোফাইল ছবির লিংক"}),a.jsx("input",{type:"url",value:o.avatar,onChange:N=>c({...o,avatar:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://..."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"আপডেট করুন"}),a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"বাতিল"})]})]})]})})]})},ZO=()=>{const{documents:t}=de("topics","order"),{documents:e}=de("videos","order"),{documents:n,addDocument:r}=de("userProgress"),{stats:s}=ug(),[i,o]=j.useState("courses"),[c,u]=j.useState(null),[d,f]=j.useState(null),[m,g]=j.useState(!1),{currentUser:w}=ds(),N=async P=>{if(!w)return;if(!n.find(k=>k.userId===w.uid&&k.videoId===P.id))try{await r({userId:w.uid,videoId:P.id,watched:!1,canAccess:!0,summary:"",workLink:"",quizPassed:!1,quizAttempts:0})}catch(k){console.error("Error creating progress:",k)}f(P)},C=()=>{f(null)},A=P=>e.filter(L=>L.topicId===P),x=P=>(A(P),Math.floor(Math.random()*100)),y=()=>e.length*15,I=[{id:"courses",label:"কোর্স",icon:Rs},{id:"community",label:"কমিউনিটি",icon:Gi},{id:"challenges",label:"চ্যালেঞ্জ",icon:Hr},{id:"calendar",label:"ক্যালেন্ডার",icon:Kn},{id:"leaderboard",label:"লিডারবোর্ড",icon:es}],D=P=>{o(P),u(null),f(null),g(!1)};if(i==="community")return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsx("div",{className:"hidden lg:block bg-white shadow-sm border-b sticky top-16 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center space-x-8 py-4",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 ${i===P.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-md"}`,children:[a.jsx(L,{className:"h-5 w-5"}),a.jsx("span",{children:P.label})]},P.id)})})})}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===P.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(L,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:P.label})]},P.id)})})}),a.jsx("div",{className:"pb-20 lg:pb-0",children:a.jsx(QO,{})})]});if(i==="challenges")return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsx("div",{className:"hidden lg:block bg-white shadow-sm border-b sticky top-16 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center space-x-8 py-4",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 ${i===P.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-md"}`,children:[a.jsx(L,{className:"h-5 w-5"}),a.jsx("span",{children:P.label})]},P.id)})})})}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===P.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(L,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:P.label})]},P.id)})})}),a.jsx("div",{className:"pb-20 lg:pb-0",children:a.jsx(YO,{})})]});if(i==="calendar")return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsx("div",{className:"hidden lg:block bg-white shadow-sm border-b sticky top-16 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center space-x-8 py-4",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 ${i===P.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-md"}`,children:[a.jsx(L,{className:"h-5 w-5"}),a.jsx("span",{children:P.label})]},P.id)})})})}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===P.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(L,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:P.label})]},P.id)})})}),a.jsx("div",{className:"pb-20 lg:pb-0",children:a.jsx(XO,{})})]});if(i==="leaderboard")return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsx("div",{className:"hidden lg:block bg-white shadow-sm border-b sticky top-16 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center space-x-8 py-4",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 ${i===P.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-md"}`,children:[a.jsx(L,{className:"h-5 w-5"}),a.jsx("span",{children:P.label})]},P.id)})})})}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===P.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(L,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:P.label})]},P.id)})})}),a.jsx("div",{className:"pb-20 lg:pb-0",children:a.jsx(JO,{})})]});if(c){const P=t.find(k=>k.id===c),L=A(c);return d?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:[a.jsx("div",{className:"mb-4 lg:mb-6",children:a.jsx("button",{onClick:()=>f(null),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 mb-4 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:a.jsx("span",{children:"← ভিডিও তালিকায় ফিরে যান"})})}),a.jsx("div",{className:"pb-20 lg:pb-0",children:a.jsx(GO,{video:d,onVideoComplete:C})})]}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(k=>{const E=k.icon;return a.jsxs("button",{onClick:()=>D(k.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===k.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(E,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:k.label})]},k.id)})})})]}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(pr,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:[a.jsxs("div",{className:"mb-4 lg:mb-6",children:[a.jsx("button",{onClick:()=>{u(null),o("courses")},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800 mb-4 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:a.jsx("span",{children:"← সব টপিকে ফিরে যান"})}),a.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:P==null?void 0:P.name}),a.jsx("p",{className:"text-gray-600",children:P==null?void 0:P.description})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 pb-20 lg:pb-0",children:L.map((k,E)=>a.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1",onClick:()=>N(k),children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:hg(k.videoId),alt:k.title,className:"w-full h-40 lg:h-48 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:b=>{b.stopPropagation(),N(k)},className:"bg-white text-gray-900 p-3 lg:p-4 rounded-full hover:bg-gray-100 transition-colors",children:a.jsx(Qi,{className:"h-5 w-5 lg:h-6 lg:w-6"})})}),a.jsxs("div",{className:"absolute top-2 left-2 bg-blue-600 text-white px-2 py-1 rounded text-sm",children:["পর্ব ",E+1]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2 text-sm lg:text-base",children:k.title}),a.jsx("p",{className:"text-xs lg:text-sm text-gray-600 mb-4",children:k.description}),k.files&&k.files.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-xs lg:text-sm font-medium text-gray-900 mb-2",children:"সংযুক্ত ফাইল:"}),a.jsx("div",{className:"space-y-2",children:k.files.map((b,_)=>a.jsxs("a",{href:b.url,download:b.name,className:"flex items-center space-x-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx("span",{className:"text-sm lg:text-base",children:Ha(b.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs lg:text-sm font-medium text-gray-900 truncate",children:b.name}),a.jsx("p",{className:"text-xs text-gray-500",children:xu(b.size)})]}),a.jsx(ag,{className:"h-3 w-3 lg:h-4 lg:w-4 text-gray-400"})]},_))})]}),a.jsxs("button",{onClick:b=>{b.stopPropagation(),N(k)},className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 text-sm lg:text-base",children:[a.jsx(Qi,{className:"h-4 w-4"}),a.jsx("span",{children:"ভিডিও দেখুন"})]})]})]},k.id))})]}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(k=>{const E=k.icon;return a.jsxs("button",{onClick:()=>D(k.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===k.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(E,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:k.label})]},k.id)})})})]})}return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[a.jsx(pr,{}),a.jsx("div",{className:"hidden lg:block bg-white shadow-sm border-b sticky top-16 z-40",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-center space-x-8 py-4",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105 ${i===P.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:shadow-md"}`,children:[a.jsx(L,{className:"h-5 w-5"}),a.jsx("span",{children:P.label})]},P.id)})})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-3xl text-white p-6 lg:p-8 mb-6 lg:mb-8 shadow-2xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),a.jsx("div",{className:"absolute top-0 right-0 w-32 lg:w-64 h-32 lg:h-64 bg-white bg-opacity-10 rounded-full -translate-y-16 lg:-translate-y-32 translate-x-16 lg:translate-x-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 lg:w-48 h-24 lg:h-48 bg-white bg-opacity-10 rounded-full translate-y-12 lg:translate-y-24 -translate-x-12 lg:-translate-x-24"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h1",{className:"text-2xl lg:text-3xl font-bold mb-3 lg:mb-4",children:"আপনার শেখার যাত্রা শুরু করুন"}),a.jsx("p",{className:"text-blue-100 mb-4 lg:mb-6 text-sm lg:text-base",children:"বিভিন্ন টপিকে বিশেষজ্ঞ হয়ে উঠুন আমাদের সাথে"}),a.jsx("div",{className:"grid grid-cols-3 gap-3 lg:gap-4",children:[{icon:Rs,title:"মোট কোর্স",value:s.totalTopics},{icon:es,title:"সম্পূর্ণ হয়েছে",value:"৮"},{icon:Ki,title:"মোট সময়",value:`${Math.floor(y()/60)} ঘন্টা`}].map((P,L)=>a.jsx("div",{className:"bg-white bg-opacity-20 rounded-xl p-3 lg:p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[a.jsx(P.icon,{className:"h-5 w-5 lg:h-6 lg:w-6 text-blue-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-100 text-xs lg:text-sm",children:P.title}),a.jsx("p",{className:"text-white text-sm lg:text-xl font-bold",children:P.value})]})]})},L))})]})]}),a.jsxs("div",{className:"mb-4 lg:mb-8",children:[a.jsx("h2",{className:"text-lg lg:text-2xl font-bold text-gray-900 mb-4 lg:mb-6",children:"সব টপিক"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 pb-20 lg:pb-0",children:t.map(P=>{const L=A(P.id).length,k=x(P.id);return a.jsxs("div",{onClick:()=>u(P.id),className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden transform hover:-translate-y-2",children:[P.thumbnail&&a.jsx("img",{src:P.thumbnail,alt:P.name,className:"w-full h-32 lg:h-40 object-cover"}),a.jsxs("div",{className:"p-4 lg:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 lg:mb-4",children:[a.jsx(Rs,{className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-600"}),a.jsxs("span",{className:"text-xs lg:text-sm text-gray-500",children:[L," টি ভিডিও"]})]}),a.jsx("h3",{className:"text-base lg:text-xl font-semibold text-gray-900 mb-2",children:P.name}),a.jsx("p",{className:"text-sm lg:text-base text-gray-600 mb-3 lg:mb-4",children:P.description}),a.jsxs("div",{className:"mb-3 lg:mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs lg:text-sm text-gray-600 mb-1",children:[a.jsx("span",{children:"অগ্রগতি"}),a.jsxs("span",{children:[k,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}),a.jsx("button",{className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 lg:py-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg text-sm lg:text-base font-medium",children:"শুরু করুন"})]})]},P.id)})})]})]}),a.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50 shadow-lg",children:a.jsx("div",{className:"grid grid-cols-5 gap-1",children:I.map(P=>{const L=P.icon;return a.jsxs("button",{onClick:()=>D(P.id),className:`flex flex-col items-center justify-center py-3 px-2 transition-all duration-200 ${i===P.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[a.jsx(L,{className:"h-5 w-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:P.label})]},P.id)})})})]})},e5=()=>{const{currentUser:t,isAdmin:e}=ds();return t?a.jsxs(q2,{children:[a.jsx(yf,{path:"/",element:e?a.jsx(KO,{}):a.jsx(ZO,{})}),a.jsx(yf,{path:"*",element:a.jsx(B2,{to:"/",replace:!0})})]}):a.jsx(OO,{})};function t5(){return a.jsx(k3,{children:a.jsx(pk,{children:a.jsxs("div",{className:"App",children:[a.jsx(e5,{}),a.jsx(fS,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"}}})]})})})}Aw(document.getElementById("root")).render(a.jsx(j.StrictMode,{children:a.jsx(t5,{})}));
